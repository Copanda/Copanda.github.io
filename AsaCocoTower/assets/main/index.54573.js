window.__require=function t(e,o,n){function a(i,c){if(!o[i]){if(!e[i]){var l=i.split("/");if(l=l[l.length-1],!e[l]){var s="function"==typeof __require&&__require;if(!c&&s)return s(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+i+"'")}i=l}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){return a(e[i][1][t]||t)},u,u.exports,t,e,o,n)}return o[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<n.length;i++)a(n[i]);return a}({BoxPool:[function(t,e,o){"use strict";cc._RF.push(e,"c7669+wAuNBUr0Se+E84Hjl","BoxPool"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Define"),a=function(){function t(t,e,o){this.mGameView=null,this.mParent=[],this.mSPParent=null,this.mPrefabs=[],this.mBoxes=[],this.mIsLoading=0,this.mParent[0]=t,this.mParent[1]=e,this.mGameView=o}return Object.defineProperty(t.prototype,"IsLoading",{get:function(){return this.mIsLoading==Object.keys(n.default.SymbolType).length},enumerable:!1,configurable:!0}),t.prototype.GetBox=function(){var t=this.GetRandomType(),e=this.GetRandomKey(this.mPrefabs[t]),o=cc.instantiate(e);return o.parent=t==n.default.SymbolType.Other?this.mParent[1]:this.mParent[0],this.mBoxes.push(o),o},t.prototype.ReturnBox=function(){},t.prototype.ReturnAll=function(){this.mBoxes.forEach(function(t){t.removeFromParent(),t.destroy(),t=null}),this.mBoxes=[]},t.prototype.LoadBoxes=function(){var t=this;cc.loader.loadResDir("prefab/Other",cc.Prefab,function(e,o){e?cc.error(e):(t.mPrefabs[n.default.SymbolType.Other]={},o.forEach(function(e){t.mPrefabs[n.default.SymbolType.Other][e.name]=e}),t.mIsLoading++)}),cc.loader.loadResDir("prefab/asacoco",cc.Prefab,function(e,o){e?cc.error(e):(t.mPrefabs[n.default.SymbolType.Asacoco]={},o.forEach(function(e){t.mPrefabs[n.default.SymbolType.Asacoco][e.name]=e}),t.mIsLoading++)})},t.prototype.GetRandomKey=function(t){var e=Object.keys(t);return t[e[e.length*Math.random()<<0]]},t.prototype.GetRandomType=function(){var t=Math.floor(10*Math.random());return cc.error(t),0==t?n.default.SymbolType.Other:Math.floor(Math.random()*this.mPrefabs.length)},t}();o.default=a,cc._RF.pop()},{"./Define":"Define"}],Box:[function(t,e,o){"use strict";cc._RF.push(e,"4c0ffg8IUFN/5hCQ38e5fRo","Box");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var a,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(i=(r<3?a(i):r>3?a(e,o,i):a(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,l=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsDone=!1,e}return a(e,t),e.prototype.onLoad=function(){this.mBody=this.node.getComponent(cc.RigidBody)},e.prototype.start=function(){},e.prototype.onCollisionEnter=function(t){"wall"==t.node.group&&this.mGameOverEvent&&this.mGameOverEvent()},e.prototype.onBeginContact=function(){!this.mIsDone&&this.mContactEvent&&(this.mIsDone=!0,this.mContactEvent())},e.prototype.SetGameOverEvent=function(t){this.mGameOverEvent=t},e.prototype.SetContactEvent=function(t){this.mContactEvent=t},r([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{}],Component:[function(t,e,o){"use strict";cc._RF.push(e,"e9c7bEEuN1GYJEbmTTMYERk","Component");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var a,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(i=(r<3?a(i):r>3?a(e,o,i):a(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,l=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ScoreLabel=null,e.BoxesNode=null,e.SPBoxesNode=null,e.DropBtn=null,e.RotateRight=null,e.RotateLeft=null,e.TouchPanel=null,e.GameOver=null,e.Hamu=null,e.Tip=null,e}var o;return a(e,t),o=e,e.prototype.onLoad=function(){o.ins=this},e.ins=null,r([l({type:cc.Label,displayName:"Score",tooltip:"\u5206\u6578"})],e.prototype,"ScoreLabel",void 0),r([l({type:cc.Node,displayName:"Boxes",tooltip:"\u7bb1\u5b50\u5b58\u653e\u8655"})],e.prototype,"BoxesNode",void 0),r([l({type:cc.Node,displayName:"SPBoxes",tooltip:"\u7279\u6b8a\u7bb1\u5b50\u5b58\u653e\u8655"})],e.prototype,"SPBoxesNode",void 0),r([l({type:cc.Node,displayName:"DropBtn",tooltip:"\u843d\u4e0b\u6309\u9215"})],e.prototype,"DropBtn",void 0),r([l({type:cc.Node,displayName:"RotateRight",tooltip:"\u53f3\u65cb\u8f49\u6309\u9215"})],e.prototype,"RotateRight",void 0),r([l({type:cc.Node,displayName:"RotateLeft",tooltip:"\u5de6\u65cb\u8f49\u6309\u9215"})],e.prototype,"RotateLeft",void 0),r([l({type:cc.Node,displayName:"TouchPanel",tooltip:"\u89f8\u63a7\u9762\u677f"})],e.prototype,"TouchPanel",void 0),r([l({type:cc.Node,displayName:"GameOver",tooltip:"\u904a\u6232\u7d50\u675f\u63d0\u793a"})],e.prototype,"GameOver",void 0),r([l({type:cc.Node,displayName:"Hamu",tooltip:"\u54c8\u59c6\u592a\u90ce"})],e.prototype,"Hamu",void 0),r([l({type:cc.Node,displayName:"Tip",tooltip:"\u904a\u6232\u76f8\u95dc\u8cc7\u8a0a"})],e.prototype,"Tip",void 0),o=r([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Define:[function(t,e,o){"use strict";cc._RF.push(e,"46f29Ut8OVHNqdsEz+A+B0T","Define"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.Version="V0.1",t.MainState=cc.Enum({Loading:-1,Menu:-1,Game:-1}),t.GameState=cc.Enum({Loading:-1,Idle:-1,Player1:-1,Player2:-1,CheckAwake:-1,End:-1,GameOver:-1}),t.SymbolType=cc.Enum({Other:-1,Asacoco:-1}),t.Symbol={akaoni:"prefab/akaoni",akuma:"prefab/akuma",asacoco:"prefab/asacoco",shark:"prefab/shark",sheep:"prefab/sheep",ame1:"prefab/walfie/ame1",ame2:"prefab/walfie/ame2",ame3:"prefab/walfie/ame3",ame4:"prefab/walfie/ame4",ame5:"prefab/walfie/ame5",ame6:"prefab/walfie/ame6",coco1:"prefab/walfie/coco1",fbk1:"prefab/walfie/fbk1",gura1:"prefab/walfie/gura1",ina1:"prefab/walfie/ina1",kiara1:"prefab/walfie/kiara1",mori1:"prefab/walfie/mori1",ollie1:"prefab/walfie/ollie1"},t}();o.default=n,cc._RF.pop()},{}],FiniteState:[function(t,e,o){"use strict";cc._RF.push(e,"33619zgzYJG5oeBTUxlapVV","FiniteState"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t){this.m_currState=0,this.m_nextState=0,this.m_transitTime=0,this.m_toTransit=!0,this.m_forced=!1,this.m_entering=!1,this.m_currState=t,this.m_nextState=t}return t.prototype.Tick=function(){return this.m_toTransit?(this.m_currState=this.m_nextState,this.m_transitTime=(new Date).getTime()/1e3,this.m_toTransit=!1,this.m_forced=!1,this.m_entering=!0):this.m_entering=!1,this.m_currState},t.prototype.NextState=function(t){this.m_forced||(this.m_nextState=t,this.m_toTransit=!0)},t.prototype.Current=function(){return this.m_currState},t.prototype.Elapsed=function(){return(new Date).getTime()/1e3-this.m_transitTime},t.prototype.IsEntering=function(){return this.m_entering},t.prototype.ForceTransit=function(t){this.m_nextState=t,this.m_toTransit=!0,this.m_forced=!0},t}();o.default=n,cc._RF.pop()},{}],GameView:[function(t,e,o){"use strict";cc._RF.push(e,"e2f0fOuSc1H34H7RtNRYHjm","GameView");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var a,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(i=(r<3?a(i):r>3?a(e,o,i):a(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./common/FiniteState"),c=t("./Define"),l=t("./Box"),s=t("./BoxPool"),u=t("./Component"),p=cc._decorator,f=p.ccclass,m=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsOnePlayer=!0,e.mNowPlayer=1,e.mNowBox=null,e.mIsDrop=!1,e.mIsCheck=!1,e.mScore=0,e.mCheckTimeOut=null,e.mBoxPool=null,e}return a(e,t),e.prototype.onLoad=function(){this.mState=new i.default(c.default.GameState.Loading),this.mBoxPool=new s.default(u.default.ins.BoxesNode,u.default.ins.SPBoxesNode,this),this.mBoxPool.LoadBoxes()},e.prototype.start=function(){this.SetEvent()},e.prototype.GameUpdate=function(){var t=this;switch(this.mState.Tick(),this.mState.Current()){case c.default.GameState.Loading:this.mState.IsEntering()&&cc.log("GameState:Loading"),this.mBoxPool.IsLoading&&this.mState.NextState(c.default.GameState.Idle);break;case c.default.GameState.Idle:this.mState.IsEntering()&&(cc.log("GameState:Idle"),this.mNowBox=null,this.mIsDrop=!1,this.mIsCheck=!1,this.mForceStopTimeOut&&(clearTimeout(this.mForceStopTimeOut),this.mForceStopTimeOut=null),this.mIsOnePlayer?this.mState.NextState(c.default.GameState.Player1):(this.mNowPlayer=1==this.mNowPlayer?2:1,1==this.mNowPlayer?this.mState.NextState(c.default.GameState.Player2):this.mState.NextState(c.default.GameState.Player1)));break;case c.default.GameState.Player1:this.mState.IsEntering()&&(cc.log("GameState:Player1"),this.GetBox());break;case c.default.GameState.Player2:this.mState.IsEntering()&&cc.log("GameState:Player2");break;case c.default.GameState.CheckAwake:this.mState.IsEntering()&&(cc.log("GameState:CheckAwake"),this.mCheckTimeOut=setTimeout(function(){t.mState.NextState(c.default.GameState.End)},3e3));break;case c.default.GameState.End:this.mState.IsEntering()&&(cc.log("GameState:End"),this.mState.NextState(c.default.GameState.Idle));break;case c.default.GameState.GameOver:this.mState.IsEntering()&&cc.log("GameState:GameOver")}},e.prototype.GetBox=function(){var t=this;this.mNowBox=this.mBoxPool.GetBox(),this.mNowBox.position=cc.v3(320,970),this.mNowBox.getComponent(l.default).SetGameOverEvent(function(){t.GameOverEvent()}),this.mNowBox.getComponent(l.default).SetContactEvent(function(){t.ContactEvent()})},e.prototype.GameOverEvent=function(){u.default.ins.GameOver.active=!0,this.mForceStopTimeOut&&(clearTimeout(this.mForceStopTimeOut),this.mForceStopTimeOut=null),cc.director.pause()},e.prototype.ContactEvent=function(){this.mState.NextState(c.default.GameState.CheckAwake)},e.prototype.Restart=function(){null!=this.mCheckTimeOut&&(clearTimeout(this.mCheckTimeOut),this.mCheckTimeOut=null),u.default.ins.GameOver.active=!1,this.mScore=0,u.default.ins.ScoreLabel.string=this.mScore.toString(),this.mBoxPool.ReturnAll(),this.mState.NextState(c.default.GameState.Idle),cc.director.resume()},e.prototype.IsLoading=function(){return this.mBoxPool.IsLoading},e.prototype.SetEvent=function(){var t=this;u.default.ins.TouchPanel.on(cc.Node.EventType.TOUCH_START,function(e){if(!t.mIsDrop&&t.mNowBox){var o=e.getLocationX();t.mNowBox.position=cc.v3(o,970)}}),u.default.ins.TouchPanel.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(!t.mIsDrop&&t.mNowBox){var o=e.getLocationX();t.mNowBox.position=cc.v3(o,970)}}),u.default.ins.DropBtn.on(cc.Node.EventType.TOUCH_START,function(){t.mIsDrop||(u.default.ins.DropBtn.scale=.9)}),u.default.ins.DropBtn.on(cc.Node.EventType.TOUCH_END,function(){t.mIsDrop||t.mState.Current()!=c.default.GameState.Player1&&t.mState.Current()!=c.default.GameState.Player2||(u.default.ins.DropBtn.scale=1,t.mScore++,u.default.ins.ScoreLabel.string=t.mScore.toString(),t.mNowBox.getComponent(cc.RigidBody).awake=!0,t.mIsDrop=!0,t.mForceStopTimeOut=setTimeout(function(){t.mState.NextState(c.default.GameState.End)},1e4))}),u.default.ins.DropBtn.on(cc.Node.EventType.TOUCH_CANCEL,function(){u.default.ins.DropBtn.scale=1}),u.default.ins.RotateRight.on(cc.Node.EventType.TOUCH_START,function(){t.mIsDrop||(u.default.ins.RotateRight.scale=.9,t.mNowBox.angle+=10,t.mRotateInterval=setInterval(function(){t.mNowBox.angle+=10},100))}),u.default.ins.RotateRight.on(cc.Node.EventType.TOUCH_END,function(){u.default.ins.RotateRight.scale=1,t.mRotateInterval&&(clearInterval(t.mRotateInterval),t.mRotateInterval=null)}),u.default.ins.RotateRight.on(cc.Node.EventType.TOUCH_CANCEL,function(){u.default.ins.RotateRight.scale=1,t.mRotateInterval&&(clearInterval(t.mRotateInterval),t.mRotateInterval=null)}),u.default.ins.RotateLeft.on(cc.Node.EventType.TOUCH_START,function(){t.mIsDrop||(u.default.ins.RotateLeft.scale=.9,t.mNowBox.angle-=10,t.mRotateInterval=setInterval(function(){t.mNowBox.angle-=10},100))}),u.default.ins.RotateLeft.on(cc.Node.EventType.TOUCH_END,function(){u.default.ins.RotateLeft.scale=1,t.mRotateInterval&&(clearInterval(t.mRotateInterval),t.mRotateInterval=null)}),u.default.ins.RotateLeft.on(cc.Node.EventType.TOUCH_CANCEL,function(){u.default.ins.RotateLeft.scale=1,t.mRotateInterval&&(clearInterval(t.mRotateInterval),t.mRotateInterval=null)});var e=u.default.ins.GameOver.getChildByName("restart");e.on(cc.Node.EventType.TOUCH_START,function(){e.scale=.9}),e.on(cc.Node.EventType.TOUCH_END,function(){t.Restart(),e.scale=1}),e.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.scale=1}),u.default.ins.Hamu.on(cc.Node.EventType.TOUCH_END,function(){u.default.ins.Tip.active=!0}),u.default.ins.Tip.getChildByName("bg").on(cc.Node.EventType.TOUCH_START,function(){u.default.ins.Tip.active=!1})},r([f],e)}(cc.Component));o.default=m,cc._RF.pop()},{"./Box":"Box","./BoxPool":"BoxPool","./Component":"Component","./Define":"Define","./common/FiniteState":"FiniteState"}],LocalStorageManager:[function(t,e,o){"use strict";cc._RF.push(e,"7273aR61oRJEbyiN1sz4bKX","LocalStorageManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.SetBool=function(t,e){"boolean"==typeof e?cc.sys.localStorage.setItem(t,e.toString()):cc.error("LocalStorage error: SetBool fault")},t.prototype.GetBool=function(t){var e;return null!=(e=cc.sys.localStorage.getItem(t))?"false"!=e&&("true"==e||(cc.error("LocalStorage error: GetBool fault"),null)):(cc.warn("LocalStorage error: Key not found "),null)},t.prototype.SetInt=function(t,e){"number"==typeof e?cc.sys.localStorage.setItem(t,e.toString()):cc.error("LocalStorage error: SetInt fault")},t.prototype.GetInt=function(t){var e;return null!=(e=cc.sys.localStorage.getItem(t))?isNaN(Number(e))?(cc.error("LocalStorage error: GetInt fault"),null):Number(e):(cc.warn("LocalStorage error: Key not found "),null)},t.prototype.SetString=function(t,e){"string"==typeof e?cc.sys.localStorage.setItem(t,e):cc.error("LocalStorage error: SetString fault")},t.prototype.GetString=function(t){var e;return null!=(e=cc.sys.localStorage.getItem(t))?e:(cc.warn("LocalStorage error: Key not found "),null)},t.prototype.SetObject=function(t,e){"object"==typeof e?cc.sys.localStorage.setItem(t,JSON.stringify(e)):cc.error("LocalStorage error: setObject fault")},t.prototype.GetObject=function(t){var e;if(null==(e=cc.sys.localStorage.getItem(t)))return cc.warn("LocalStorage error: Key not found "),null;try{var o=JSON.parse(e);if(o&&"object"==typeof o)return o}catch(n){return cc.error("LocalStorage error: Value is not object"),null}},t.prototype.RemoveData=function(t){return cc.sys.localStorage.removeItem(t)},t.prototype.ClearData=function(){return cc.sys.localStorage.clear()},t}();o.default=n,cc._RF.pop()},{}],MainView:[function(t,e,o){"use strict";cc._RF.push(e,"3d85d/SLShC243xVlgKH+Rn","MainView");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var a,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(i=(r<3?a(i):r>3?a(e,o,i):a(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./common/FiniteState"),c=t("./Define"),l=t("./GameView"),s=cc._decorator,u=s.ccclass,p=s.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mLoading=null,e.mMenu=null,e.mGameView=null,e.mVersion=null,e}return a(e,t),e.prototype.onLoad=function(){this.mState=new i.default(c.default.MainState.Loading),cc.macro.ENABLE_MULTI_TOUCH=!1,cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.mVersion.string=c.default.Version,this.mLoading.active=!0},e.prototype.start=function(){},e.prototype.update=function(t){switch(this.mState.Tick(),this.mState.Current()){case c.default.MainState.Loading:this.mState.IsEntering()&&cc.log("MainState:Loading"),this.mGameView.IsLoading&&(this.mMenu.active=!0,this.mLoading.active=!1,this.mState.NextState(c.default.MainState.Menu));break;case c.default.MainState.Menu:this.mState.IsEntering()&&(cc.log("MainState:Menu"),this.mState.NextState(c.default.MainState.Game));break;case c.default.MainState.Game:this.mState.IsEntering()&&cc.log("MainState:Game"),this.mGameView.GameUpdate(t)}},r([p(cc.Node)],e.prototype,"mLoading",void 0),r([p(cc.Node)],e.prototype,"mMenu",void 0),r([p(l.default)],e.prototype,"mGameView",void 0),r([p(cc.Label)],e.prototype,"mVersion",void 0),r([u],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./Define":"Define","./GameView":"GameView","./common/FiniteState":"FiniteState"}]},{},["Box","BoxPool","Component","Define","GameView","MainView","FiniteState","LocalStorageManager"]);