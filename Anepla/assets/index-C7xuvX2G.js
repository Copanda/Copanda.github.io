var Vl=Object.defineProperty;var zl=(s,e,t)=>e in s?Vl(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var h=(s,e,t)=>zl(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function en(s,e){const t=new Set(s.split(","));return i=>t.has(i)}const me={},Ut=[],Fe=()=>{},jl=()=>!1,Zs=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),tn=s=>s.startsWith("onUpdate:"),Ce=Object.assign,sn=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},Hl=Object.prototype.hasOwnProperty,oe=(s,e)=>Hl.call(s,e),X=Array.isArray,Vt=s=>ei(s)==="[object Map]",Ao=s=>ei(s)==="[object Set]",Z=s=>typeof s=="function",_e=s=>typeof s=="string",Bt=s=>typeof s=="symbol",ye=s=>s!==null&&typeof s=="object",Do=s=>(ye(s)||Z(s))&&Z(s.then)&&Z(s.catch),$o=Object.prototype.toString,ei=s=>$o.call(s),Nl=s=>ei(s).slice(8,-1),Wo=s=>ei(s)==="[object Object]",nn=s=>_e(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,is=en(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ti=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},Fl=/-(\w)/g,Nt=ti(s=>s.replace(Fl,(e,t)=>t?t.toUpperCase():"")),Gl=/\B([A-Z])/g,Kt=ti(s=>s.replace(Gl,"-$1").toLowerCase()),Uo=ti(s=>s.charAt(0).toUpperCase()+s.slice(1)),di=ti(s=>s?`on${Uo(s)}`:""),_t=(s,e)=>!Object.is(s,e),fi=(s,...e)=>{for(let t=0;t<s.length;t++)s[t](...e)},Vo=(s,e,t,i=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:i,value:t})},Kl=s=>{const e=parseFloat(s);return isNaN(e)?s:e};let On;const zo=()=>On||(On=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function de(s){if(X(s)){const e={};for(let t=0;t<s.length;t++){const i=s[t],n=_e(i)?Ql(i):de(i);if(n)for(const o in n)e[o]=n[o]}return e}else if(_e(s)||ye(s))return s}const ql=/;(?![^(]*\))/g,Xl=/:([^]+)/,Yl=/\/\*[^]*?\*\//g;function Ql(s){const e={};return s.replace(Yl,"").split(ql).forEach(t=>{if(t){const i=t.split(Xl);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function cs(s){let e="";if(_e(s))e=s;else if(X(s))for(let t=0;t<s.length;t++){const i=cs(s[t]);i&&(e+=i+" ")}else if(ye(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}const Jl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zl=en(Jl);function jo(s){return!!s||s===""}const Ft=s=>_e(s)?s:s==null?"":X(s)||ye(s)&&(s.toString===$o||!Z(s.toString))?JSON.stringify(s,Ho,2):String(s),Ho=(s,e)=>e&&e.__v_isRef?Ho(s,e.value):Vt(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,n],o)=>(t[pi(i,o)+" =>"]=n,t),{})}:Ao(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>pi(t))}:Bt(e)?pi(e):ye(e)&&!X(e)&&!Wo(e)?String(e):e,pi=(s,e="")=>{var t;return Bt(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xe;class er{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Xe,!e&&Xe&&(this.index=(Xe.scopes||(Xe.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=Xe;try{return Xe=this,e()}finally{Xe=t}}}on(){Xe=this}off(){Xe=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function tr(s,e=Xe){e&&e.active&&e.effects.push(s)}function sr(){return Xe}let Lt;class on{constructor(e,t,i,n){this.fn=e,this.trigger=t,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,tr(this,n)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,xt();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed){if(t.computed.effect._dirtyLevel===2)return!0;if(ir(t.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),wt()}return this._dirtyLevel>=5}set dirty(e){this._dirtyLevel=e?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=yt,t=Lt;try{return yt=!0,Lt=this,this._runnings++,Tn(this),this.fn()}finally{An(this),this._runnings--,Lt=t,yt=e}}stop(){this.active&&(Tn(this),An(this),this.onStop&&this.onStop(),this.active=!1)}}function ir(s){return s.value}function Tn(s){s._trackId++,s._depsLength=0}function An(s){if(s.deps.length>s._depsLength){for(let e=s._depsLength;e<s.deps.length;e++)No(s.deps[e],s);s.deps.length=s._depsLength}}function No(s,e){const t=s.get(e);t!==void 0&&e._trackId!==t&&(s.delete(e),s.size===0&&s.cleanup())}let yt=!0,Si=0;const Fo=[];function xt(){Fo.push(yt),yt=!1}function wt(){const s=Fo.pop();yt=s===void 0?!0:s}function ln(){Si++}function rn(){for(Si--;!Si&&Li.length;)Li.shift()()}function Go(s,e,t){if(e.get(s)!==s._trackId){e.set(s,s._trackId);const i=s.deps[s._depsLength];i!==e?(i&&No(i,s),s.deps[s._depsLength++]=e):s._depsLength++}}const Li=[];function Ko(s,e,t){ln();for(const i of s.keys()){if(!s.computed&&i.computed&&s.get(i)===i._trackId&&i._runnings>0){i._dirtyLevel=2;continue}let n;i._dirtyLevel<e&&(n??(n=s.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i.computed&&i._dirtyLevel===2&&(i._shouldSchedule=!0),i._dirtyLevel=e),i._shouldSchedule&&(n??(n=s.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==3&&(i._shouldSchedule=!1,i.scheduler&&Li.push(i.scheduler)))}rn()}const qo=(s,e)=>{const t=new Map;return t.cleanup=s,t.computed=e,t},Ri=new WeakMap,Rt=Symbol(""),Pi=Symbol("");function Ae(s,e,t){if(yt&&Lt){let i=Ri.get(s);i||Ri.set(s,i=new Map);let n=i.get(t);n||i.set(t,n=qo(()=>i.delete(t))),Go(Lt,n)}}function at(s,e,t,i,n,o){const l=Ri.get(s);if(!l)return;let r=[];if(e==="clear")r=[...l.values()];else if(t==="length"&&X(s)){const a=Number(i);l.forEach((c,u)=>{(u==="length"||!Bt(u)&&u>=a)&&r.push(c)})}else switch(t!==void 0&&r.push(l.get(t)),e){case"add":X(s)?nn(t)&&r.push(l.get("length")):(r.push(l.get(Rt)),Vt(s)&&r.push(l.get(Pi)));break;case"delete":X(s)||(r.push(l.get(Rt)),Vt(s)&&r.push(l.get(Pi)));break;case"set":Vt(s)&&r.push(l.get(Rt));break}ln();for(const a of r)a&&Ko(a,5);rn()}const nr=en("__proto__,__v_isRef,__isVue"),Xo=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Bt)),Dn=or();function or(){const s={};return["includes","indexOf","lastIndexOf"].forEach(e=>{s[e]=function(...t){const i=ce(this);for(let o=0,l=this.length;o<l;o++)Ae(i,"get",o+"");const n=i[e](...t);return n===-1||n===!1?i[e](...t.map(ce)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{s[e]=function(...t){xt(),ln();const i=ce(this)[e].apply(this,t);return rn(),wt(),i}}),s}function lr(s){Bt(s)||(s=String(s));const e=ce(this);return Ae(e,"has",s),e.hasOwnProperty(s)}class Yo{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){const n=this._isReadonly,o=this._isShallow;if(t==="__v_isReactive")return!n;if(t==="__v_isReadonly")return n;if(t==="__v_isShallow")return o;if(t==="__v_raw")return i===(n?o?_r:el:o?Zo:Jo).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const l=X(e);if(!n){if(l&&oe(Dn,t))return Reflect.get(Dn,t,i);if(t==="hasOwnProperty")return lr}const r=Reflect.get(e,t,i);return(Bt(t)?Xo.has(t):nr(t))||(n||Ae(e,"get",t),o)?r:De(r)?l&&nn(t)?r:r.value:ye(r)?n?tl(r):un(r):r}}class Qo extends Yo{constructor(e=!1){super(!1,e)}set(e,t,i,n){let o=e[t];if(!this._isShallow){const a=us(o);if(!Os(i)&&!us(i)&&(o=ce(o),i=ce(i)),!X(e)&&De(o)&&!De(i))return a?!1:(o.value=i,!0)}const l=X(e)&&nn(t)?Number(t)<e.length:oe(e,t),r=Reflect.set(e,t,i,n);return e===ce(n)&&(l?_t(i,o)&&at(e,"set",t,i):at(e,"add",t,i)),r}deleteProperty(e,t){const i=oe(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&at(e,"delete",t,void 0),n}has(e,t){const i=Reflect.has(e,t);return(!Bt(t)||!Xo.has(t))&&Ae(e,"has",t),i}ownKeys(e){return Ae(e,"iterate",X(e)?"length":Rt),Reflect.ownKeys(e)}}class rr extends Yo{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const ar=new Qo,cr=new rr,ur=new Qo(!0);const an=s=>s,si=s=>Reflect.getPrototypeOf(s);function vs(s,e,t=!1,i=!1){s=s.__v_raw;const n=ce(s),o=ce(e);t||(_t(e,o)&&Ae(n,"get",e),Ae(n,"get",o));const{has:l}=si(n),r=i?an:t?dn:hs;if(l.call(n,e))return r(s.get(e));if(l.call(n,o))return r(s.get(o));s!==n&&s.get(e)}function _s(s,e=!1){const t=this.__v_raw,i=ce(t),n=ce(s);return e||(_t(s,n)&&Ae(i,"has",s),Ae(i,"has",n)),s===n?t.has(s):t.has(s)||t.has(n)}function xs(s,e=!1){return s=s.__v_raw,!e&&Ae(ce(s),"iterate",Rt),Reflect.get(s,"size",s)}function $n(s){s=ce(s);const e=ce(this);return si(e).has.call(e,s)||(e.add(s),at(e,"add",s,s)),this}function Wn(s,e){e=ce(e);const t=ce(this),{has:i,get:n}=si(t);let o=i.call(t,s);o||(s=ce(s),o=i.call(t,s));const l=n.call(t,s);return t.set(s,e),o?_t(e,l)&&at(t,"set",s,e):at(t,"add",s,e),this}function Un(s){const e=ce(this),{has:t,get:i}=si(e);let n=t.call(e,s);n||(s=ce(s),n=t.call(e,s)),i&&i.call(e,s);const o=e.delete(s);return n&&at(e,"delete",s,void 0),o}function Vn(){const s=ce(this),e=s.size!==0,t=s.clear();return e&&at(s,"clear",void 0,void 0),t}function ws(s,e){return function(i,n){const o=this,l=o.__v_raw,r=ce(l),a=e?an:s?dn:hs;return!s&&Ae(r,"iterate",Rt),l.forEach((c,u)=>i.call(n,a(c),a(u),o))}}function bs(s,e,t){return function(...i){const n=this.__v_raw,o=ce(n),l=Vt(o),r=s==="entries"||s===Symbol.iterator&&l,a=s==="keys"&&l,c=n[s](...i),u=t?an:e?dn:hs;return!e&&Ae(o,"iterate",a?Pi:Rt),{next(){const{value:d,done:y}=c.next();return y?{value:d,done:y}:{value:r?[u(d[0]),u(d[1])]:u(d),done:y}},[Symbol.iterator](){return this}}}}function dt(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function hr(){const s={get(o){return vs(this,o)},get size(){return xs(this)},has:_s,add:$n,set:Wn,delete:Un,clear:Vn,forEach:ws(!1,!1)},e={get(o){return vs(this,o,!1,!0)},get size(){return xs(this)},has:_s,add:$n,set:Wn,delete:Un,clear:Vn,forEach:ws(!1,!0)},t={get(o){return vs(this,o,!0)},get size(){return xs(this,!0)},has(o){return _s.call(this,o,!0)},add:dt("add"),set:dt("set"),delete:dt("delete"),clear:dt("clear"),forEach:ws(!0,!1)},i={get(o){return vs(this,o,!0,!0)},get size(){return xs(this,!0)},has(o){return _s.call(this,o,!0)},add:dt("add"),set:dt("set"),delete:dt("delete"),clear:dt("clear"),forEach:ws(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=bs(o,!1,!1),t[o]=bs(o,!0,!1),e[o]=bs(o,!1,!0),i[o]=bs(o,!0,!0)}),[s,t,e,i]}const[dr,fr,pr,mr]=hr();function cn(s,e){const t=e?s?mr:pr:s?fr:dr;return(i,n,o)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?i:Reflect.get(oe(t,n)&&n in i?t:i,n,o)}const gr={get:cn(!1,!1)},yr={get:cn(!1,!0)},vr={get:cn(!0,!1)};const Jo=new WeakMap,Zo=new WeakMap,el=new WeakMap,_r=new WeakMap;function xr(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wr(s){return s.__v_skip||!Object.isExtensible(s)?0:xr(Nl(s))}function un(s){return us(s)?s:hn(s,!1,ar,gr,Jo)}function br(s){return hn(s,!1,ur,yr,Zo)}function tl(s){return hn(s,!0,cr,vr,el)}function hn(s,e,t,i,n){if(!ye(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const o=n.get(s);if(o)return o;const l=wr(s);if(l===0)return s;const r=new Proxy(s,l===2?i:t);return n.set(s,r),r}function ns(s){return us(s)?ns(s.__v_raw):!!(s&&s.__v_isReactive)}function us(s){return!!(s&&s.__v_isReadonly)}function Os(s){return!!(s&&s.__v_isShallow)}function sl(s){return s?!!s.__v_raw:!1}function ce(s){const e=s&&s.__v_raw;return e?ce(e):s}function Cr(s){return Object.isExtensible(s)&&Vo(s,"__v_skip",!0),s}const hs=s=>ye(s)?un(s):s,dn=s=>ye(s)?tl(s):s;class il{constructor(e,t,i,n){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new on(()=>e(this._value),()=>Ss(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const e=ce(this);return(!e._cacheable||e.effect.dirty)&&_t(e._value,e._value=e.effect.run())&&Ss(e,5),nl(e),e.effect._dirtyLevel>=2&&Ss(e,3),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function kr(s,e,t=!1){let i,n;const o=Z(s);return o?(i=s,n=Fe):(i=s.get,n=s.set),new il(i,n,o||!n,t)}function nl(s){var e;yt&&Lt&&(s=ce(s),Go(Lt,(e=s.dep)!=null?e:s.dep=qo(()=>s.dep=void 0,s instanceof il?s:void 0)))}function Ss(s,e=5,t,i){s=ce(s);const n=s.dep;n&&Ko(n,e)}function De(s){return!!(s&&s.__v_isRef===!0)}function _(s){return Ir(s,!1)}function Ir(s,e){return De(s)?s:new Sr(s,e)}class Sr{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ce(e),this._value=t?e:hs(e)}get value(){return nl(this),this._value}set value(e){const t=this.__v_isShallow||Os(e)||us(e);e=t?e:ce(e),_t(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=t?e:hs(e),Ss(this,5))}}function Ue(s){return De(s)?s.value:s}const Lr={get:(s,e,t)=>Ue(Reflect.get(s,e,t)),set:(s,e,t,i)=>{const n=s[e];return De(n)&&!De(t)?(n.value=t,!0):Reflect.set(s,e,t,i)}};function ol(s){return ns(s)?s:new Proxy(s,Lr)}/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vt(s,e,t,i){try{return i?s(...i):s()}catch(n){ii(n,e,t)}}function Qe(s,e,t,i){if(Z(s)){const n=vt(s,e,t,i);return n&&Do(n)&&n.catch(o=>{ii(o,e,t)}),n}if(X(s)){const n=[];for(let o=0;o<s.length;o++)n.push(Qe(s[o],e,t,i));return n}}function ii(s,e,t,i=!0){const n=e?e.vnode:null;if(e){let o=e.parent;const l=e.proxy,r=`https://vuejs.org/error-reference/#runtime-${t}`;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](s,l,r)===!1)return}o=o.parent}const a=e.appContext.config.errorHandler;if(a){xt(),vt(a,null,10,[s,l,r]),wt();return}}Rr(s,t,n,i)}function Rr(s,e,t,i=!0){console.error(s)}let ds=!1,Mi=!1;const Pe=[];let tt=0;const zt=[];let ft=null,It=0;const ll=Promise.resolve();let fn=null;function Pr(s){const e=fn||ll;return s?e.then(this?s.bind(this):s):e}function Mr(s){let e=tt+1,t=Pe.length;for(;e<t;){const i=e+t>>>1,n=Pe[i],o=fs(n);o<s||o===s&&n.pre?e=i+1:t=i}return e}function pn(s){(!Pe.length||!Pe.includes(s,ds&&s.allowRecurse?tt+1:tt))&&(s.id==null?Pe.push(s):Pe.splice(Mr(s.id),0,s),rl())}function rl(){!ds&&!Mi&&(Mi=!0,fn=ll.then(cl))}function Er(s){const e=Pe.indexOf(s);e>tt&&Pe.splice(e,1)}function Br(s){X(s)?zt.push(...s):(!ft||!ft.includes(s,s.allowRecurse?It+1:It))&&zt.push(s),rl()}function zn(s,e,t=ds?tt+1:0){for(;t<Pe.length;t++){const i=Pe[t];if(i&&i.pre){if(s&&i.id!==s.uid)continue;Pe.splice(t,1),t--,i()}}}function al(s){if(zt.length){const e=[...new Set(zt)].sort((t,i)=>fs(t)-fs(i));if(zt.length=0,ft){ft.push(...e);return}for(ft=e,It=0;It<ft.length;It++){const t=ft[It];t.active!==!1&&t()}ft=null,It=0}}const fs=s=>s.id==null?1/0:s.id,Or=(s,e)=>{const t=fs(s)-fs(e);if(t===0){if(s.pre&&!e.pre)return-1;if(e.pre&&!s.pre)return 1}return t};function cl(s){Mi=!1,ds=!0,Pe.sort(Or);try{for(tt=0;tt<Pe.length;tt++){const e=Pe[tt];e&&e.active!==!1&&vt(e,null,14)}}finally{tt=0,Pe.length=0,al(),ds=!1,fn=null,(Pe.length||zt.length)&&cl()}}function Tr(s,e,...t){if(s.isUnmounted)return;const i=s.vnode.props||me;let n=t;const o=e.startsWith("update:"),l=o&&e.slice(7);if(l&&l in i){const u=`${l==="modelValue"?"model":l}Modifiers`,{number:d,trim:y}=i[u]||me;y&&(n=t.map(x=>_e(x)?x.trim():x)),d&&(n=t.map(Kl))}let r,a=i[r=di(e)]||i[r=di(Nt(e))];!a&&o&&(a=i[r=di(Kt(e))]),a&&Qe(a,s,6,n);const c=i[r+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[r])return;s.emitted[r]=!0,Qe(c,s,6,n)}}function ul(s,e,t=!1){const i=e.emitsCache,n=i.get(s);if(n!==void 0)return n;const o=s.emits;let l={},r=!1;if(!Z(s)){const a=c=>{const u=ul(c,e,!0);u&&(r=!0,Ce(l,u))};!t&&e.mixins.length&&e.mixins.forEach(a),s.extends&&a(s.extends),s.mixins&&s.mixins.forEach(a)}return!o&&!r?(ye(s)&&i.set(s,null),null):(X(o)?o.forEach(a=>l[a]=null):Ce(l,o),ye(s)&&i.set(s,l),l)}function ni(s,e){return!s||!Zs(e)?!1:(e=e.slice(2).replace(/Once$/,""),oe(s,e[0].toLowerCase()+e.slice(1))||oe(s,Kt(e))||oe(s,e))}let st=null,hl=null;function Ts(s){const e=st;return st=s,hl=s&&s.type.__scopeId||null,e}function Ar(s,e=st,t){if(!e||s._n)return s;const i=(...n)=>{i._d&&Jn(-1);const o=Ts(e);let l;try{l=s(...n)}finally{Ts(o),i._d&&Jn(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function mi(s){const{type:e,vnode:t,proxy:i,withProxy:n,propsOptions:[o],slots:l,attrs:r,emit:a,render:c,renderCache:u,props:d,data:y,setupState:x,ctx:M,inheritAttrs:I}=s,N=Ts(s);let O,U;try{if(t.shapeFlag&4){const $=n||i,V=$;O=et(c.call(V,$,u,d,x,y,M)),U=r}else{const $=e;O=et($.length>1?$(d,{attrs:r,slots:l,emit:a}):$(d,null)),U=e.props?r:Dr(r)}}catch($){rs.length=0,ii($,s,1),O=ue(ps)}let E=O;if(U&&I!==!1){const $=Object.keys(U),{shapeFlag:V}=E;$.length&&V&7&&(o&&$.some(tn)&&(U=$r(U,o)),E=Gt(E,U,!1,!0))}return t.dirs&&(E=Gt(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(t.dirs):t.dirs),t.transition&&(E.transition=t.transition),O=E,Ts(N),O}const Dr=s=>{let e;for(const t in s)(t==="class"||t==="style"||Zs(t))&&((e||(e={}))[t]=s[t]);return e},$r=(s,e)=>{const t={};for(const i in s)(!tn(i)||!(i.slice(9)in e))&&(t[i]=s[i]);return t};function Wr(s,e,t){const{props:i,children:n,component:o}=s,{props:l,children:r,patchFlag:a}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&a>=0){if(a&1024)return!0;if(a&16)return i?jn(i,l,c):!!l;if(a&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const y=u[d];if(l[y]!==i[y]&&!ni(c,y))return!0}}}else return(n||r)&&(!r||!r.$stable)?!0:i===l?!1:i?l?jn(i,l,c):!0:!!l;return!1}function jn(s,e,t){const i=Object.keys(e);if(i.length!==Object.keys(s).length)return!0;for(let n=0;n<i.length;n++){const o=i[n];if(e[o]!==s[o]&&!ni(t,o))return!0}return!1}function Ur({vnode:s,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===s&&(i.el=s.el),i===s)(s=e.vnode).el=t,e=e.parent;else break}}const Vr=Symbol.for("v-ndc"),zr=s=>s.__isSuspense;function jr(s,e){e&&e.pendingBranch?X(s)?e.effects.push(...s):e.effects.push(s):Br(s)}function oi(s,e,t=Oe,i=!1){if(t){const n=t[s]||(t[s]=[]),o=e.__weh||(e.__weh=(...l)=>{xt();const r=gs(t),a=Qe(e,t,s,l);return r(),wt(),a});return i?n.unshift(o):n.push(o),o}}const ut=s=>(e,t=Oe)=>{(!ri||s==="sp")&&oi(s,(...i)=>e(...i),t)},Hr=ut("bm"),le=ut("m"),Nr=ut("bu"),Fr=ut("u"),Gr=ut("bum"),nt=ut("um"),Kr=ut("sp"),qr=ut("rtg"),Xr=ut("rtc");function Yr(s,e=Oe){oi("ec",s,e)}function Ct(s,e,t,i){const n=s.dirs,o=e&&e.dirs;for(let l=0;l<n.length;l++){const r=n[l];o&&(r.oldValue=o[l].value);let a=r.dir[i];a&&(xt(),Qe(a,t,8,[s.el,r,s,e]),wt())}}function ge(s,e,t,i){let n;const o=t;if(X(s)||_e(s)){n=new Array(s.length);for(let l=0,r=s.length;l<r;l++)n[l]=e(s[l],l,void 0,o)}else if(typeof s=="number"){n=new Array(s);for(let l=0;l<s;l++)n[l]=e(l+1,l,void 0,o)}else if(ye(s))if(s[Symbol.iterator])n=Array.from(s,(l,r)=>e(l,r,void 0,o));else{const l=Object.keys(s);n=new Array(l.length);for(let r=0,a=l.length;r<a;r++){const c=l[r];n[r]=e(s[c],c,r,o)}}else n=[];return n}/*! #__NO_SIDE_EFFECTS__ */function re(s,e){return Z(s)?Ce({name:s.name},e,{setup:s}):s}const Ls=s=>!!s.type.__asyncLoader,Ei=s=>s?El(s)?vn(s):Ei(s.parent):null,os=Ce(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Ei(s.parent),$root:s=>Ei(s.root),$emit:s=>s.emit,$options:s=>mn(s),$forceUpdate:s=>s.f||(s.f=()=>{s.effect.dirty=!0,pn(s.update)}),$nextTick:s=>s.n||(s.n=Pr.bind(s.proxy)),$watch:s=>ya.bind(s)}),gi=(s,e)=>s!==me&&!s.__isScriptSetup&&oe(s,e),Qr={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:n,props:o,accessCache:l,type:r,appContext:a}=s;let c;if(e[0]!=="$"){const x=l[e];if(x!==void 0)switch(x){case 1:return i[e];case 2:return n[e];case 4:return t[e];case 3:return o[e]}else{if(gi(i,e))return l[e]=1,i[e];if(n!==me&&oe(n,e))return l[e]=2,n[e];if((c=s.propsOptions[0])&&oe(c,e))return l[e]=3,o[e];if(t!==me&&oe(t,e))return l[e]=4,t[e];Bi&&(l[e]=0)}}const u=os[e];let d,y;if(u)return e==="$attrs"&&Ae(s.attrs,"get",""),u(s);if((d=r.__cssModules)&&(d=d[e]))return d;if(t!==me&&oe(t,e))return l[e]=4,t[e];if(y=a.config.globalProperties,oe(y,e))return y[e]},set({_:s},e,t){const{data:i,setupState:n,ctx:o}=s;return gi(n,e)?(n[e]=t,!0):i!==me&&oe(i,e)?(i[e]=t,!0):oe(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(o[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:i,appContext:n,propsOptions:o}},l){let r;return!!t[l]||s!==me&&oe(s,l)||gi(e,l)||(r=o[0])&&oe(r,l)||oe(i,l)||oe(os,l)||oe(n.config.globalProperties,l)},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:oe(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function Hn(s){return X(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let Bi=!0;function Jr(s){const e=mn(s),t=s.proxy,i=s.ctx;Bi=!1,e.beforeCreate&&Nn(e.beforeCreate,s,"bc");const{data:n,computed:o,methods:l,watch:r,provide:a,inject:c,created:u,beforeMount:d,mounted:y,beforeUpdate:x,updated:M,activated:I,deactivated:N,beforeDestroy:O,beforeUnmount:U,destroyed:E,unmounted:$,render:V,renderTracked:T,renderTriggered:K,errorCaptured:S,serverPrefetch:j,expose:F,inheritAttrs:R,components:xe,directives:fe,filters:bt}=e;if(c&&Zr(c,i,null),l)for(const he in l){const ne=l[he];Z(ne)&&(i[he]=ne.bind(t))}if(n){const he=n.call(t,t);ye(he)&&(s.data=un(he))}if(Bi=!0,o)for(const he in o){const ne=o[he],ke=Z(ne)?ne.bind(t,t):Z(ne.get)?ne.get.bind(t,t):Fe,ot=!Z(ne)&&Z(ne.set)?ne.set.bind(t):Fe,Le=Aa({get:ke,set:ot});Object.defineProperty(i,he,{enumerable:!0,configurable:!0,get:()=>Le.value,set:ze=>Le.value=ze})}if(r)for(const he in r)dl(r[he],i,t,he);if(a){const he=Z(a)?a.call(t):a;Reflect.ownKeys(he).forEach(ne=>{oa(ne,he[ne])})}u&&Nn(u,s,"c");function ve(he,ne){X(ne)?ne.forEach(ke=>he(ke.bind(t))):ne&&he(ne.bind(t))}if(ve(Hr,d),ve(le,y),ve(Nr,x),ve(Fr,M),ve(va,I),ve(_a,N),ve(Yr,S),ve(Xr,T),ve(qr,K),ve(Gr,U),ve(nt,$),ve(Kr,j),X(F))if(F.length){const he=s.exposed||(s.exposed={});F.forEach(ne=>{Object.defineProperty(he,ne,{get:()=>t[ne],set:ke=>t[ne]=ke})})}else s.exposed||(s.exposed={});V&&s.render===Fe&&(s.render=V),R!=null&&(s.inheritAttrs=R),xe&&(s.components=xe),fe&&(s.directives=fe)}function Zr(s,e,t=Fe){X(s)&&(s=Oi(s));for(const i in s){const n=s[i];let o;ye(n)?"default"in n?o=Rs(n.from||i,n.default,!0):o=Rs(n.from||i):o=Rs(n),De(o)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:l=>o.value=l}):e[i]=o}}function Nn(s,e,t){Qe(X(s)?s.map(i=>i.bind(e.proxy)):s.bind(e.proxy),e,t)}function dl(s,e,t,i){const n=i.includes(".")?Il(t,i):()=>t[i];if(_e(s)){const o=e[s];Z(o)&&vi(n,o)}else if(Z(s))vi(n,s.bind(t));else if(ye(s))if(X(s))s.forEach(o=>dl(o,e,t,i));else{const o=Z(s.handler)?s.handler.bind(t):e[s.handler];Z(o)&&vi(n,o,s)}}function mn(s){const e=s.type,{mixins:t,extends:i}=e,{mixins:n,optionsCache:o,config:{optionMergeStrategies:l}}=s.appContext,r=o.get(e);let a;return r?a=r:!n.length&&!t&&!i?a=e:(a={},n.length&&n.forEach(c=>As(a,c,l,!0)),As(a,e,l)),ye(e)&&o.set(e,a),a}function As(s,e,t,i=!1){const{mixins:n,extends:o}=e;o&&As(s,o,t,!0),n&&n.forEach(l=>As(s,l,t,!0));for(const l in e)if(!(i&&l==="expose")){const r=ea[l]||t&&t[l];s[l]=r?r(s[l],e[l]):e[l]}return s}const ea={data:Fn,props:Gn,emits:Gn,methods:ts,computed:ts,beforeCreate:Ee,created:Ee,beforeMount:Ee,mounted:Ee,beforeUpdate:Ee,updated:Ee,beforeDestroy:Ee,beforeUnmount:Ee,destroyed:Ee,unmounted:Ee,activated:Ee,deactivated:Ee,errorCaptured:Ee,serverPrefetch:Ee,components:ts,directives:ts,watch:sa,provide:Fn,inject:ta};function Fn(s,e){return e?s?function(){return Ce(Z(s)?s.call(this,this):s,Z(e)?e.call(this,this):e)}:e:s}function ta(s,e){return ts(Oi(s),Oi(e))}function Oi(s){if(X(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function Ee(s,e){return s?[...new Set([].concat(s,e))]:e}function ts(s,e){return s?Ce(Object.create(null),s,e):e}function Gn(s,e){return s?X(s)&&X(e)?[...new Set([...s,...e])]:Ce(Object.create(null),Hn(s),Hn(e??{})):e}function sa(s,e){if(!s)return e;if(!e)return s;const t=Ce(Object.create(null),s);for(const i in e)t[i]=Ee(s[i],e[i]);return t}function fl(){return{app:null,config:{isNativeTag:jl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ia=0;function na(s,e){return function(i,n=null){Z(i)||(i=Ce({},i)),n!=null&&!ye(n)&&(n=null);const o=fl(),l=new WeakSet;let r=!1;const a=o.app={_uid:ia++,_component:i,_props:n,_container:null,_context:o,_instance:null,version:Da,get config(){return o.config},set config(c){},use(c,...u){return l.has(c)||(c&&Z(c.install)?(l.add(c),c.install(a,...u)):Z(c)&&(l.add(c),c(a,...u))),a},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),a},component(c,u){return u?(o.components[c]=u,a):o.components[c]},directive(c,u){return u?(o.directives[c]=u,a):o.directives[c]},mount(c,u,d){if(!r){const y=ue(i,n);return y.appContext=o,d===!0?d="svg":d===!1&&(d=void 0),u&&e?e(y,c):s(y,c,d),r=!0,a._container=c,c.__vue_app__=a,vn(y.component)}},unmount(){r&&(s(null,a._container),delete a._container.__vue_app__)},provide(c,u){return o.provides[c]=u,a},runWithContext(c){const u=ls;ls=a;try{return c()}finally{ls=u}}};return a}}let ls=null;function oa(s,e){if(Oe){let t=Oe.provides;const i=Oe.parent&&Oe.parent.provides;i===t&&(t=Oe.provides=Object.create(i)),t[s]=e}}function Rs(s,e,t=!1){const i=Oe||st;if(i||ls){const n=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:ls._context.provides;if(n&&s in n)return n[s];if(arguments.length>1)return t&&Z(e)?e.call(i&&i.proxy):e}}const pl={},ml=()=>Object.create(pl),gl=s=>Object.getPrototypeOf(s)===pl;function la(s,e,t,i=!1){const n={},o=ml();s.propsDefaults=Object.create(null),yl(s,e,n,o);for(const l in s.propsOptions[0])l in n||(n[l]=void 0);t?s.props=i?n:br(n):s.type.props?s.props=n:s.props=o,s.attrs=o}function ra(s,e,t,i){const{props:n,attrs:o,vnode:{patchFlag:l}}=s,r=ce(n),[a]=s.propsOptions;let c=!1;if((i||l>0)&&!(l&16)){if(l&8){const u=s.vnode.dynamicProps;for(let d=0;d<u.length;d++){let y=u[d];if(ni(s.emitsOptions,y))continue;const x=e[y];if(a)if(oe(o,y))x!==o[y]&&(o[y]=x,c=!0);else{const M=Nt(y);n[M]=Ti(a,r,M,x,s,!1)}else x!==o[y]&&(o[y]=x,c=!0)}}}else{yl(s,e,n,o)&&(c=!0);let u;for(const d in r)(!e||!oe(e,d)&&((u=Kt(d))===d||!oe(e,u)))&&(a?t&&(t[d]!==void 0||t[u]!==void 0)&&(n[d]=Ti(a,r,d,void 0,s,!0)):delete n[d]);if(o!==r)for(const d in o)(!e||!oe(e,d))&&(delete o[d],c=!0)}c&&at(s.attrs,"set","")}function yl(s,e,t,i){const[n,o]=s.propsOptions;let l=!1,r;if(e)for(let a in e){if(is(a))continue;const c=e[a];let u;n&&oe(n,u=Nt(a))?!o||!o.includes(u)?t[u]=c:(r||(r={}))[u]=c:ni(s.emitsOptions,a)||(!(a in i)||c!==i[a])&&(i[a]=c,l=!0)}if(o){const a=ce(t),c=r||me;for(let u=0;u<o.length;u++){const d=o[u];t[d]=Ti(n,a,d,c[d],s,!oe(c,d))}}return l}function Ti(s,e,t,i,n,o){const l=s[t];if(l!=null){const r=oe(l,"default");if(r&&i===void 0){const a=l.default;if(l.type!==Function&&!l.skipFactory&&Z(a)){const{propsDefaults:c}=n;if(t in c)i=c[t];else{const u=gs(n);i=c[t]=a.call(null,e),u()}}else i=a}l[0]&&(o&&!r?i=!1:l[1]&&(i===""||i===Kt(t))&&(i=!0))}return i}function vl(s,e,t=!1){const i=e.propsCache,n=i.get(s);if(n)return n;const o=s.props,l={},r=[];let a=!1;if(!Z(s)){const u=d=>{a=!0;const[y,x]=vl(d,e,!0);Ce(l,y),x&&r.push(...x)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!o&&!a)return ye(s)&&i.set(s,Ut),Ut;if(X(o))for(let u=0;u<o.length;u++){const d=Nt(o[u]);Kn(d)&&(l[d]=me)}else if(o)for(const u in o){const d=Nt(u);if(Kn(d)){const y=o[u],x=l[d]=X(y)||Z(y)?{type:y}:Ce({},y);if(x){const M=Yn(Boolean,x.type),I=Yn(String,x.type);x[0]=M>-1,x[1]=I<0||M<I,(M>-1||oe(x,"default"))&&r.push(d)}}}const c=[l,r];return ye(s)&&i.set(s,c),c}function Kn(s){return s[0]!=="$"&&!is(s)}function qn(s){return s===null?"null":typeof s=="function"?s.name||"":typeof s=="object"&&s.constructor&&s.constructor.name||""}function Xn(s,e){return qn(s)===qn(e)}function Yn(s,e){return X(e)?e.findIndex(t=>Xn(t,s)):Z(e)&&Xn(e,s)?0:-1}const _l=s=>s[0]==="_"||s==="$stable",gn=s=>X(s)?s.map(et):[et(s)],aa=(s,e,t)=>{if(e._n)return e;const i=Ar((...n)=>gn(e(...n)),t);return i._c=!1,i},xl=(s,e,t)=>{const i=s._ctx;for(const n in s){if(_l(n))continue;const o=s[n];if(Z(o))e[n]=aa(n,o,i);else if(o!=null){const l=gn(o);e[n]=()=>l}}},wl=(s,e)=>{const t=gn(e);s.slots.default=()=>t},ca=(s,e)=>{const t=s.slots=ml();if(s.vnode.shapeFlag&32){const i=e._;i?(Ce(t,e),Vo(t,"_",i,!0)):xl(e,t)}else e&&wl(s,e)},ua=(s,e,t)=>{const{vnode:i,slots:n}=s;let o=!0,l=me;if(i.shapeFlag&32){const r=e._;r?t&&r===1?o=!1:(Ce(n,e),!t&&r===1&&delete n._):(o=!e.$stable,xl(e,n)),l=e}else e&&(wl(s,e),l={default:1});if(o)for(const r in n)!_l(r)&&l[r]==null&&delete n[r]};function Ai(s,e,t,i,n=!1){if(X(s)){s.forEach((y,x)=>Ai(y,e&&(X(e)?e[x]:e),t,i,n));return}if(Ls(i)&&!n)return;const o=i.shapeFlag&4?vn(i.component):i.el,l=n?null:o,{i:r,r:a}=s,c=e&&e.r,u=r.refs===me?r.refs={}:r.refs,d=r.setupState;if(c!=null&&c!==a&&(_e(c)?(u[c]=null,oe(d,c)&&(d[c]=null)):De(c)&&(c.value=null)),Z(a))vt(a,r,12,[l,u]);else{const y=_e(a),x=De(a);if(y||x){const M=()=>{if(s.f){const I=y?oe(d,a)?d[a]:u[a]:a.value;n?X(I)&&sn(I,o):X(I)?I.includes(o)||I.push(o):y?(u[a]=[o],oe(d,a)&&(d[a]=u[a])):(a.value=[o],s.k&&(u[s.k]=a.value))}else y?(u[a]=l,oe(d,a)&&(d[a]=l)):x&&(a.value=l,s.k&&(u[s.k]=l))};l?(M.id=-1,Te(M,t)):M()}}}const Te=jr;function ha(s){return da(s)}function da(s,e){const t=zo();t.__VUE__=!0;const{insert:i,remove:n,patchProp:o,createElement:l,createText:r,createComment:a,setText:c,setElementText:u,parentNode:d,nextSibling:y,setScopeId:x=Fe,insertStaticContent:M}=s,I=(f,m,v,w=null,b=null,P=null,W=void 0,L=null,A=!!m.dynamicChildren)=>{if(f===m)return;f&&!Qt(f,m)&&(w=ht(f),ze(f,b,P,!0),f=null),m.patchFlag===-2&&(A=!1,m.dynamicChildren=null);const{type:C,ref:z,shapeFlag:q}=m;switch(C){case li:N(f,m,v,w);break;case ps:O(f,m,v,w);break;case _i:f==null&&U(m,v,w,W);break;case te:xe(f,m,v,w,b,P,W,L,A);break;default:q&1?V(f,m,v,w,b,P,W,L,A):q&6?fe(f,m,v,w,b,P,W,L,A):(q&64||q&128)&&C.process(f,m,v,w,b,P,W,L,A,Xt)}z!=null&&b&&Ai(z,f&&f.ref,P,m||f,!m)},N=(f,m,v,w)=>{if(f==null)i(m.el=r(m.children),v,w);else{const b=m.el=f.el;m.children!==f.children&&c(b,m.children)}},O=(f,m,v,w)=>{f==null?i(m.el=a(m.children||""),v,w):m.el=f.el},U=(f,m,v,w)=>{[f.el,f.anchor]=M(f.children,m,v,w,f.el,f.anchor)},E=({el:f,anchor:m},v,w)=>{let b;for(;f&&f!==m;)b=y(f),i(f,v,w),f=b;i(m,v,w)},$=({el:f,anchor:m})=>{let v;for(;f&&f!==m;)v=y(f),n(f),f=v;n(m)},V=(f,m,v,w,b,P,W,L,A)=>{m.type==="svg"?W="svg":m.type==="math"&&(W="mathml"),f==null?T(m,v,w,b,P,W,L,A):j(f,m,b,P,W,L,A)},T=(f,m,v,w,b,P,W,L)=>{let A,C;const{props:z,shapeFlag:q,transition:G,dirs:Y}=f;if(A=f.el=l(f.type,P,z&&z.is,z),q&8?u(A,f.children):q&16&&S(f.children,A,null,w,b,yi(f,P),W,L),Y&&Ct(f,null,w,"created"),K(A,f,f.scopeId,W,w),z){for(const pe in z)pe!=="value"&&!is(pe)&&o(A,pe,null,z[pe],P,f.children,w,b,Ke);"value"in z&&o(A,"value",null,z.value,P),(C=z.onVnodeBeforeMount)&&Ze(C,w,f)}Y&&Ct(f,null,w,"beforeMount");const se=fa(b,G);se&&G.beforeEnter(A),i(A,m,v),((C=z&&z.onVnodeMounted)||se||Y)&&Te(()=>{C&&Ze(C,w,f),se&&G.enter(A),Y&&Ct(f,null,w,"mounted")},b)},K=(f,m,v,w,b)=>{if(v&&x(f,v),w)for(let P=0;P<w.length;P++)x(f,w[P]);if(b){let P=b.subTree;if(m===P){const W=b.vnode;K(f,W,W.scopeId,W.slotScopeIds,b.parent)}}},S=(f,m,v,w,b,P,W,L,A=0)=>{for(let C=A;C<f.length;C++){const z=f[C]=L?pt(f[C]):et(f[C]);I(null,z,m,v,w,b,P,W,L)}},j=(f,m,v,w,b,P,W)=>{const L=m.el=f.el;let{patchFlag:A,dynamicChildren:C,dirs:z}=m;A|=f.patchFlag&16;const q=f.props||me,G=m.props||me;let Y;if(v&&kt(v,!1),(Y=G.onVnodeBeforeUpdate)&&Ze(Y,v,m,f),z&&Ct(m,f,v,"beforeUpdate"),v&&kt(v,!0),C?F(f.dynamicChildren,C,L,v,w,yi(m,b),P):W||ne(f,m,L,null,v,w,yi(m,b),P,!1),A>0){if(A&16)R(L,m,q,G,v,w,b);else if(A&2&&q.class!==G.class&&o(L,"class",null,G.class,b),A&4&&o(L,"style",q.style,G.style,b),A&8){const se=m.dynamicProps;for(let pe=0;pe<se.length;pe++){const ae=se[pe],we=q[ae],qe=G[ae];(qe!==we||ae==="value")&&o(L,ae,we,qe,b,f.children,v,w,Ke)}}A&1&&f.children!==m.children&&u(L,m.children)}else!W&&C==null&&R(L,m,q,G,v,w,b);((Y=G.onVnodeUpdated)||z)&&Te(()=>{Y&&Ze(Y,v,m,f),z&&Ct(m,f,v,"updated")},w)},F=(f,m,v,w,b,P,W)=>{for(let L=0;L<m.length;L++){const A=f[L],C=m[L],z=A.el&&(A.type===te||!Qt(A,C)||A.shapeFlag&70)?d(A.el):v;I(A,C,z,null,w,b,P,W,!0)}},R=(f,m,v,w,b,P,W)=>{if(v!==w){if(v!==me)for(const L in v)!is(L)&&!(L in w)&&o(f,L,v[L],null,W,m.children,b,P,Ke);for(const L in w){if(is(L))continue;const A=w[L],C=v[L];A!==C&&L!=="value"&&o(f,L,C,A,W,m.children,b,P,Ke)}"value"in w&&o(f,"value",v.value,w.value,W)}},xe=(f,m,v,w,b,P,W,L,A)=>{const C=m.el=f?f.el:r(""),z=m.anchor=f?f.anchor:r("");let{patchFlag:q,dynamicChildren:G,slotScopeIds:Y}=m;Y&&(L=L?L.concat(Y):Y),f==null?(i(C,v,w),i(z,v,w),S(m.children||[],v,z,b,P,W,L,A)):q>0&&q&64&&G&&f.dynamicChildren?(F(f.dynamicChildren,G,v,b,P,W,L),(m.key!=null||b&&m===b.subTree)&&bl(f,m,!0)):ne(f,m,v,z,b,P,W,L,A)},fe=(f,m,v,w,b,P,W,L,A)=>{m.slotScopeIds=L,f==null?m.shapeFlag&512?b.ctx.activate(m,v,w,W,A):bt(m,v,w,b,P,W,A):At(f,m,A)},bt=(f,m,v,w,b,P,W)=>{const L=f.component=Pa(f,w,b);if(Sl(f)&&(L.ctx.renderer=Xt),Ma(L),L.asyncDep){if(b&&b.registerDep(L,ve,W),!f.el){const A=L.subTree=ue(ps);O(null,A,m,v)}}else ve(L,f,m,v,b,P,W)},At=(f,m,v)=>{const w=m.component=f.component;if(Wr(f,m,v))if(w.asyncDep&&!w.asyncResolved){he(w,m,v);return}else w.next=m,Er(w.update),w.effect.dirty=!0,w.update();else m.el=f.el,w.vnode=m},ve=(f,m,v,w,b,P,W)=>{const L=()=>{if(f.isMounted){let{next:z,bu:q,u:G,parent:Y,vnode:se}=f;{const Dt=Cl(f);if(Dt){z&&(z.el=se.el,he(f,z,W)),Dt.asyncDep.then(()=>{f.isUnmounted||L()});return}}let pe=z,ae;kt(f,!1),z?(z.el=se.el,he(f,z,W)):z=se,q&&fi(q),(ae=z.props&&z.props.onVnodeBeforeUpdate)&&Ze(ae,Y,z,se),kt(f,!0);const we=mi(f),qe=f.subTree;f.subTree=we,I(qe,we,d(qe.el),ht(qe),f,b,P),z.el=we.el,pe===null&&Ur(f,we.el),G&&Te(G,b),(ae=z.props&&z.props.onVnodeUpdated)&&Te(()=>Ze(ae,Y,z,se),b)}else{let z;const{el:q,props:G}=m,{bm:Y,m:se,parent:pe}=f,ae=Ls(m);if(kt(f,!1),Y&&fi(Y),!ae&&(z=G&&G.onVnodeBeforeMount)&&Ze(z,pe,m),kt(f,!0),q&&Pn){const we=()=>{f.subTree=mi(f),Pn(q,f.subTree,f,b,null)};ae?m.type.__asyncLoader().then(()=>!f.isUnmounted&&we()):we()}else{const we=f.subTree=mi(f);I(null,we,v,w,f,b,P),m.el=we.el}if(se&&Te(se,b),!ae&&(z=G&&G.onVnodeMounted)){const we=m;Te(()=>Ze(z,pe,we),b)}(m.shapeFlag&256||pe&&Ls(pe.vnode)&&pe.vnode.shapeFlag&256)&&f.a&&Te(f.a,b),f.isMounted=!0,m=v=w=null}},A=f.effect=new on(L,Fe,()=>pn(C),f.scope),C=f.update=()=>{A.dirty&&A.run()};C.id=f.uid,kt(f,!0),C()},he=(f,m,v)=>{m.component=f;const w=f.vnode.props;f.vnode=m,f.next=null,ra(f,m.props,w,v),ua(f,m.children,v),xt(),zn(f),wt()},ne=(f,m,v,w,b,P,W,L,A=!1)=>{const C=f&&f.children,z=f?f.shapeFlag:0,q=m.children,{patchFlag:G,shapeFlag:Y}=m;if(G>0){if(G&128){ot(C,q,v,w,b,P,W,L,A);return}else if(G&256){ke(C,q,v,w,b,P,W,L,A);return}}Y&8?(z&16&&Ke(C,b,P),q!==C&&u(v,q)):z&16?Y&16?ot(C,q,v,w,b,P,W,L,A):Ke(C,b,P,!0):(z&8&&u(v,""),Y&16&&S(q,v,w,b,P,W,L,A))},ke=(f,m,v,w,b,P,W,L,A)=>{f=f||Ut,m=m||Ut;const C=f.length,z=m.length,q=Math.min(C,z);let G;for(G=0;G<q;G++){const Y=m[G]=A?pt(m[G]):et(m[G]);I(f[G],Y,v,null,b,P,W,L,A)}C>z?Ke(f,b,P,!0,!1,q):S(m,v,w,b,P,W,L,A,q)},ot=(f,m,v,w,b,P,W,L,A)=>{let C=0;const z=m.length;let q=f.length-1,G=z-1;for(;C<=q&&C<=G;){const Y=f[C],se=m[C]=A?pt(m[C]):et(m[C]);if(Qt(Y,se))I(Y,se,v,null,b,P,W,L,A);else break;C++}for(;C<=q&&C<=G;){const Y=f[q],se=m[G]=A?pt(m[G]):et(m[G]);if(Qt(Y,se))I(Y,se,v,null,b,P,W,L,A);else break;q--,G--}if(C>q){if(C<=G){const Y=G+1,se=Y<z?m[Y].el:w;for(;C<=G;)I(null,m[C]=A?pt(m[C]):et(m[C]),v,se,b,P,W,L,A),C++}}else if(C>G)for(;C<=q;)ze(f[C],b,P,!0),C++;else{const Y=C,se=C,pe=new Map;for(C=se;C<=G;C++){const $e=m[C]=A?pt(m[C]):et(m[C]);$e.key!=null&&pe.set($e.key,C)}let ae,we=0;const qe=G-se+1;let Dt=!1,Mn=0;const Yt=new Array(qe);for(C=0;C<qe;C++)Yt[C]=0;for(C=Y;C<=q;C++){const $e=f[C];if(we>=qe){ze($e,b,P,!0);continue}let Je;if($e.key!=null)Je=pe.get($e.key);else for(ae=se;ae<=G;ae++)if(Yt[ae-se]===0&&Qt($e,m[ae])){Je=ae;break}Je===void 0?ze($e,b,P,!0):(Yt[Je-se]=C+1,Je>=Mn?Mn=Je:Dt=!0,I($e,m[Je],v,null,b,P,W,L,A),we++)}const En=Dt?pa(Yt):Ut;for(ae=En.length-1,C=qe-1;C>=0;C--){const $e=se+C,Je=m[$e],Bn=$e+1<z?m[$e+1].el:w;Yt[C]===0?I(null,Je,v,Bn,b,P,W,L,A):Dt&&(ae<0||C!==En[ae]?Le(Je,v,Bn,2):ae--)}}},Le=(f,m,v,w,b=null)=>{const{el:P,type:W,transition:L,children:A,shapeFlag:C}=f;if(C&6){Le(f.component.subTree,m,v,w);return}if(C&128){f.suspense.move(m,v,w);return}if(C&64){W.move(f,m,v,Xt);return}if(W===te){i(P,m,v);for(let q=0;q<A.length;q++)Le(A[q],m,v,w);i(f.anchor,m,v);return}if(W===_i){E(f,m,v);return}if(w!==2&&C&1&&L)if(w===0)L.beforeEnter(P),i(P,m,v),Te(()=>L.enter(P),b);else{const{leave:q,delayLeave:G,afterLeave:Y}=L,se=()=>i(P,m,v),pe=()=>{q(P,()=>{se(),Y&&Y()})};G?G(P,se,pe):pe()}else i(P,m,v)},ze=(f,m,v,w=!1,b=!1)=>{const{type:P,props:W,ref:L,children:A,dynamicChildren:C,shapeFlag:z,patchFlag:q,dirs:G,memoIndex:Y}=f;if(L!=null&&Ai(L,null,v,f,!0),Y!=null&&(m.renderCache[Y]=void 0),z&256){m.ctx.deactivate(f);return}const se=z&1&&G,pe=!Ls(f);let ae;if(pe&&(ae=W&&W.onVnodeBeforeUnmount)&&Ze(ae,m,f),z&6)ui(f.component,v,w);else{if(z&128){f.suspense.unmount(v,w);return}se&&Ct(f,null,m,"beforeUnmount"),z&64?f.type.remove(f,m,v,b,Xt,w):C&&(P!==te||q>0&&q&64)?Ke(C,m,v,!1,!0):(P===te&&q&384||!b&&z&16)&&Ke(A,m,v),w&&Ge(f)}(pe&&(ae=W&&W.onVnodeUnmounted)||se)&&Te(()=>{ae&&Ze(ae,m,f),se&&Ct(f,null,m,"unmounted")},v)},Ge=f=>{const{type:m,el:v,anchor:w,transition:b}=f;if(m===te){ys(v,w);return}if(m===_i){$(f);return}const P=()=>{n(v),b&&!b.persisted&&b.afterLeave&&b.afterLeave()};if(f.shapeFlag&1&&b&&!b.persisted){const{leave:W,delayLeave:L}=b,A=()=>W(v,P);L?L(f.el,P,A):A()}else P()},ys=(f,m)=>{let v;for(;f!==m;)v=y(f),n(f),f=v;n(m)},ui=(f,m,v)=>{const{bum:w,scope:b,update:P,subTree:W,um:L,m:A,a:C}=f;Qn(A),Qn(C),w&&fi(w),b.stop(),P&&(P.active=!1,ze(W,f,m,v)),L&&Te(L,m),Te(()=>{f.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},Ke=(f,m,v,w=!1,b=!1,P=0)=>{for(let W=P;W<f.length;W++)ze(f[W],m,v,w,b)},ht=f=>f.shapeFlag&6?ht(f.component.subTree):f.shapeFlag&128?f.suspense.next():y(f.anchor||f.el);let hi=!1;const Ln=(f,m,v)=>{f==null?m._vnode&&ze(m._vnode,null,null,!0):I(m._vnode||null,f,m,null,null,null,v),hi||(hi=!0,zn(),al(),hi=!1),m._vnode=f},Xt={p:I,um:ze,m:Le,r:Ge,mt:bt,mc:S,pc:ne,pbc:F,n:ht,o:s};let Rn,Pn;return{render:Ln,hydrate:Rn,createApp:na(Ln,Rn)}}function yi({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function kt({effect:s,update:e},t){s.allowRecurse=e.allowRecurse=t}function fa(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function bl(s,e,t=!1){const i=s.children,n=e.children;if(X(i)&&X(n))for(let o=0;o<i.length;o++){const l=i[o];let r=n[o];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=n[o]=pt(n[o]),r.el=l.el),!t&&r.patchFlag!==-2&&bl(l,r)),r.type===li&&(r.el=l.el)}}function pa(s){const e=s.slice(),t=[0];let i,n,o,l,r;const a=s.length;for(i=0;i<a;i++){const c=s[i];if(c!==0){if(n=t[t.length-1],s[n]<c){e[i]=n,t.push(i);continue}for(o=0,l=t.length-1;o<l;)r=o+l>>1,s[t[r]]<c?o=r+1:l=r;c<s[t[o]]&&(o>0&&(e[i]=t[o-1]),t[o]=i)}}for(o=t.length,l=t[o-1];o-- >0;)t[o]=l,l=e[l];return t}function Cl(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Cl(e)}function Qn(s){if(s)for(let e=0;e<s.length;e++)s[e].active=!1}const ma=Symbol.for("v-scx"),ga=()=>Rs(ma),Cs={};function vi(s,e,t){return kl(s,e,t)}function kl(s,e,{immediate:t,deep:i,flush:n,once:o,onTrack:l,onTrigger:r}=me){if(e&&o){const T=e;e=(...K)=>{T(...K),V()}}const a=Oe,c=T=>i===!0?T:St(T,i===!1?1:void 0);let u,d=!1,y=!1;if(De(s)?(u=()=>s.value,d=Os(s)):ns(s)?(u=()=>c(s),d=!0):X(s)?(y=!0,d=s.some(T=>ns(T)||Os(T)),u=()=>s.map(T=>{if(De(T))return T.value;if(ns(T))return c(T);if(Z(T))return vt(T,a,2)})):Z(s)?e?u=()=>vt(s,a,2):u=()=>(x&&x(),Qe(s,a,3,[M])):u=Fe,e&&i){const T=u;u=()=>St(T())}let x,M=T=>{x=E.onStop=()=>{vt(T,a,4),x=E.onStop=void 0}},I;if(ri)if(M=Fe,e?t&&Qe(e,a,3,[u(),y?[]:void 0,M]):u(),n==="sync"){const T=ga();I=T.__watcherHandles||(T.__watcherHandles=[])}else return Fe;let N=y?new Array(s.length).fill(Cs):Cs;const O=()=>{if(!(!E.active||!E.dirty))if(e){const T=E.run();(i||d||(y?T.some((K,S)=>_t(K,N[S])):_t(T,N)))&&(x&&x(),Qe(e,a,3,[T,N===Cs?void 0:y&&N[0]===Cs?[]:N,M]),N=T)}else E.run()};O.allowRecurse=!!e;let U;n==="sync"?U=O:n==="post"?U=()=>Te(O,a&&a.suspense):(O.pre=!0,a&&(O.id=a.uid),U=()=>pn(O));const E=new on(u,Fe,U),$=sr(),V=()=>{E.stop(),$&&sn($.effects,E)};return e?t?O():N=E.run():n==="post"?Te(E.run.bind(E),a&&a.suspense):E.run(),I&&I.push(V),V}function ya(s,e,t){const i=this.proxy,n=_e(s)?s.includes(".")?Il(i,s):()=>i[s]:s.bind(i,i);let o;Z(e)?o=e:(o=e.handler,t=e);const l=gs(this),r=kl(n,o.bind(i),t);return l(),r}function Il(s,e){const t=e.split(".");return()=>{let i=s;for(let n=0;n<t.length&&i;n++)i=i[t[n]];return i}}function St(s,e=1/0,t){if(e<=0||!ye(s)||s.__v_skip||(t=t||new Set,t.has(s)))return s;if(t.add(s),e--,De(s))St(s.value,e,t);else if(X(s))for(let i=0;i<s.length;i++)St(s[i],e,t);else if(Ao(s)||Vt(s))s.forEach(i=>{St(i,e,t)});else if(Wo(s)){for(const i in s)St(s[i],e,t);for(const i of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,i)&&St(s[i],e,t)}return s}const Sl=s=>s.type.__isKeepAlive;function va(s,e){Ll(s,"a",e)}function _a(s,e){Ll(s,"da",e)}function Ll(s,e,t=Oe){const i=s.__wdc||(s.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(oi(e,i,t),t){let n=t.parent;for(;n&&n.parent;)Sl(n.parent.vnode)&&xa(i,e,t,n),n=n.parent}}function xa(s,e,t,i){const n=oi(e,s,i,!0);nt(()=>{sn(i[e],n)},t)}function Rl(s,e){s.shapeFlag&6&&s.component?Rl(s.component.subTree,e):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}const wa=s=>s.__isTeleport,te=Symbol.for("v-fgt"),li=Symbol.for("v-txt"),ps=Symbol.for("v-cmt"),_i=Symbol.for("v-stc"),rs=[];let Ye=null;function D(s=!1){rs.push(Ye=s?null:[])}function ba(){rs.pop(),Ye=rs[rs.length-1]||null}let ms=1;function Jn(s){ms+=s}function Pl(s){return s.dynamicChildren=ms>0?Ye||Ut:null,ba(),ms>0&&Ye&&Ye.push(s),s}function H(s,e,t,i,n,o){return Pl(k(s,e,t,i,n,o,!0))}function Be(s,e,t,i,n){return Pl(ue(s,e,t,i,n,!0))}function Ca(s){return s?s.__v_isVNode===!0:!1}function Qt(s,e){return s.type===e.type&&s.key===e.key}const Ml=({key:s})=>s??null,Ps=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?_e(s)||De(s)||Z(s)?{i:st,r:s,k:e,f:!!t}:s:null);function k(s,e=null,t=null,i=0,n=null,o=s===te?0:1,l=!1,r=!1){const a={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&Ml(e),ref:e&&Ps(e),scopeId:hl,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:st};return r?(yn(a,t),o&128&&s.normalize(a)):t&&(a.shapeFlag|=_e(t)?8:16),ms>0&&!l&&Ye&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&Ye.push(a),a}const ue=ka;function ka(s,e=null,t=null,i=0,n=null,o=!1){if((!s||s===Vr)&&(s=ps),Ca(s)){const r=Gt(s,e,!0);return t&&yn(r,t),ms>0&&!o&&Ye&&(r.shapeFlag&6?Ye[Ye.indexOf(s)]=r:Ye.push(r)),r.patchFlag=-2,r}if(Ta(s)&&(s=s.__vccOpts),e){e=Ia(e);let{class:r,style:a}=e;r&&!_e(r)&&(e.class=cs(r)),ye(a)&&(sl(a)&&!X(a)&&(a=Ce({},a)),e.style=de(a))}const l=_e(s)?1:zr(s)?128:wa(s)?64:ye(s)?4:Z(s)?2:0;return k(s,e,t,i,n,l,o,!0)}function Ia(s){return s?sl(s)||gl(s)?Ce({},s):s:null}function Gt(s,e,t=!1,i=!1){const{props:n,ref:o,patchFlag:l,children:r,transition:a}=s,c=e?Sa(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&Ml(c),ref:e&&e.ref?t&&o?X(o)?o.concat(Ps(e)):[o,Ps(e)]:Ps(e):o,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:r,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==te?l===-1?16:l|16:l,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:a,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Gt(s.ssContent),ssFallback:s.ssFallback&&Gt(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return a&&i&&Rl(u,a.clone(u)),u}function Di(s=" ",e=0){return ue(li,null,s,e)}function et(s){return s==null||typeof s=="boolean"?ue(ps):X(s)?ue(te,null,s.slice()):typeof s=="object"?pt(s):ue(li,null,String(s))}function pt(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Gt(s)}function yn(s,e){let t=0;const{shapeFlag:i}=s;if(e==null)e=null;else if(X(e))t=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),yn(s,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!gl(e)?e._ctx=st:n===3&&st&&(st.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else Z(e)?(e={default:e,_ctx:st},t=32):(e=String(e),i&64?(t=16,e=[Di(e)]):t=8);s.children=e,s.shapeFlag|=t}function Sa(...s){const e={};for(let t=0;t<s.length;t++){const i=s[t];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=cs([e.class,i.class]));else if(n==="style")e.style=de([e.style,i.style]);else if(Zs(n)){const o=e[n],l=i[n];l&&o!==l&&!(X(o)&&o.includes(l))&&(e[n]=o?[].concat(o,l):l)}else n!==""&&(e[n]=i[n])}return e}function Ze(s,e,t,i=null){Qe(s,e,7,[t,i])}const La=fl();let Ra=0;function Pa(s,e,t){const i=s.type,n=(e?e.appContext:s.appContext)||La,o={uid:Ra++,vnode:s,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new er(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vl(i,n),emitsOptions:ul(i,n),emit:null,emitted:null,propsDefaults:me,inheritAttrs:i.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Tr.bind(null,o),s.ce&&s.ce(o),o}let Oe=null,Ds,$i;{const s=zo(),e=(t,i)=>{let n;return(n=s[t])||(n=s[t]=[]),n.push(i),o=>{n.length>1?n.forEach(l=>l(o)):n[0](o)}};Ds=e("__VUE_INSTANCE_SETTERS__",t=>Oe=t),$i=e("__VUE_SSR_SETTERS__",t=>ri=t)}const gs=s=>{const e=Oe;return Ds(s),s.scope.on(),()=>{s.scope.off(),Ds(e)}},Zn=()=>{Oe&&Oe.scope.off(),Ds(null)};function El(s){return s.vnode.shapeFlag&4}let ri=!1;function Ma(s,e=!1){e&&$i(e);const{props:t,children:i}=s.vnode,n=El(s);la(s,t,n,e),ca(s,i);const o=n?Ea(s,e):void 0;return e&&$i(!1),o}function Ea(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Qr);const{setup:i}=t;if(i){const n=s.setupContext=i.length>1?Oa(s):null,o=gs(s);xt();const l=vt(i,s,0,[s.props,n]);if(wt(),o(),Do(l)){if(l.then(Zn,Zn),e)return l.then(r=>{eo(s,r,e)}).catch(r=>{ii(r,s,0)});s.asyncDep=l}else eo(s,l,e)}else Bl(s,e)}function eo(s,e,t){Z(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:ye(e)&&(s.setupState=ol(e)),Bl(s,t)}let to;function Bl(s,e,t){const i=s.type;if(!s.render){if(!e&&to&&!i.render){const n=i.template||mn(s).template;if(n){const{isCustomElement:o,compilerOptions:l}=s.appContext.config,{delimiters:r,compilerOptions:a}=i,c=Ce(Ce({isCustomElement:o,delimiters:r},l),a);i.render=to(n,c)}}s.render=i.render||Fe}{const n=gs(s);xt();try{Jr(s)}finally{wt(),n()}}}const Ba={get(s,e){return Ae(s,"get",""),s[e]}};function Oa(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,Ba),slots:s.slots,emit:s.emit,expose:e}}function vn(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(ol(Cr(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in os)return os[t](s)},has(e,t){return t in e||t in os}})):s.proxy}function Ta(s){return Z(s)&&"__vccOpts"in s}const Aa=(s,e)=>kr(s,e,ri),Da="3.4.29";/**
* @vue/runtime-dom v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const $a="http://www.w3.org/2000/svg",Wa="http://www.w3.org/1998/Math/MathML",lt=typeof document<"u"?document:null,so=lt&&lt.createElement("template"),Ua={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,i)=>{const n=e==="svg"?lt.createElementNS($a,s):e==="mathml"?lt.createElementNS(Wa,s):t?lt.createElement(s,{is:t}):lt.createElement(s);return s==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:s=>lt.createTextNode(s),createComment:s=>lt.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>lt.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,i,n,o){const l=t?t.previousSibling:e.lastChild;if(n&&(n===o||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),t),!(n===o||!(n=n.nextSibling)););else{so.innerHTML=i==="svg"?`<svg>${s}</svg>`:i==="mathml"?`<math>${s}</math>`:s;const r=so.content;if(i==="svg"||i==="mathml"){const a=r.firstChild;for(;a.firstChild;)r.appendChild(a.firstChild);r.removeChild(a)}e.insertBefore(r,t)}return[l?l.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Va=Symbol("_vtc");function za(s,e,t){const i=s[Va];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const io=Symbol("_vod"),ja=Symbol("_vsh"),Ha=Symbol(""),Na=/(^|;)\s*display\s*:/;function Fa(s,e,t){const i=s.style,n=_e(t);let o=!1;if(t&&!n){if(e)if(_e(e))for(const l of e.split(";")){const r=l.slice(0,l.indexOf(":")).trim();t[r]==null&&Ms(i,r,"")}else for(const l in e)t[l]==null&&Ms(i,l,"");for(const l in t)l==="display"&&(o=!0),Ms(i,l,t[l])}else if(n){if(e!==t){const l=i[Ha];l&&(t+=";"+l),i.cssText=t,o=Na.test(t)}}else e&&s.removeAttribute("style");io in s&&(s[io]=o?i.display:"",s[ja]&&(i.display="none"))}const no=/\s*!important$/;function Ms(s,e,t){if(X(t))t.forEach(i=>Ms(s,e,i));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const i=Ga(s,e);no.test(t)?s.setProperty(Kt(i),t.replace(no,""),"important"):s[i]=t}}const oo=["Webkit","Moz","ms"],xi={};function Ga(s,e){const t=xi[e];if(t)return t;let i=Nt(e);if(i!=="filter"&&i in s)return xi[e]=i;i=Uo(i);for(let n=0;n<oo.length;n++){const o=oo[n]+i;if(o in s)return xi[e]=o}return e}const lo="http://www.w3.org/1999/xlink";function ro(s,e,t,i,n,o=Zl(e)){i&&e.startsWith("xlink:")?t==null?s.removeAttributeNS(lo,e.slice(6,e.length)):s.setAttributeNS(lo,e,t):t==null||o&&!jo(t)?s.removeAttribute(e):s.setAttribute(e,o?"":String(t))}function Ka(s,e,t,i,n,o,l){if(e==="innerHTML"||e==="textContent"){i&&l(i,n,o),s[e]=t??"";return}const r=s.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const c=r==="OPTION"?s.getAttribute("value")||"":s.value,u=t==null?"":String(t);(c!==u||!("_value"in s))&&(s.value=u),t==null&&s.removeAttribute(e),s._value=t;return}let a=!1;if(t===""||t==null){const c=typeof s[e];c==="boolean"?t=jo(t):t==null&&c==="string"?(t="",a=!0):c==="number"&&(t=0,a=!0)}try{s[e]=t}catch{}a&&s.removeAttribute(e)}function qa(s,e,t,i){s.addEventListener(e,t,i)}function Xa(s,e,t,i){s.removeEventListener(e,t,i)}const ao=Symbol("_vei");function Ya(s,e,t,i,n=null){const o=s[ao]||(s[ao]={}),l=o[e];if(i&&l)l.value=i;else{const[r,a]=Qa(e);if(i){const c=o[e]=ec(i,n);qa(s,r,c,a)}else l&&(Xa(s,r,l,a),o[e]=void 0)}}const co=/(?:Once|Passive|Capture)$/;function Qa(s){let e;if(co.test(s)){e={};let i;for(;i=s.match(co);)s=s.slice(0,s.length-i[0].length),e[i[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):Kt(s.slice(2)),e]}let wi=0;const Ja=Promise.resolve(),Za=()=>wi||(Ja.then(()=>wi=0),wi=Date.now());function ec(s,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Qe(tc(i,t.value),e,5,[i])};return t.value=s,t.attached=Za(),t}function tc(s,e){if(X(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const uo=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,sc=(s,e,t,i,n,o,l,r,a)=>{const c=n==="svg";e==="class"?za(s,i,c):e==="style"?Fa(s,t,i):Zs(e)?tn(e)||Ya(s,e,t,i,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ic(s,e,i,c))?(Ka(s,e,i,o,l,r,a),(e==="value"||e==="checked"||e==="selected")&&ro(s,e,i,c,l,e!=="value")):(e==="true-value"?s._trueValue=i:e==="false-value"&&(s._falseValue=i),ro(s,e,i,c))};function ic(s,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in s&&uo(e)&&Z(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=s.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return uo(e)&&_e(t)?!1:e in s}const nc=["ctrl","shift","alt","meta"],oc={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>nc.some(t=>s[`${t}Key`]&&!e.includes(t))},rt=(s,e)=>{const t=s._withMods||(s._withMods={}),i=e.join(".");return t[i]||(t[i]=(n,...o)=>{for(let l=0;l<e.length;l++){const r=oc[e[l]];if(r&&r(n,e))return}return s(n,...o)})},lc=Ce({patchProp:sc},Ua);let ho;function rc(){return ho||(ho=ha(lc))}const ac=(...s)=>{const e=rc().createApp(...s),{mount:t}=e;return e.mount=i=>{const n=uc(i);if(!n)return;const o=e._component;!Z(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.innerHTML="";const l=t(n,!1,cc(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),l},e};function cc(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function uc(s){return _e(s)?document.querySelector(s):s}const hc={width:1493,height:640},jt={width:1136,height:640},Wi=hc,dc=jt.width/jt.height,fo=Wi.width/Wi.height;var Es=(s=>(s.normal="normal",s.outMax="outMax",s.outMin="outMin",s))(Es||{});class fc{constructor(){h(this,"agentData")}isIOSChrome(){return this.agentData.brands.some(e=>e.brand.match(/CriOS/gi))}matchPlatform(e){return!!this.agentData.platform.match(`${e}`)}isIOS(){return this.matchPlatform("iPhone")}isAndroid(){return this.matchPlatform("Android")}isIPAD(){return this.matchPlatform("iPad")}isMobile(){return this.agentData.mobile}appVersion(){return this.agentData?this.agentData.uaFullVersion:"0"}isWebView(){let e=["WebView","(iPhone|iPod|iPad)(?!.*Safari/)","Android.*(wv)"],t=new RegExp(`(${e.join("|")})`,"ig");return this.agentData.brands.some(n=>n.brand.match(t))}iOSVersion(){return this.isIOS()?parseFloat(this.agentData.platformVersion):0}}class pc{isMobile(){const{width:e,height:t}=window.screen,i=Math.min(e,t);return this.isIPAD()?!0:i<=600&&(/Android|webOS|BlackBerry/i.test(navigator.userAgent)||this.isIOS())}isIOSChrome(){return navigator.userAgent.indexOf("CriOS")!==-1}appVersion(){return navigator.userAgent}isWebView(){let e=navigator.userAgent,t=["WebView","(iPhone|iPod|iPad)(?!.*Safari/)","Android.*(wv)"],i=new RegExp(`(${t.join("|")})`,"ig");return!!e.match(i)}isIOS(){return/iPhone|iPod/i.test(navigator.userAgent)||this.isIPAD()}isIPAD(){let t=/MacIntel/.test(navigator.platform)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;return/iPad/i.test(navigator.userAgent)||!!t}isAndroid(){return/Android/i.test(navigator.userAgent)}iOSVersion(){return this.isIOS()&&parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||0}}const Us=class Us{constructor(){h(this,"_isMobile");h(this,"_isWebView");h(this,"_appVersion");h(this,"_isiOSChrome");h(this,"_iOSVersion");h(this,"_isIPAD");h(this,"_isIOS");h(this,"_isAndroid");h(this,"_count",0);h(this,"_userAgentData",new fc);h(this,"_userAgent",new pc);h(this,"_asynDone",!1)}static getInstance(){return this.instance===null&&(this.instance=new Us),this.instance}get userAgent(){return this._userAgent}get userAgentData(){return this._userAgentData}count(){return this._count}addCount(){this._count++}clearCount(){this._count=0}init(){if(!navigator.userAgentData||!navigator.userAgentData.getHighEntropyValues){console.warn("not suppor userAgentData ");return}let e=["brands","mobile","model","platform","platformVersion"],t=!0;navigator.userAgentData.getHighEntropyValues(e).then(i=>{e.forEach(n=>{i[n]===void 0&&(t=!1)}),(!i.brands||typeof i.brands!="object")&&(t=!1),this._userAgentData.agentData=i,t?this._asynDone=!0:console.warn("chrome api lost value ")}).catch(i=>{console.warn(i)})}getAgentDataInfo(){let e=this._userAgentData.agentData.brands,t="brands: ";for(let a in e){let c=e[a].brand;t+=` | ${c}`}let i=this._userAgentData.agentData.mobile;t+=`<br>isMobile: ${i}`;let n=this._userAgentData.agentData.platform;t+=`<br>platform :${n}`;let o=this._userAgentData.agentData.platformVersion;t+=`<br>platformVersion :${o}`;let l=this._userAgentData.agentData.uaFullVersion;t+=`<br> uaFullVersion :${l}`;let r=this._userAgentData.agentData.uaFullVersion;return t+=`<br> fullVersionList :${r}`,t}getApiInfo(){let e="";return e+=`isMobile ${this.isMobile()}`,e+=`<br>isWebView ${this.isWebView()}`,e+=`<br>isIOS ${this.isIOS()}`,e+=`<br>isIOSChrome ${this.isIOSChrome()}`,e+=`<br>iOSVersion ${this.iOSVersion()}`,e+=`<br>isIPAD ${this.isIPAD()}`,e+=`<br>isAndroid ${this.isAndroid()}`,e}getAgentInfo(){let e="not sup userAgentData api";return e+="<br>",e+=`${navigator.userAgent}`,e}addInfo(e){let t=document.body,i=document.createElement("span");i.style.position="absolute",i.style.color="#9e9e9e",i.style.zIndex="9999",i.style.left="2%",i.style.top="10%",i.id="UA",i.style.fontSize="24px",i.style.backgroundColor="black",i.style.visibility="hidden",i.onclick=this.onClick.bind(this,i),t.append(i)}getAgent(){return this._asynDone?this._userAgentData:this._userAgent}onClick(e){e.style.visibility="hidden"}isMobile(){return this._isMobile??(this._isMobile=this.getAgent().isMobile()),this._isMobile}isWebView(){return this._isWebView??(this._isWebView=this.getAgent().isWebView()),this._isWebView}appVersion(){return this._appVersion??(this._appVersion=this.getAgent().appVersion()),this._appVersion}isIOSChrome(){return this._isiOSChrome??(this._isiOSChrome=this.getAgent().isIOSChrome()),this._isiOSChrome}iOSVersion(){return this._iOSVersion??(this._iOSVersion=this.getAgent().iOSVersion()),this._iOSVersion}isIPAD(){return this._isIPAD??(this._isIPAD=this.getAgent().isIPAD()),this._isIPAD}isIOS(){return this._isIOS??(this._isIOS=this.getAgent().isIOS()),this._isIOS}isAndroid(){return this._isAndroid??(this._isAndroid=this.getAgent().isAndroid()),this._isAndroid}};h(Us,"instance",null);let Ui=Us;const Pt=Ui.getInstance();Pt.init();const Jt=Pt.isAndroid(),po=Pt.isIOSChrome(),bi=2;function Ci(){return!0}class mc{constructor(){h(this,"width");h(this,"height");h(this,"designWidth");h(this,"designHeight");h(this,"rendererWidth");h(this,"rendererHeight");h(this,"scale");this.update()}update(){const{innerWidth:e,innerHeight:t,outerWidth:i,outerHeight:n}=window,{clientWidth:o,clientHeight:l,offsetWidth:r,offsetHeight:a}=document.documentElement,c=Ci(),u=Math.min(e,o),d=Math.min(t,l),y=Jt&&u||po&&!c&&i||e,x=Jt?d:t,M=Jt&&y/(i||y)||1,I=y/M,N=x/M;let O=I,U=N,E=Es.normal;const $=O/U;return $>fo?(O=U*fo,E=Es.outMax,this.designHeight=jt.height,this.designWidth=this.designHeight*O/U):$<dc?(E=Es.outMin,this.designWidth=jt.width,this.designHeight=this.designWidth*U/O):(this.designHeight=jt.height,this.designWidth=this.designHeight*O/U),this.width=O,this.height=U,this.setRendererSize(),E}setRendererSize(){let e=this.width*devicePixelRatio,t=this.height*devicePixelRatio,i=Math.min((outerWidth||innerWidth)*bi,e),n=Math.min((outerHeight||innerHeight)*bi,t),o=Math.min(i/this.width,n/this.height);this.rendererWidth=this.width*o,this.rendererHeight=this.height*o}getViewSize(){const e=Ci();return{width:e?this.width:this.height,height:e?this.height:this.width}}getWindowSize(){const e=Ci(),{innerWidth:t,innerHeight:i,outerWidth:n,outerHeight:o}=window,{clientWidth:l,clientHeight:r,offsetWidth:a,offsetHeight:c}=document.documentElement,u=Math.min(t,l),d=Math.min(i,r);return{width:Jt&&u||po&&!e&&n||t,height:Jt?d:i}}getStageScale(){return this.rendererWidth/this.designWidth/Math.min(devicePixelRatio,bi)}getCanvasSize(){return{width:this.width,height:this.height}}getRendererSzie(){return{width:this.rendererWidth,height:this.rendererHeight}}getDesignSize(){return{width:this.designWidth,height:this.designHeight}}}const mt=new mc,Vs=class Vs{constructor(){h(this,"canvasWidth",0);h(this,"canvasHeight",0);h(this,"width",0);h(this,"height",0);h(this,"gameRatio",0);h(this,"cx",0);h(this,"cy",0);h(this,"handlers",new Map);h(this,"beforeResizeHandlers",new Map);h(this,"_defaultSize",jt);h(this,"_gameSize",Wi);this.update()}static getInstance(){return this.instance===null&&(this.instance=new Vs),this.instance}get defaultSize(){return this._defaultSize}get gameSize(){return this._gameSize}set gameSize(e){this._gameSize=e}update(){this._updateFunc()}subscribe(e){this.handlers.get(e)||(this.handlers.set(e,e),e())}subscribeBeforeResize(e){this.beforeResizeHandlers.get(e)||(this.beforeResizeHandlers.set(e,e),e())}unSubscribe(e){this.handlers.get(e)&&this.handlers.delete(e)}unSubscribeBeforeResize(e){this.beforeResizeHandlers.get(e)&&this.beforeResizeHandlers.delete(e)}left(e=0){return e}right(e=0){return this.gameSize.width-e}bottom(e=0){return this.gameSize.height-e}top(e=0){return e}centerX(e=0){return this.cx+e}centerY(e=0){return this.cy+e}center(e=0,t=0){return{x:this.centerX(e),y:this.centerY(t)}}getWidth(){return this.width}getHeight(){return this.height}getGameSize(){return this.gameSize}getCanvasSize(){return{width:this.canvasWidth,height:this.canvasHeight}}getWindowSize(){return mt.getWindowSize()}getGameRatio(){return this.gameRatio}getRevertGameRatio(){return 1/this.gameRatio}_notification(){this.handlers.forEach(e=>{e()})}_notificationBeforeResize(){this.beforeResizeHandlers.forEach(e=>{e()})}_updateFunc(){const e=mt.getDesignSize();this.width=e.width,this.height=e.height,this.gameSize={width:this.width,height:this.height},document.documentElement.style.setProperty("--design-vw",`${e.width}px`),document.documentElement.style.setProperty("--design-vh",`${e.height}px`),this.gameRatio=mt.getStageScale();const t=mt.getCanvasSize();this.canvasWidth=t.width,this.canvasHeight=t.height,this.cx=this.width/2,this.cy=this.height/2,this._notificationBeforeResize(),this._notification()}};h(Vs,"instance",null);let Vi=Vs;const ie=Vi.getInstance();class g{static initElement(e){if(!e)return;let{width:t,height:i,left:n,top:o,right:l,bottom:r}=getComputedStyle(e);t?e.style.width=t:e.style.width="0px",i?e.style.height=i:e.style.height="0px",n?e.style.left=n:e.style.left="0px",o?e.style.top=o:e.style.top="0px"}static getPosition(e){let t={x:0,y:0};if(e){const i=e.style.left.replace("px",""),n=e.style.top.replace("px","");t={x:Number(i),y:Number(n)}}return t}static setPosition(e,t){e.style.left=`${t.x}px`,e.style.top=`${t.y}px`}static addPosition(e,t){let{x:i,y:n}=g.getPosition(e);i+=t.x,n+=t.y,g.setPosition(e,{x:i,y:n})}static getCenterPosition(e,t){e instanceof HTMLElement&&(t=this.getSzie(e),e=this.getPosition(e));const{x:i,y:n}=e,{width:o,height:l}=t;return{x:i+o/2,y:n+l/2}}static getScaleDiffPosition(e,t,i){const n=(i==null?void 0:i.size)||this.getSzie(e),o=(i==null?void 0:i.pos)||this.getPosition(e);return o.x+=(t-1)/2*n.width,o.y+=(t-1)/2*n.height,o}static setScaleDiffPosition(e,t,i){const n=(i==null?void 0:i.size)||this.getSzie(e),o=(i==null?void 0:i.pos)||this.getPosition(e);o.x+=(t-1)/2*n.width,o.y+=(t-1)/2*n.height,g.setPosition(e,o)}static getSzie(e){let t={width:0,height:0};if(e){const i=e.style.width.replace("px",""),n=e.style.height.replace("px","");t={width:Number(i),height:Number(n)}}return t}static setSize(e,t){e.style.width=`${t.width}px`,e.style.height=`${t.height}px`}static getElementCenterPosition(e){const{left:t,top:i,width:n,height:o}=e.getBoundingClientRect();return{x:n/2,y:o/2}}static getWindowSize(){const{innerWidth:e,innerHeight:t,outerWidth:i,outerHeight:n}=window,{clientWidth:o,clientHeight:l,offsetWidth:r,offsetHeight:a}=document.documentElement,c=Math.min(e,o),u=Math.min(t,l);return{width:c,height:u}}static angleToRadian(e){return e*Math.PI/180}static radianToAngle(e){return e*180/Math.PI}static angleToCosine(e,t=!1){let i=t?e:e*(Math.PI/180),n=Math.cos(i);return Math.abs(n)<1e-10&&(n=0),n}static secondsToTime(e){const t=String(Math.floor(e/60)).padStart(2,"0"),i=String(e%60).padStart(2,"0");return`${t}:${i}`}static sizeToPoint(e){return{x:e.width,y:e.height}}static checkStrIn(e,t){if(typeof t=="string")return e.indexOf(t)!==-1;for(let i=0;i<t.length;i++)if(e.indexOf(t[i])!==-1)return!0;return!1}}const zs=class zs{static add(e,t){let i=new Object;return i.x=e.x+t.x,i.y=e.y+t.y,i}static subtract(e,t){let i=new Object;return i.x=e.x-t.x,i.y=e.y-t.y,i}static multiply(e,t){let i=new Object;return i.x=e.x*t.x,i.y=e.y*t.y,i}static divide(e,t){let i=new Object;return i.x=e.x/t.x,i.y=e.y/t.y,i}static ceil(e){let t=new Object;return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t}static floor(e){let t=new Object;return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t}static min(e,t){let i=new Object;return i.x=Math.min(e.x,t.x),i.y=Math.min(e.y,t.y),i}static max(e,t){let i=new Object;return i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i}static round(e){let t=new Object;return t.x=Math.round(e.x),t.y=Math.round(e.y),t}static distance(e,t){const i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}static len(e){const t=e.x,i=e.y;return Math.sqrt(t*t+i*i)}static normalize(e){let t=new Object;t.x=e.x,t.y=e.y;let i=t.x**2+t.y**2;return i>0&&(i=1/Math.sqrt(i),t.x*=i,t.y*=i),t}static multiplyScalar(e,t){let i=new Object;return i.x=e.x*t,i.y=e.y*t,i}static vector(e,t){let i=new Object;return i.x=t.x-e.x,i.y=t.y-e.y,i}static sign(e,t,i){return(e.x-i.x)*(t.y-i.y)-(t.x-i.x)*(e.y-i.y)}static convertToGameViewPos(e,t){let i=new Object;i.x=e.x*t,i.y=e.y*t;const n=ie.getWindowSize(),o=ie.getCanvasSize(),l={x:(n.width-o.width)/2*t,y:(n.height-o.height)/2*t};return i=zs.subtract(i,l),i}};h(zs,"ZERO",{x:0,y:0});let J=zs,gc=class{constructor(){h(this,"enemyList",{})}reset(){this.enemyList={}}addEnemy(e){const t=e.id.split("_")[0];this.enemyList[t]||(this.enemyList[t]={}),this.enemyList[t][e.id]=e}removeEnemy(e){const t=e.id.split("_")[0];this.enemyList[t]&&this.enemyList[t][e.id]&&delete this.enemyList[t][e.id]}getEnemyListByType(e){return this.enemyList[e]}getEnemyById(e){const t=e.split("_")[0];return this.enemyList[t][e]}getAllEnemyList(){let e={};for(const t of Object.keys(this.enemyList))Object.assign(e,this.enemyList[t]);return e}};const yc=""+new URL("hp-MVcjLhKB.png",import.meta.url).href,vc=""+new URL("healthRegen-CKz71gDj.png",import.meta.url).href,_c=""+new URL("shield-CHnJg60B.png",import.meta.url).href,xc=""+new URL("moveSpeed-Csnj3N2u.png",import.meta.url).href,wc=""+new URL("attack-DO0EP7Ji.png",import.meta.url).href,bc=""+new URL("attackSpeed-DsbxukZx.png",import.meta.url).href,Cc=""+new URL("criticalChance-R3hw0YDL.png",import.meta.url).href,kc=""+new URL("criticalDamage-YI0JkdKA.png",import.meta.url).href,Ic=""+new URL("pickUpRange-C6QXsTyT.png",import.meta.url).href,Sc=""+new URL("coinFound-C5v3jI9W.png",import.meta.url).href,Lc=""+new URL("experience-7_ZQmEK8.png",import.meta.url).href,Rc=""+new URL("refreshEquipment-BuSb-IeN.png",import.meta.url).href,Pc=""+new URL("dropEquipment-Dxb8xJEw.png",import.meta.url).href,Mc={hp:0,healthRegen:0,defense:0,moveSpeed:0,attack:0,attackSpeed:0,criticalChance:0,criticalDamage:0,pickUpRange:0,coinFound:0,experience:0,refreshEquipment:0,dropEquipment:0},Ie={hp:{level:[0,10,20,30,40,50,60,70,80,90,100],price:[0,100,200,300,400,800,1200,1600,2e3,3e3,4e3]},healthRegen:{level:[0,.01,.02,.03,.04,.05],price:[0,100,300,500,1e3,2e3]},defense:{level:[0,.005,.01,.015,.02,.03,.05,.07,.09,.12,.15],price:[0,100,200,300,400,800,1200,1600,2e3,3e3,4e3]},moveSpeed:{level:[0,.2,.4,.45,.5,.6],price:[0,100,200,300,500,1e3]},attack:{level:[0,.025,.05,.075,.1,.15,.2,.25,.3,.4,.5],price:[0,100,200,300,400,800,1200,1600,2e3,3e3,4e3]},attackSpeed:{level:[0,.01,.015,.02,.025,.04,.06,.08,.1,.15,.2],price:[0,100,200,300,400,800,1200,1600,2e3,3e3,4e3]},criticalChance:{level:[0,.01,.02,.03,.04,.06,.08,.1,.12,.14,.15],price:[0,100,200,300,400,800,1200,1600,2e3,3e3,4e3]},criticalDamage:{level:[.025,.05,.01,.15,.2,.25,.3,.4,.5,.65,.8],price:[0,100,200,300,400,800,1200,1600,2e3,3e3,4e3]},pickUpRange:{level:[0,20,30,40,50,70,90,110,130,150,170],price:[0,100,200,300,400,800,1200,1600,2e3,3e3,4e3]},coinFound:{level:[0,.025,.075,.1,.15,.2,.3,.45,.6,.8,1],price:[0,100,300,500,800,1200,1600,2e3,3e3,5e3,8e3]},experience:{level:[0,.025,.05,.075,.1,.15,.2,.25,.3,.4,.5],price:[0,100,300,500,800,1200,1600,2e3,3e3,5e3,8e3]},refreshEquipment:{level:[0,1,2,3,4,5],price:[0,1e3,2e3,3e3,5e3,1e4]},dropEquipment:{level:[0,1,2,3,4,5],price:[0,1e3,2e3,3e3,5e3,1e4]}},mo=[[-.5,97.5],[21.5,97.5],[42.5,97.5],[63.5,97.5],[84.5,97.5],[-.5,118.5],[21.5,118.5],[42.5,118.5],[63.5,118.5],[84.5,118.5]],Ec={hp:{id:"hp",img:`url("${yc}")`,tip:"生命",x:10,y:0},healthRegen:{id:"healthRegen",img:`url("${vc}")`,tip:"生命回覆",x:145,y:0},defense:{id:"defense",img:`url("${_c}")`,tip:"防禦",x:280,y:0},moveSpeed:{id:"moveSpeed",img:`url("${xc}")`,tip:"移動速度",x:415,y:0},attack:{id:"attack",img:`url("${wc}")`,tip:"攻擊力",x:550,y:0},attackSpeed:{id:"attackSpeed",img:`url("${bc}")`,tip:"攻擊速度",x:10,y:140},criticalChance:{id:"criticalChance",img:`url("${Cc}")`,tip:"爆擊機率",x:145,y:140},criticalDamage:{id:"criticalDamage",img:`url("${kc}")`,tip:"爆擊傷害",x:280,y:140},pickUpRange:{id:"pickUpRange",img:`url("${Ic}")`,tip:"撿取範圍",x:415,y:140},coinFound:{id:"coinFound",img:`url("${Sc}")`,tip:"金幣倍率",x:550,y:140},experience:{id:"experience",img:`url("${Lc}")`,tip:"經驗倍率",x:10,y:280},refreshEquipment:{id:"refreshEquipment",img:`url("${Rc}")`,tip:"重骰裝備",x:145,y:280},dropEquipment:{id:"dropEquipment",img:`url("${Pc}")`,tip:"刪除裝備",x:280,y:280}},go=[0,1,3,5,10,15,20,25,30,40,50,60,75,90,105,120,135,150,165,180,200,220,240,260,280,300,320,340,370,400,430,460,490,520,550,580,610,640,670,700,740,780,820,860,900,940,980,1020,1060,1100,1140,1180,1230,1280,1330,1380,1430,1480,1530,1580,1640,1700,1760,1820,1880,1940,2e3,2060,2120,2180,2240,2300,2370,2440,2510,2580,2650,2720,2790,2860,2940,3020,3100,3180,3260,3340,3420,3500,3590,3680,3770,3860,3950,4050,4150,4250,4350,4450,4600,4750,4800,5e3],Bc="1.0.0",Ol=Number.MAX_VALUE-1,zi="dot";var Ne=(s=>(s[s.IDLE=0]="IDLE",s[s.GAME=1]="GAME",s[s.PAUSE=2]="PAUSE",s[s.RESUM=3]="RESUM",s[s.GAME_END=4]="GAME_END",s))(Ne||{});const yo={id:"player",position:{x:0,y:0},isActive:!0,size:{width:0,height:0},rotate:180,collideSpeed:.5,hp:100,baseMoveSpeed:70,moveSpeed:1,attack:1,attackSpeed:1,defense:0,criticalChance:.1,criticalDamage:1.2,healthRegen:0,healthPerHit:0,healthPerKill:0,pickUpRange:30,experience:1,coinFound:1,knockbackPower:0,weaponSize:1,weaponDuration:1,refreshEquipment:0,dropEquipment:0,throne:0,slowChance:0,slowPower:0,fireChance:0,firePower:0,poisonChance:0,poisonPower:0,freezeChance:0,freezePower:0,stockChance:0,stockPower:0,bleedChance:0,bleedPower:0,curseChance:0,cursePower:0},Oc={coin:0,upgradeLevelInfo:Mc};class ks{static setBool(e,t){typeof t=="boolean"?localStorage.setItem(e,t.toString()):console.warn("LocalStorage error: SetBool fault")}static getBool(e){let t=localStorage.getItem(e);return t===null?(console.warn("LocalStorage error: Key not found "),null):t!=="false"&&t!=="true"?(console.warn("LocalStorage error: GetBool fault"),null):t==="true"}static setInt(e,t){typeof t=="number"?localStorage.setItem(e,t.toString()):console.warn("LocalStorage error: SetInt fault")}static getInt(e){let t=localStorage.getItem(e);return t===null?(console.warn("LocalStorage error: Key not found "),null):isNaN(Number(t))?(console.warn("LocalStorage error: GetInt fault"),null):Number(t)}static setString(e,t){typeof t=="string"?localStorage.setItem(e,t):console.warn("LocalStorage error: SetString fault")}static getString(e){let t=localStorage.getItem(e);return t??(console.warn("LocalStorage error: Key not found "),null)}static setObject(e,t){typeof t=="object"?localStorage.setItem(e,JSON.stringify(t)):console.warn("LocalStorage error: setObject fault")}static getObject(e){let t=localStorage.getItem(e);if(t===null)return console.warn("LocalStorage error: Key not found "),null;try{let i=JSON.parse(t);return i&&typeof i=="object"?i:null}catch{return console.warn("LocalStorage error: Value is not object"),null}}static removeData(e){return localStorage.removeItem(e)}static clearData(){return localStorage.clear()}}const Tl=-1,ai=0,$s=1,Ws=2,_n=3,xn=4,wn=5,bn=6,Al=7,Dl=8,vo=typeof self=="object"?self:globalThis,Tc=(s,e)=>{const t=(n,o)=>(s.set(o,n),n),i=n=>{if(s.has(n))return s.get(n);const[o,l]=e[n];switch(o){case ai:case Tl:return t(l,n);case $s:{const r=t([],n);for(const a of l)r.push(i(a));return r}case Ws:{const r=t({},n);for(const[a,c]of l)r[i(a)]=i(c);return r}case _n:return t(new Date(l),n);case xn:{const{source:r,flags:a}=l;return t(new RegExp(r,a),n)}case wn:{const r=t(new Map,n);for(const[a,c]of l)r.set(i(a),i(c));return r}case bn:{const r=t(new Set,n);for(const a of l)r.add(i(a));return r}case Al:{const{name:r,message:a}=l;return t(new vo[r](a),n)}case Dl:return t(BigInt(l),n);case"BigInt":return t(Object(BigInt(l)),n)}return t(new vo[o](l),n)};return i},_o=s=>Tc(new Map,s)(0),$t="",{toString:Ac}={},{keys:Dc}=Object,Zt=s=>{const e=typeof s;if(e!=="object"||!s)return[ai,e];const t=Ac.call(s).slice(8,-1);switch(t){case"Array":return[$s,$t];case"Object":return[Ws,$t];case"Date":return[_n,$t];case"RegExp":return[xn,$t];case"Map":return[wn,$t];case"Set":return[bn,$t]}return t.includes("Array")?[$s,t]:t.includes("Error")?[Al,t]:[Ws,t]},Is=([s,e])=>s===ai&&(e==="function"||e==="symbol"),$c=(s,e,t,i)=>{const n=(l,r)=>{const a=i.push(l)-1;return t.set(r,a),a},o=l=>{if(t.has(l))return t.get(l);let[r,a]=Zt(l);switch(r){case ai:{let u=l;switch(a){case"bigint":r=Dl,u=l.toString();break;case"function":case"symbol":if(s)throw new TypeError("unable to serialize "+a);u=null;break;case"undefined":return n([Tl],l)}return n([r,u],l)}case $s:{if(a)return n([a,[...l]],l);const u=[],d=n([r,u],l);for(const y of l)u.push(o(y));return d}case Ws:{if(a)switch(a){case"BigInt":return n([a,l.toString()],l);case"Boolean":case"Number":case"String":return n([a,l.valueOf()],l)}if(e&&"toJSON"in l)return o(l.toJSON());const u=[],d=n([r,u],l);for(const y of Dc(l))(s||!Is(Zt(l[y])))&&u.push([o(y),o(l[y])]);return d}case _n:return n([r,l.toISOString()],l);case xn:{const{source:u,flags:d}=l;return n([r,{source:u,flags:d}],l)}case wn:{const u=[],d=n([r,u],l);for(const[y,x]of l)(s||!(Is(Zt(y))||Is(Zt(x))))&&u.push([o(y),o(x)]);return d}case bn:{const u=[],d=n([r,u],l);for(const y of l)(s||!Is(Zt(y)))&&u.push(o(y));return d}}const{message:c}=l;return n([r,{name:a,message:c}],l)};return o},xo=(s,{json:e,lossy:t}={})=>{const i=[];return $c(!(e||t),!!e,new Map,i)(s),i},be=typeof structuredClone=="function"?(s,e)=>e&&("json"in e||"lossy"in e)?_o(xo(s,e)):structuredClone(s):(s,e)=>_o(xo(s,e)),Wc=["book","perfume","running","shield","shoes","beer","energyDrink","turtleBlood"],ki=s=>Wc.includes(s),wo={book:0,perfume:0,running:0,shield:0,shoes:0,beer:0,energyDrink:0,turtleBlood:0},gt={book:{maxLevel:10,weaponSize:[0,20,25,30,35,40,45,50,60,70,80]},perfume:{maxLevel:5,pickUpRange:[0,50,60,70,80,100]},running:{maxLevel:10,hp:[0,40,45,50,55,60,65,75,85,95,100]},shield:{maxLevel:5,defense:[0,2,4,6,8,10]},shoes:{maxLevel:10,moveSpeed:[0,20,30,40,50,60,70,80,90,100,120]},beer:{maxLevel:5,attack:[0,20,25,30,40,50],moveSpeed:[0,-20,-30,-40,-60,-80]},energyDrink:{maxLevel:5,attackSpeed:[0,1,2,4,6,10],moveSpeed:[0,20,25,30,40,50]},turtleBlood:{maxLevel:3,createCount:[0,1,2,3]}};function Uc(s){const e=gt[s],t=[];for(const i of Object.keys(e))i!=="maxLevel"&&t.push(e[i]);return t}function Vc(s,e){return e===void 0&&(e=15),+parseFloat(Number(s).toPrecision(e))}function Et(s){var e=s.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function bo(s){if(s.toString().indexOf("e")===-1)return Number(s.toString().replace(".",""));var e=Et(s);return e>0?Vc(Number(s)*Math.pow(10,e)):Number(s)}function zc(s){(s>Number.MAX_SAFE_INTEGER||s<Number.MIN_SAFE_INTEGER)&&console.warn(s+" is beyond boundary when transfer to integer, the results may not be accurate")}function Cn(s){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],n=e.slice(1);return n.reduce(function(o,l){return s(o,l)},i)}}var Ve=Cn(function(s,e){var t=bo(s),i=bo(e),n=Et(s)+Et(e),o=t*i;return zc(o),o/Math.pow(10,n)}),Mt=Cn(function(s,e){var t=Math.pow(10,Math.max(Et(s),Et(e)));return(Ve(s,t)+Ve(e,t))/t}),ji=Cn(function(s,e){var t=Math.pow(10,Math.max(Et(s),Et(e)));return(Ve(s,t)-Ve(e,t))/t});const kn=Number.MAX_VALUE-1,jc=kn,js=class js{constructor(){h(this,"raf",null);h(this,"deltaTime");h(this,"deltaTimeMS");h(this,"nowTime",0);h(this,"index",1);h(this,"scheduleObjs",{});h(this,"isPause",!1);this.update=this.update.bind(this)}static getInstance(){return this.instance===null&&(this.instance=new js),this.instance}getDeltaTime(){return this.deltaTime}getDeltaTimeMS(){return this.deltaTimeMS}update(e){var n,o;this.nowTime===0&&(this.nowTime=e);const t=e-this.nowTime,i=t/1e3;this.deltaTimeMS=t,this.deltaTime=i,this.nowTime=e;for(const l of Object.keys(this.scheduleObjs))(n=this.scheduleObjs[l])!=null&&n.callback&&((o=this.scheduleObjs[l])==null?void 0:o.repeat)>0?this.scheduleObjs[l].delay>0?this.scheduleObjs[l].delay-=i:(this.scheduleObjs[l].isFirst&&(this.scheduleObjs[l].isFirst=!1,this.scheduleObjs[l].countdown=0),this.scheduleObjs[l].countdown>0?this.scheduleObjs[l].countdown-=i:(this.scheduleObjs[l].callback(i),this.scheduleObjs[l]&&(this.scheduleObjs[l].repeat--,this.scheduleObjs[l].countdown=this.scheduleObjs[l].interval))):delete this.scheduleObjs[l];this.isPause||(this.raf=requestAnimationFrame(this.update))}onVisibilityChanged(e){e?this.resume():this.pause()}pause(){this.raf!==null&&(this.isPause=!0,this.nowTime=0,cancelAnimationFrame(this.raf),this.raf=null)}isPaused(){return this.isPause}resume(){this.isPause&&(this.isPause=!1,this.checkSchedule())}schedule(e,t=0,i=kn,n=0){const o=this.index;return this.scheduleObjs[this.index]=new Co(this.index,e,t,i,n),this.index++,this.checkIndex(),this.checkSchedule(),o}scheduleOnce(e,t=0){const i=this.index;return this.scheduleObjs[this.index]=new Co(this.index,e,0,1,t),this.index++,this.checkIndex(),this.checkSchedule(),i}unschedule(e){return this.scheduleObjs[e]?(delete this.scheduleObjs[e],this.checkSchedule(),!0):!1}unscheduleAllCallbacks(){for(const e of Object.keys(this.scheduleObjs))delete this.scheduleObjs[e];this.scheduleObjs={},this.checkSchedule()}isScheduled(e){return!!this.scheduleObjs[e]}checkSchedule(){!this.isPause&&this.raf===null&&Object.keys(this.scheduleObjs).length>0?this.raf=requestAnimationFrame(this.update):this.raf&&Object.keys(this.scheduleObjs).length===0&&this.pause()}checkIndex(){this.index===jc&&(this.index=1)}};h(js,"instance",null);let Hi=js;class Co{constructor(e,t,i=0,n=kn,o){h(this,"index");h(this,"callback");h(this,"interval");h(this,"repeat");h(this,"delay");h(this,"countdown");h(this,"isFirst",!0);this.index=e,this.callback=t,this.interval=i,this.repeat=n,this.delay=o,this.countdown=i}}const B=Hi.getInstance();class Ot{constructor(e){h(this,"type");h(this,"bulletList",{});h(this,"vueBulletList");h(this,"idCount",0);h(this,"scheduleId");this.type=e}setVueBulletList(e){this.vueBulletList=e}startCreateBullet(){B.unschedule(this.scheduleId);const e=p.WeaponModel.WeaponInfoList[this.type],t=p.PlayerModel.State,i=1/(e.attackSpeed*t.attackSpeed);this.scheduleId=B.schedule(()=>{const n=g.angleToRadian(p.PlayerModel.State.rotate),o=this.getCreateCount();if(o>1){let l=0;for(let r=0;r<o;r++)B.scheduleOnce(()=>{const a=this.createBullet(n);this.vueBulletList.value[a.id]=a},l),l+=e.createDelay}else{const l=this.createBullet(n);this.vueBulletList.value[l.id]=l}},i)}stopCreateBullet(){B.unschedule(this.scheduleId)}createBullet(e=0){const t=p.WeaponModel.WeaponInfoList[this.type],i=be(t);return i.id=`${this.type}_${this.idCount++}`,i.radians=e,i.isCritical=this.isCritical(),this.bulletList[i.id]=i,p.WeaponModel.addBullet(this.type,i),i}removeBullet(e){e in this.bulletList&&(delete this.bulletList[e],delete this.vueBulletList.value[e],p.WeaponModel.removeBullet(this.type,e))}removeAllBullet(){for(const e in this.bulletList)this.removeBullet(e)}getBulletById(e){return this.bulletList[e]}getBulletList(){return this.bulletList}checkBulletPenetration(e){const t=p.WeaponModel.getBulletById(e.id);t&&(t.penetration--,t.penetration===0&&this.removeBullet(e.id))}getCreateCount(){const e=p.WeaponModel.WeaponInfoList[this.type],t=p.ItemModel.ItemLevelInfo.turtleBlood,i=gt.turtleBlood.createCount[t];return e.createCount+i}isCritical(){const e=p.PlayerModel.State.criticalChance;return Math.random()<e}}const Hc=[0,4,5,5,7,7,10,14,18,25,25],Nc=[0,.5,.5,.5,.5,.6,.6,.6,.7,.7,.7],Fc=[0,400,400,400,400,480,480,480,480,480,560],Gc=[0,1,1,1,1,1,2,2,2,2,3],Kc=[0,1,1,2,2,2,2,2,2,2,2,3];class qc extends Ot{onLevelUp(){const e=p.WeaponModel.WeaponInfoList[this.type],t=p.WeaponModel.WeaponLevelInfo[this.type];e.attack=Hc[t],e.attackSpeed=Nc[t],e.flySpeed=Fc[t],e.createCount=Gc[t],e.penetration=Kc[t],this.startCreateBullet()}}const Xc=[0,2,3,3,4,4,6,6,8,8,12],Yc=[0,.3,.3,.36,.36,.42,.42,.48,.48,.54,.54],Qc=[0,350,350,350,420,420,490,490,490,490,500],Jc=[0,1,1,3,3,3,3,3,3,3,5];class Zc extends Ot{onLevelUp(){const e=p.WeaponModel.WeaponInfoList[this.type],t=p.WeaponModel.WeaponLevelInfo[this.type];e.attack=Xc[t],e.attackSpeed=Yc[t],e.flySpeed=Qc[t],e.createCount=Jc[t],this.startCreateBullet()}startCreateBullet(){B.unschedule(this.scheduleId);const e=p.WeaponModel.WeaponInfoList[this.type],t=p.PlayerModel.State,i=1/(e.attackSpeed*t.attackSpeed);this.scheduleId=B.schedule(()=>{const n=p.PlayerModel.State.rotate,o=this.getCreateCount();if(o>1){let l=[];o===2?l=[-2.5,2.5]:o===3?l=[-5,0,5]:o===4?l=[-7.5,-2.5,2.5,7.5]:o===5?l=[-10,-5,0,5,10]:o===6?l=[-12.5,-7.5,-2.5,2.5,7.5,12.5]:o===7?l=[-15,-10,-5,0,5,10,15]:o===8&&(l=[-17.5,-12.5,-7.5,-2.5,2.5,7.5,12.5,17.5]);for(let r=0;r<o;r++){const a=this.createBullet(g.angleToRadian(n+l[r]));this.vueBulletList.value[a.id]=a}}else{const l=g.angleToRadian(n),r=this.createBullet(l);this.vueBulletList.value[r.id]=r}},i)}checkBulletPenetration(e){}getRadians(e){p.PlayerModel.State.rotate}}const eu=[0,3,4,5,7,9,11,13,15,17,20],tu=[0,210,252,252,294,294,336,336,378,462,462],su=[0,1,1,2,2,3,3,4,4,4,5];class iu extends Ot{onLevelUp(){const e=p.WeaponModel.WeaponInfoList[this.type],t=p.WeaponModel.WeaponLevelInfo[this.type];e.attack=eu[t],e.flySpeed=tu[t],e.createCount=su[t],this.startCreateBullet()}startCreateBullet(){B.unschedule(this.scheduleId);const e=p.WeaponModel.WeaponInfoList[this.type],t=p.PlayerModel.State,i=1/(e.attackSpeed*t.attackSpeed);this.scheduleId=B.schedule(()=>{const n=this.getCreateCount();if(n>1)for(let o=0;o<n;o++){const l=360/n*o,r=this.createBullet(g.angleToRadian(l));this.vueBulletList.value[r.id]=r}else{const o=g.angleToRadian(0),l=this.createBullet(o);this.vueBulletList.value[l.id]=l}},i)}checkBulletPenetration(e){}}const nu=[0,3,4,6,8,11,14,18,22,26,30],ou=[0,1,1,1,1,1,1,1,1,1,2];class lu extends Ot{onLevelUp(){const e=p.WeaponModel.WeaponInfoList[this.type],t=p.WeaponModel.WeaponLevelInfo[this.type];e.attack=nu[t],e.createCount=ou[t],this.startCreateBullet()}startCreateBullet(){B.unschedule(this.scheduleId);const e=p.WeaponModel.WeaponInfoList[this.type],t=p.PlayerModel.State,i=1/(e.attackSpeed*t.attackSpeed);this.scheduleId=B.schedule(()=>{const n=g.angleToRadian(p.PlayerModel.State.rotate),o=this.getCreateCount();if(o>1){let l=0;for(let r=0;r<o;r++)B.scheduleOnce(()=>{const a=this.createBullet(n);this.vueBulletList.value[a.id]=a},l),l+=e.createDelay}else{const l=this.createBullet(n);this.vueBulletList.value[l.id]=l}},i)}checkBulletPenetration(e){}getCreateCount(){return p.WeaponModel.WeaponInfoList[this.type].createCount}}const ru=[0,5,5,5,5,10,10,10,10,15,15],au=[0,200,300,400,500,600,700,800,900,1e3,1400];class cu extends Ot{onLevelUp(){const e=p.WeaponModel.WeaponInfoList[this.type],t=p.WeaponModel.WeaponLevelInfo[this.type];e.attack=ru[t],e.flySpeed=au[t],this.removeAllBullet(),this.startCreateBullet()}startCreateBullet(){const e=this.createBullet(g.angleToRadian(0));this.vueBulletList.value[e.id]=e}stopCreateBullet(){}createBullet(e=0){const t=p.WeaponModel.WeaponInfoList[this.type],i=be(t);return i.id=`${this.type}_${this.idCount++}`,i.radians=e,i.isCritical=this.isCritical(),this.bulletList[i.id]=i,p.WeaponModel.addBullet(this.type,i),i}checkBulletPenetration(e){}checkShouldSetScale(){Object.keys(this.bulletList).length>0&&(this.removeAllBullet(),this.startCreateBullet())}}const uu=["dot","syuriken","pasta","dango","flashlight","mines","swordfish"],Bs=s=>uu.includes(s),ko={dot:0,syuriken:0,pasta:0,dango:0,flashlight:0,mines:0,swordfish:0},ss={dot:{id:"dot",attack:4,attackSpeed:.5,collideSpeed:999,flySpeed:400,createCount:1,createDelay:.1,penetration:1,position:{x:0,y:0},radians:0,liveTime:3,maxLevel:10,scale:.3,isActive:!0},syuriken:{id:"syuriken",attack:4,attackSpeed:.5,collideSpeed:999,flySpeed:400,createCount:1,createDelay:0,penetration:-1,position:{x:0,y:0},radians:0,liveTime:3,maxLevel:10,scale:.3,isActive:!0},pasta:{id:"pasta",attack:4,attackSpeed:.16,collideSpeed:999,flySpeed:210,createCount:1,createDelay:0,penetration:-1,position:{x:0,y:0},radians:0,liveTime:3,maxLevel:10,scale:.3,isActive:!0},dango:{id:"dango",attack:3,attackSpeed:.3,collideSpeed:999,flySpeed:400,createCount:1,createDelay:.1,penetration:-1,position:{x:0,y:0},radians:0,liveTime:.3,maxLevel:10,scale:1,isActive:!0},flashlight:{id:"flashlight",attack:6,attackSpeed:1,collideSpeed:1,flySpeed:200,createCount:1,createDelay:-1,penetration:-1,position:{x:0,y:0},radians:0,liveTime:-1,maxLevel:10,scale:.3,isActive:!0},mines:{id:"mines",attack:10,attackSpeed:.2,collideSpeed:999,flySpeed:200,createCount:1,createDelay:-1,penetration:-1,position:{x:0,y:0},radians:0,liveTime:3,maxLevel:10,scale:.3,isActive:!0},swordfish:{id:"swordfish",attack:10,attackSpeed:.2,collideSpeed:999,flySpeed:200,createCount:1,createDelay:-1,penetration:-1,position:{x:0,y:0},radians:0,liveTime:3,maxLevel:10,scale:.3,isActive:!0}},hu={id:"mines",position:{x:0,y:0},liveTime:3},du=[0,10,10,10,10,20,10,10,10,10,30],fu=[0,.2,.2,.28,.28,.36,.36,.44,.44,.52,.66],pu=[0,.3,.42,.42,.54,.54,.66,.66,.78,.99,.99];class mu extends Ot{constructor(){super(...arguments);h(this,"minesList",{});h(this,"vueMinesList")}onLevelUp(){const t=p.WeaponModel.WeaponInfoList[this.type],i=p.WeaponModel.WeaponLevelInfo[this.type];t.attack=du[i],t.attackSpeed=fu[i],t.scale=pu[i],this.startCreateBullet()}startCreateBullet(){B.unschedule(this.scheduleId);const t=p.WeaponModel.WeaponInfoList[this.type],i=p.PlayerModel.State,n=1/(t.attackSpeed*i.attackSpeed);this.scheduleId=B.schedule(()=>{const o=this.createBullet(),l=this.createBottomMines();this.vueBulletList.value[o.id]=o,this.vueMinesList.value[o.id]=l,this.idCount++},n)}createBullet(t=0){const i=p.WeaponModel.WeaponInfoList[this.type],n=be(i);return n.id=`${this.type}_${this.idCount}`,n.radians=t,n.isCritical=this.isCritical(),this.bulletList[n.id]=n,p.WeaponModel.addBullet(this.type,n),n}createBottomMines(){const t=be(hu);return t.id=`${this.type}_${this.idCount}`,this.minesList[t.id]=t,t}removeBullet(t){t in this.bulletList&&(delete this.bulletList[t],delete this.minesList[t],delete this.vueBulletList.value[t],delete this.vueMinesList.value[t],p.WeaponModel.removeBullet(this.type,t))}checkBulletPenetration(t){}setVueMinesList(t){this.vueMinesList=t}getMinesInfo(t){return this.minesList[t]}}const gu=[0,1,1,1,3,3,6,6,10,10,15],yu=[0,.3,.36,.42,.42,.48,.48,.48,.48,.54,.6],Io=[0,400,560,560,720,720,880,880,1040,1040,1200],vu=[0,.3,.3,.42,.42,.54,.54,.6,.6,.6,.6];class _u extends Ot{onLevelUp(){const e=p.WeaponModel.WeaponInfoList[this.type],t=p.WeaponModel.WeaponLevelInfo[this.type];e.attack=gu[t]+Ve(Io[t],.01),e.attackSpeed=yu[t],e.flySpeed=Io[t],e.scale=vu[t],this.startCreateBullet()}checkBulletPenetration(e){}getCreateCount(){return p.WeaponModel.WeaponInfoList[this.type].createCount}}const Hs=class Hs{constructor(){h(this,"dot",new qc("dot"));h(this,"syuriken",new Zc("syuriken"));h(this,"pasta",new iu("pasta"));h(this,"dango",new lu("dango"));h(this,"flashlight",new cu("flashlight"));h(this,"mines",new mu("mines"));h(this,"swordfish",new _u("swordfish"))}static getInstance(){return this.instance===null&&(this.instance=new Hs),this.instance}setVueBulletList(e,t){this[e].setVueBulletList(t)}stopCreateBullet(){const e=p.WeaponModel.WeaponLevelInfo;for(const t of Object.keys(e))e[t]>0&&this[t].stopCreateBullet()}setFirstWeapon(e){p.WeaponModel.setFirstWeapon(e),this[e].onLevelUp()}removeWeapon(e){this[e].stopCreateBullet(),this[e].removeAllBullet()}removeAllWeapon(){const e=p.WeaponModel.WeaponLevelInfo;for(const t of Object.keys(e))this.removeWeapon(t)}getWeaponById(e){const t=e.split("_")[0];return this[t].getBulletById(e)}getWeaponList(e){return this[e].getBulletList()}checkBulletPenetration(e){const t=e.id.split("_")[0];this[t].checkBulletPenetration(e)}};h(Hs,"instance",null);let Ni=Hs;const Q=Ni.getInstance();let xu=class{constructor(){h(this,"state");h(this,"beginState");h(this,"maxHp");h(this,"coin");h(this,"gameCoin",0);h(this,"gameExp",0);h(this,"gameLevel",1);h(this,"refreshCount",0);h(this,"dropCount",0);h(this,"upgradeLevelInfo");h(this,"saveData");h(this,"onCoinUpdateCb",[]);h(this,"onPickUpRangeUpdateCb");this.state=be(yo),this.loadSaveData(),this.reloadBeginState()}onCoinUpdate(){for(let e=0;e<this.onCoinUpdateCb.length;e++)this.onCoinUpdateCb[e]&&this.onCoinUpdateCb[e](this.coin)}reloadBeginState(){for(const e of Object.keys(Ie)){const t=this.upgradeLevelInfo[e],i=Ie[e].level[t];this.state[e]+=i}this.beginState=be(this.state)}reloadState(){const e=p.ItemModel.ItemLevelInfo;for(const t of Object.keys(e))e[t]>0&&this.setStateByItem(t)}updateStateByItem(e){this.setStateByItem(e)}loadSaveData(){try{let e=ks.getString("saveData");e?this.saveData=JSON.parse(atob(e)):this.resetSaveData(),this.coin=this.saveData.coin,this.upgradeLevelInfo=this.saveData.upgradeLevelInfo,this.checkUpgradeLevelInfo()}catch{ks.clearData(),this.loadSaveData()}}saveSaveData(){this.saveData.coin=this.coin??this.saveData.coin,this.saveData.upgradeLevelInfo=this.upgradeLevelInfo??this.saveData.upgradeLevelInfo;const e=btoa(JSON.stringify(this.saveData));ks.setString("saveData",e)}resetSaveData(){const e=be(Oc),t=btoa(JSON.stringify(e));ks.setString("saveData",t),this.loadSaveData(),this.onCoinUpdate()}caculateUpgradeCoin(){let e=0;for(const t of Object.keys(this.upgradeLevelInfo)){const i=this.upgradeLevelInfo[t]+1,n=Ie[t].price.length-1;for(let o=i;o<=n;o++)e+=Ie[t].price[o]}return e}registerCoinUpdate(e){this.onCoinUpdateCb.push(e)}setPickUpRangeUpdate(e){this.onPickUpRangeUpdateCb=e}reset(){const e=this.state.size;this.state=be(yo),this.loadSaveData(),this.reloadBeginState(),this.state.size=e,this.maxHp=this.state.hp,this.gameCoin=0,this.gameExp=0,this.gameLevel=1,this.refreshCount=this.getRefashCount(),this.dropCount=this.getDropCount()}get State(){return this.state}get UpgradeLevelInfo(){return this.upgradeLevelInfo}get Coin(){return this.coin}set Coin(e){this.coin=e,this.onCoinUpdate()}get GameCoin(){return this.gameCoin}set GameCoin(e){this.gameCoin=e}get GameExp(){return this.gameExp}set GameExp(e){this.gameExp=e}get GameLevel(){return this.gameLevel}set GameLevel(e){this.gameLevel=e}get MaxHp(){return this.maxHp}get RefreshCount(){return this.refreshCount}set RefreshCount(e){this.refreshCount=e}get DropCount(){return this.dropCount}set DropCount(e){this.dropCount=e}checkUpgradeLevelInfo(){for(const e of Object.keys(Ie))this.upgradeLevelInfo[e]||(this.upgradeLevelInfo[e]=0)}setStateByItem(e){const t=["hp"],i=p.ItemModel.ItemLevelInfo[e],n=gt[e];for(const o of Object.keys(n)){if(o==="maxLevel"||o==="createCount")continue;let l=this.beginState[o],r=n[o];if(o==="pickUpRange"){const a=r[i]/100;l=Ve(l,1+a)}else if(g.checkStrIn(o,t))l=Mt(l,r[i]);else{const a=r[i]/100;l=Mt(l,a)}this.state[o]=l,o==="weaponSize"?Q.flashlight.checkShouldSetScale():o==="pickUpRange"&&this.onPickUpRangeUpdateCb()}}getRefashCount(){const e=this.upgradeLevelInfo.refreshEquipment;return Ie.refreshEquipment.level[e]}getDropCount(){const e=this.upgradeLevelInfo.dropEquipment;return Ie.dropEquipment.level[e]}};class wu{constructor(){h(this,"weaponLevelInfo");h(this,"weaponInfoList");h(this,"weaponList");h(this,"removeList",[]);this.resetWeaponList(),this.weaponLevelInfo=be(ko),this.weaponInfoList=be(ss)}reset(){this.resetWeaponList(),this.weaponLevelInfo=be(ko),this.weaponInfoList=be(ss)}setFirstWeapon(e){this.weaponLevelInfo[e]=1}addBullet(e,t){this.weaponList[e][t.id]=t}removeBullet(e,t){t in this.weaponList[e]&&delete this.weaponList[e][t]}getBulletByTypeId(e,t){return this.weaponList[e][t]}getBulletById(e){let t;for(t in this.weaponList)if(e in this.weaponList[t])return this.weaponList[t][e];return null}getCanLevelUpWeapon(e=!1){const t=[];for(const i of Object.keys(this.weaponList)){const n=i,o=ss[n].maxLevel;e?this.weaponLevelInfo[n]>0&&this.weaponLevelInfo[n]<o&&(this.removeList.includes(n)||t.push(n)):this.weaponLevelInfo[n]<o&&(this.removeList.includes(n)||t.push(n))}return t}getWeaponCount(){return Object.values(this.WeaponLevelInfo).reduce((t,i)=>i>0?t+1:t,0)}addRemeveList(e){this.removeList.push(e)}get WeaponLevelInfo(){return this.weaponLevelInfo}get WeaponInfoList(){return this.weaponInfoList}resetWeaponList(){this.weaponList={};for(const e of Object.keys(ss))this.weaponList[e]={}}}let bu=class{constructor(){h(this,"dropList",{})}reset(){this.dropList={}}addDrop(e){const t=e.id.split("_")[0];this.dropList[t]||(this.dropList[t]={}),this.dropList[t][e.id]=e}removeDrop(e){const t=e.id.split("_")[0];this.dropList[t]&&this.dropList[t][e.id]&&delete this.dropList[t][e.id]}getDropListByType(e){return this.dropList[e]}getDropById(e){const t=e.split("_")[0];return this.dropList[t][e]}getAllDropList(){let e={};for(const t of Object.keys(this.dropList))Object.assign(e,this.dropList[t]);return e}};class Cu{constructor(){h(this,"itemLevelInfo");h(this,"removeList",[]);this.itemLevelInfo=be(wo)}reset(){this.itemLevelInfo=be(wo),this.removeList=[]}addItem(e){const t=gt[e].maxLevel;this.itemLevelInfo[e]<t&&this.itemLevelInfo[e]++}getWeaponScale(e=.3){const t=this.itemLevelInfo.book,i=gt.book.weaponSize[t]/100;return Ve(e,Mt(1,i))}getCanLevelUpItem(e=!1){const t=[];for(const i of Object.keys(gt)){const n=i,o=gt[n].maxLevel;e?this.itemLevelInfo[n]>0&&this.itemLevelInfo[n]<o&&(this.removeList.includes(n)||t.push(n)):this.itemLevelInfo[n]<o&&(this.removeList.includes(n)||t.push(n))}return t}getItemCount(){return Object.values(this.itemLevelInfo).reduce((t,i)=>i>0?t+1:t,0)}addRemeveList(e){this.removeList.push(e)}get ItemLevelInfo(){return this.itemLevelInfo}}const Ns=class Ns{constructor(){h(this,"app");h(this,"playerModel",new xu);h(this,"enemyModel",new gc);h(this,"weaponModel",new wu);h(this,"itemModel",new Cu);h(this,"dropModel",new bu);h(this,"mapElement");h(this,"mapPosition",{x:0,y:0});h(this,"devicePixelRatio",window.devicePixelRatio||1);h(this,"isPause",!0);h(this,"isInGame",!1)}static getInstance(){return this.instance===null&&(this.instance=new Ns),this.instance}getCharacterActive(){const e=this.getCharactersInfo();return Object.values(e).filter(t=>t.isActive)}getCharacterInfoById(e){return this.getCharactersInfo()[e]}getMapPosition(){return this.mapPosition}setMapPosition(e){g.setPosition(this.mapElement,e)}reset(){this.playerModel.reset(),this.enemyModel.reset(),this.weaponModel.reset(),this.itemModel.reset(),this.mapPosition={x:0,y:0}}get App(){return this.app}set App(e){this.app=e}get PlayerModel(){return this.playerModel}get EnemyModel(){return this.enemyModel}get WeaponModel(){return this.weaponModel}get ItemModel(){return this.itemModel}get DropModel(){return this.dropModel}set MapElement(e){this.mapElement=e,this.mapPosition=g.getPosition(e)}get DevicePixelRatio(){return this.devicePixelRatio}set DevicePixelRatio(e){this.devicePixelRatio=e}get IsPause(){return this.isPause}set IsPause(e){this.isPause=e}get IsInGame(){return this.isInGame}set IsInGame(e){this.isInGame=e}getCharactersInfo(){return{player:this.playerModel.State,...this.enemyModel.getAllEnemyList()}}};h(Ns,"instance",null);let Fi=Ns;const p=Fi.getInstance(),$l=`onmessage = function (e) {
    const message = e.data;
    const { id, type, selfCollider, obstacles } = message;

    getCollisions(id, type, selfCollider, obstacles);
};

function getCollisions(id, type, selfCollider, obstacles) {
    const collisions = [];

    for (const obstacle of obstacles) {
        const targetCollider = obstacle.collider;
        if (!targetCollider) {
            continue;
        }

        const isCircle = obstacle.type === 'circle';
        let isCollision = false;

        if (type === 'box' && !isCircle) {
            if (boxToBoxCollision(targetCollider, selfCollider)) {
                isCollision = true;
            }
        } else if (type === 'circle' && isCircle) {
            if (circleToCircleCollision(selfCollider, targetCollider)) {
                isCollision = true;
            }
        } else if (type === 'box' && isCircle) {
            if (boxToCircleCollision(selfCollider, targetCollider)) {
                isCollision = true;
            }
        } else if (type === 'circle' && !isCircle) {
            if (boxToCircleCollision(targetCollider, selfCollider)) {
                isCollision = true;
            }
        }

        if (isCollision) {
            const collision = {
                obstacle: obstacle,
            };
            collisions.push(collision);
        }
    }

    postMessage({ id, collisions });
}

function boxToBoxCollision(self, target) {
    if (
        self.left < target.left + target.width &&
        self.left + self.width > target.left &&
        self.top < target.top + target.height &&
        self.height + self.top > target.top
    ) {
        return true;
    }
    return false;
}

function circleToCircleCollision(self, target) {
    const selfCenter = {
        x: self.left + self.width / 2,
        y: self.top + self.height / 2,
    };
    const targetCenter = {
        x: target.left + target.width / 2,
        y: target.top + target.height / 2,
    };
    const distance = Math.sqrt(
        (selfCenter.x - targetCenter.x) * (selfCenter.x - targetCenter.x) +
            (selfCenter.y - targetCenter.y) * (selfCenter.y - targetCenter.y),
    );

    if (distance < self.width / 2 + target.width / 2) {
        return true;
    }

    return false;
}

function boxToCircleCollision(self, target) {
    const rect = {
        x: self.left + self.width / 2,
        y: self.top + self.height / 2,
        w: self.width,
        h: self.height,
    };
    const circle = {
        x: target.left + target.width / 2,
        y: target.top + target.height / 2,
        r: target.width / 2,
    };
    const distX = Math.abs(circle.x - rect.x);
    const distY = Math.abs(circle.y - rect.y);

    if (distX > rect.w / 2 + circle.r || distY > rect.h / 2 + circle.r) {
        return false;
    }

    if (distX <= rect.w / 2 || distY <= rect.h / 2) {
        return true;
    }

    const dx = distX - rect.w / 2;
    const dy = distY - rect.h / 2;
    return dx * dx + dy * dy <= circle.r * circle.r;
}
`,ku=new Blob([$l],{type:"application/javascript"}),So=window.URL.createObjectURL(ku),Fs=class Fs{constructor(){h(this,"worker");h(this,"cbs",{});this.worker=new Worker(So),this.worker.onmessage=e=>{const{id:t,collisions:i}=e.data;this.cbs[t]&&(this.cbs[t](i),delete this.cbs[t])}}static getInstance(){return this.instance===null&&(this.instance=new Fs),this.instance}init(){this.worker=new Worker(So),this.worker.onmessage=e=>{const{id:t,collisions:i}=e.data;this.cbs[t]&&(this.cbs[t](i),delete this.cbs[t])}}postMessage(e,t){const i=Math.random().toString(36).substr(2);this.cbs[i]=t,this.worker.postMessage({id:i,...e})}};h(Fs,"instance",null);let Gi=Fs;Gi.getInstance();const Iu=new Blob([$l],{type:"application/javascript"});window.URL.createObjectURL(Iu);class Me{constructor(){h(this,"selfId");h(this,"selfElement");h(this,"selfCollider");h(this,"info");h(this,"obstacles",[]);h(this,"collisions",[]);h(this,"scheduleId");h(this,"selector");h(this,"worker");h(this,"type");h(this,"cd",1);h(this,"onColStartCb");h(this,"onColEndCb");h(this,"collisionList",{});h(this,"count",0)}pureInit(e){var t;this.selfId=e,this.selfElement=document.getElementById(this.selfId),this.selfCollider=(t=this.selfElement)==null?void 0:t.getElementsByClassName("collider")[0],this.setColliderPos()}init(e){var r;const{selfId:t,obstacles:i,cd:n,onColStartCb:o,onColEndCb:l}=e;this.selfId=t,this.cd=n,this.onColStartCb=o,this.onColEndCb=l,this.updateObstacles(i),this.info=p.getCharacterInfoById(t),this.selfElement=document.getElementById(this.selfId),this.selfCollider=(r=this.selfElement)==null?void 0:r.getElementsByClassName("collider")[0],this.type=this.getType(this.selfElement),this.setColliderPos()}updateColliderPos(e,t){this.setColliderPos(),this.setColliderDiffPos(e??0,t??0)}setColliderDiffPos(e,t){g.addPosition(this.selfCollider,{x:e,y:t})}onCollisionStart(e){var i;let t;e.obstacle.className.indexOf("weapon")!==-1?t=p.WeaponModel.getBulletById(e.obstacle.id):e.obstacle.className.indexOf("drop")!==-1?t=p.DropModel.getDropById(e.obstacle.id):t=p.getCharacterInfoById(e.obstacle.id),t!=null&&t.isActive&&(this.info&&!((i=this.info)!=null&&i.isActive)||(this.onColStartCb&&this.onColStartCb(t),B.scheduleOnce(()=>{delete this.collisionList[e.obstacle.id]},t.collideSpeed)))}onCollisionEnd(){this.onColEndCb&&this.onColEndCb()}startDetect(){this.scheduleId=B.schedule(()=>{if(!document.getElementById(this.selfId)){this.stopDetect();return}this.checkCollisions()})}stopDetect(){B.unschedule(this.scheduleId)}updateObstacles(e){if(e??(e=this.selector),!!e){this.selector=e,this.obstacles=[];for(let t=0;t<e.length;t++){const i=document.getElementsByClassName(e[t]),n=i.length;for(let o=0;o<n;o++){const l=i[o].getElementsByClassName("collider")[0],r=this.getType(i[o]),a={id:i[o].id,type:r,collider:l.getBoundingClientRect(),className:i[o].className};this.obstacles.push(a)}}}}checkCollisions(){if(!p.IsPause){this.updateObstacles();{const e=this.getCollisions();if(e.length>0)for(let t=0;t<e.length;t++)this.onCollisionStart(e[t])}}}getCollisions(){const e=document.getElementById(this.selfId);if(!e)return[];if(this.obstacles.length===0)return[];const t=[];for(const i of this.obstacles){const n=document.getElementById(i.id);if(!n)continue;const o=i.type;let l=!1;if(this.type==="box"&&o==="box"?l=this.boxToBoxCollision(n,e):this.type==="circle"&&o==="circle"?l=this.circleToCircleCollision(e,n):this.type==="triangle"&&o==="triangle"?l=this.triangleToTriangleCollision(e,n):this.type==="box"&&o==="circle"||this.type==="circle"&&o==="box"?this.type==="box"?l=this.boxToCircleCollision(e,n):l=this.boxToCircleCollision(n,e):this.type==="box"&&o==="triangle"||this.type==="triangle"&&o==="box"?this.type==="box"?l=this.boxToTriangleCollision(e,n):l=this.boxToTriangleCollision(n,e):(this.type==="triangle"&&o==="circle"||this.type==="circle"&&o==="triangle")&&(this.type==="triangle"?l=this.triangleToCircleCollision(e,n):l=this.triangleToCircleCollision(n,e)),l&&!(i.id in this.collisionList)){this.collisionList[i.id]=!0;const a={obstacle:i};t.push(a)}}return this.collisions=t,t}boxToBoxCollision(e,t){const n=e.getElementsByClassName("collider")[0].getBoundingClientRect(),l=t.getElementsByClassName("collider")[0].getBoundingClientRect();return n.left<l.left+l.width&&n.left+n.width>l.left&&n.top<l.top+l.height&&n.height+n.top>l.top}circleToCircleCollision(e,t){const n=e.getElementsByClassName("collider")[0].getBoundingClientRect(),l=t.getElementsByClassName("collider")[0].getBoundingClientRect(),r={x:n.left+n.width/2,y:n.top+n.height/2},a={x:l.left+l.width/2,y:l.top+l.height/2};return J.distance(a,r)<n.width/2+l.width/2}triangleToTriangleCollision(e,t){const i=e.getElementsByClassName("collider")[0],n=t.getElementsByClassName("collider")[0],o=this.getTrianglePoints(i),l=this.getTrianglePoints(n);for(let r=0;r<o.length;r++){const a=o[r];if(this.isPointInTriangle(a,l))return!0}for(let r=0;r<l.length;r++){const a=l[r];if(this.isPointInTriangle(a,o))return!0}return!1}boxToCircleCollision(e,t){const n=e.getElementsByClassName("collider")[0].getBoundingClientRect(),l=t.getElementsByClassName("collider")[0].getBoundingClientRect(),r={x:n.left+n.width/2,y:n.top+n.height/2,w:n.width,h:n.height},a={x:l.left+l.width/2,y:l.top+l.height/2,r:l.width/2},c=Math.abs(a.x-r.x),u=Math.abs(a.y-r.y);if(c>r.w/2+a.r||u>r.h/2+a.r)return!1;if(c<=r.w/2||u<=r.h/2)return!0;const d=c-r.w/2,y=u-r.h/2;return d*d+y*y<=a.r*a.r}boxToTriangleCollision(e,t){const n=e.getElementsByClassName("collider")[0].getBoundingClientRect(),o=t.getElementsByClassName("collider")[0],l=[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.left,y:n.bottom},{x:n.right,y:n.bottom}],r=this.getTrianglePoints(o);for(let u=0;u<l.length;u++){const d=l[u];if(this.isPointInTriangle(d,r))return!0}for(let u=0;u<r.length;u++){const d=r[u];if(this.isPointInRectangle(d,n))return!0}const a=[[l[0],l[1]],[l[1],l[3]],[l[3],l[2]],[l[2],l[0]]],c=[[r[0],r[1]],[r[1],r[2]],[r[2],r[0]]];for(let u=0;u<a.length;u++)for(let d=0;d<c.length;d++)if(this.doLinesIntersect(a[u],c[d]))return!0;return!1}triangleToCircleCollision(e,t){const i=e.getElementsByClassName("collider")[0],o=t.getElementsByClassName("collider")[0].getBoundingClientRect(),l=this.getTrianglePoints(i),r={x:o.left+o.width/2,y:o.top+o.height/2},a=o.width/2;for(let c=0;c<l.length;c++){const u=l[c];if(Math.sqrt((u.x-r.x)*(u.x-r.x)+(u.y-r.y)*(u.y-r.y))<a)return!0}return!1}setColliderPos(){let e,t;this.type==="circle"?(e=this.selfElement.getBoundingClientRect(),t=this.selfCollider.getBoundingClientRect()):(e=g.getSzie(this.selfElement),t=g.getSzie(this.selfCollider)),this.selfCollider.style.top=(e.height-t.height)/2+"px",this.selfCollider.style.left=(e.width-t.width)/2+"px"}isPointInTriangle(e,t){const[i,n,o]=t,l=J.sign(e,i,n),r=J.sign(e,n,o),a=J.sign(e,o,i);return l*r>0&&r*a>0}isPointInRectangle(e,t){return e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom}doLinesIntersect(e,t){const[i,n]=e,[o,l]=t,r=(n.x-i.x)*(l.y-o.y)-(n.y-i.y)*(l.x-o.x);if(r===0)return!1;const a=((l.y-o.y)*(l.x-i.x)+(o.x-l.x)*(l.y-i.y))/r,c=((i.y-n.y)*(l.x-i.x)+(n.x-i.x)*(l.y-i.y))/r;return 0<a&&a<1&&0<c&&c<1}getType(e){const t=e.getElementsByClassName("collider")[0];return t.classList.contains("circle")?"circle":t.classList.contains("box")?"box":t.classList.contains("triangle")?"triangle":"box"}getTrianglePoints(e){let t=[];const i=g.angleToRadian(p.PlayerModel.State.rotate);return t.push(this.calculateRotatedPoint(e,i,"right-top"),this.calculateRotatedPoint(e,i,"right-bottom"),this.calculateRotatedPoint(e,i,"left-middle")),t}calculateRotatedPoint(e,t,i){let{width:n,height:o}=g.getSzie(e);const l=p.PlayerModel.State.size,r=ie.getWindowSize(),a={x:r.width/2+l.width/2,y:r.height/2+l.height/2},c=15;let u={x:0,y:0};switch(i){case"right-top":u={x:a.x+c+n,y:a.y-o/2};break;case"right-bottom":u={x:a.x+c+n,y:a.y+o/2};break;case"left-top":u={x:a.x+c,y:a.y-o/2};break;case"left-bottom":u={x:a.x+c,y:a.y+o/2};break;case"left-middle":u={x:a.x+c,y:a.y};break;case"right-middle":u={x:a.x+c+n,y:a.y};break;default:throw new Error("Invalid point type")}const d=J.subtract(u,a),y=Math.atan2(d.y,d.x),x=J.len(d),M=a.x+x*Math.cos(t+y),I=a.y+x*Math.sin(t+y);return{x:M,y:I}}}const Su={id:"",value:1,position:{x:0,y:0},size:{width:0,height:0},isActive:!0,isFlying:!1,collideSpeed:99999},Lo={coin:{id:"",value:1,position:{x:0,y:0},size:{width:30,height:30},isActive:!0,isFlying:!1,collideSpeed:99999},exp:{id:"",value:1,position:{x:0,y:0},size:{width:40,height:40},isActive:!0,isFlying:!1,collideSpeed:99999},guabao:{id:"",value:1,position:{x:0,y:0},size:{width:50,height:50},isActive:!0,isFlying:!1,collideSpeed:99999},magnet:{id:"",value:1,position:{x:0,y:0},size:{width:50,height:50},isActive:!0,isFlying:!1,collideSpeed:99999}},Lu=s=>s&&s in Lo?be(Lo[s]):be(Su),Ro=p.DropModel,Gs=class Gs{constructor(){h(this,"count",0);h(this,"dropRefs");h(this,"dropList")}static getInstance(){return this.instance===null&&(this.instance=new Gs),this.instance}setDropList(e){this.dropList=e}setDropRefs(e){this.dropRefs=e}createRandomDrop(e){}createDrop(e,t,i){const n=Lu(e);n.id=`${e}_${this.count++}`,n.value=t,n.position.x=i.x-n.size.width/2,n.position.y=i.y-n.size.height/2;const o=this.getRandomDiffPos();n.position.x+=o.x,n.position.y+=o.y,Ro.addDrop(n),this.dropList.value[e]||(this.dropList.value[e]={}),this.dropList.value[e][n.id]=n,this.count===Ol&&(this.count=0)}removeDrop(e){const t=e.id.split("_")[0];this.dropList.value[t]&&this.dropList.value[t][e.id]&&(Ro.removeDrop(e),delete this.dropList.value[t][e.id])}getDropElement(e){return this.dropRefs.value[e.id].element}flyToPlayer(e,t,i){const n=p.getCharacterInfoById("player"),o=this.getDropElement(e);if(e.isFlying)return-1;e.isFlying=!0;const l=B.schedule(r=>{if(!n||!e||!o){B.unschedule(l);return}const a=e.position,c=J.subtract(J.add(n.position,J.multiplyScalar(g.sizeToPoint(n.size),.5)),J.add(a,J.multiplyScalar(g.sizeToPoint(e.size),.5))),u=J.len(c),d={x:r*t*c.x/u,y:r*t*c.y/u};a.x+=d.x,a.y+=d.y,u<=5?(g.setPosition(o,n.position),a.x=n.position.x,a.y=n.position.y,B.unschedule(l),i(e)):g.setPosition(o,a)});return l}playMagnetEffect(e){const t=this.dropList.value;for(const i in t)if(i!=="magnet")for(const n in t[i]){const o=t[i][n];o.isFlying||this.flyToPlayer(o,300,e)}}getRandomDiffPos(){const e={x:0,y:0};return e.x=Math.floor(Math.random()*21-10),e.y=Math.floor(Math.random()*21-10),e}};h(Gs,"instance",null);let Ki=Gs;const it=Ki.getInstance(),es=p.PlayerModel,Ks=class Ks{constructor(){h(this,"bar");h(this,"levelUpCb");h(this,"expQueue",[])}static getInstance(){return this.instance===null&&(this.instance=new Ks),this.instance}init(e,t){this.bar=e,this.levelUpCb=t}onExperience(e){this.expQueue.push(e),this.expQueue.length===1&&this.checkExperienceQueue()}setExperience(){const e=es.State;let t=this.expQueue.shift(),i=es.GameLevel,n=go[i];t===-1&&(t=n);let o=Math.round(Ve(t,e.experience));for(o=Mt(o,es.GameExp);o>=n;)i+=1,o-=n,n=go[i],this.levelUpCb();es.GameExp=o,es.GameLevel=i;let l=o/n*100;this.bar.style.width=`${100-l}%`,this.checkExperienceQueue()}checkExperienceQueue(){this.expQueue.length>0&&this.setExperience()}};h(Ks,"instance",null);let qi=Ks;const Wl=qi.getInstance(),Ru=k("div",{class:"collider circle",style:{width:"30px",height:"30px"}},null,-1),Pu={class:"player-hp"},Mu={id:"picker",class:"absolute"},Eu=re({__name:"player",emits:["gameOver","updateCoin"],setup(s,{expose:e,emit:t}){const i=t,n=_(),o=_(),l=_(),r=_();let a,c=new Me,u=new Me,d,y,x=0;p.PlayerModel.setPickUpRangeUpdate(V),e({player:n,arrow:o,collider:c,removeAllAnimation:$,updatePickUpRange:V,setHpBar:U,setPlayerInfoHpBar:O,startAutoHeal:T,stopAutoHeal:K}),le(()=>{const S=p.PlayerModel.State.position;a=n.value,o.value,d=l.value,g.initElement(a),g.setPosition(a,S);const{width:j,height:F}=g.getSzie(a);p.PlayerModel.State.size={width:j,height:F};const R={selfId:"player",obstacles:["enemy"],cd:1,onColStartCb:fe=>{M(fe),E(!0)}};c.init(R),c.startDetect();const xe={selfId:"picker",obstacles:["coin","exp","guabao","magnet"],cd:1,onColStartCb:fe=>{I(fe)}};u.init(xe),u.startDetect()});function M(S){const j=p.getCharacterInfoById("player"),F=p.PlayerModel.State,R=Ve(S.attack,ji(1,F.defense));j.hp=ji(j.hp,R),U(),j.hp<=0&&i("gameOver")}function I(S){it.flyToPlayer(S,300,N)}function N(S){const j=S.id.split("_")[0],F=p.PlayerModel.State;if(j==="coin"){const R=Ve(S.value,F.coinFound);p.PlayerModel.GameCoin=Mt(p.PlayerModel.GameCoin,R),i("updateCoin",p.PlayerModel.GameCoin)}else if(j==="exp")Wl.onExperience(S.value);else if(j==="guabao"){const R=p.PlayerModel.State,xe=p.PlayerModel.MaxHp;R.hp=Mt(R.hp,30),R.hp>=xe&&(R.hp=xe),U()}else j==="magnet"&&it.playMagnetEffect(N);it.removeDrop(S)}function O(S){y=S}function U(){const S=p.PlayerModel.MaxHp;let F=p.getCharacterInfoById("player").hp/S*100;F<=0&&(F=0),d.style.width=F+"%",y.style.width=F+"%"}function E(S){S?(a.classList.contains("cat-damage")||a.classList.add("cat-damage"),B.scheduleOnce(()=>{E(!1)},.3)):a.classList.contains("cat-damage")&&a.classList.remove("cat-damage")}function $(){E(!1),a.classList.contains("cat-animate")&&a.classList.remove("cat-animate")}function V(){const S=p.PlayerModel.State.pickUpRange;r.value.style.width=S+"px",r.value.style.height=S+"px",u.updateColliderPos()}function T(){const S=p.PlayerModel.UpgradeLevelInfo.healthRegen;S>0&&(x=B.schedule(()=>{const j=Ie.healthRegen.level[S],F=p.PlayerModel.State,R=p.PlayerModel.MaxHp;F.hp=Mt(F.hp,Math.floor(R*j)),F.hp>=R&&(F.hp=R),U()},10))}function K(){B.unschedule(x)}return(S,j)=>(D(),H(te,null,[k("i",{id:"player",ref_key:"playerRef",ref:n,class:"cat"},[Ru,k("i",{class:"direction-arrow",ref_key:"arrowRef",ref:o},null,512),k("div",Pu,[k("div",{class:"player-hp-bar",ref_key:"hpBarRef",ref:l},null,512)])],512),k("div",Mu,[k("div",{class:"collider circle",ref_key:"coinColliderRef",ref:r},null,512)])],64))}}),Bu={id:"",type:"",hp:20,position:{x:0,y:0},moveSpeed:80,attackSpeed:1,collideSpeed:1,attack:10,isActive:!0,size:{width:0,height:0},coin:[1],coinChance:.1,exp:[1]},He={smallEric:{id:"",type:"smallEric",hp:6,position:{x:0,y:0},moveSpeed:55,attackSpeed:1,collideSpeed:1,attack:10,isActive:!0,size:{width:96,height:54},coin:[1,2,3,4,5,10],coinChance:.1,exp:[1]},eric:{id:"",type:"eric",hp:100,position:{x:0,y:0},moveSpeed:80,attackSpeed:1,collideSpeed:1,attack:20,isActive:!0,size:{width:160,height:90},coin:[5,10,15,20],coinChance:1,exp:[10,15,20,25,30,50]},bigEric:{id:"",type:"bigEric",hp:600,position:{x:0,y:0},moveSpeed:80,attackSpeed:1,collideSpeed:1,attack:50,isActive:!0,size:{width:320,height:180},coin:[100],coinChance:1,exp:[-1]}},Ou=s=>s&&s in He?be(He[s]):be(Bu),Po=p.EnemyModel,Mo=p.PlayerModel,qs=class qs{constructor(){h(this,"count",0);h(this,"enemyList")}static getInstance(){return this.instance===null&&(this.instance=new qs),this.instance}setEnemyList(e){this.enemyList=e}createRandomEnemies(e,t=1,i=1){const n=Math.floor(Math.random()*(i-t+1)+t),o=[];for(let l=0;l<n;l++)o.push(this.createEnemy(e));return o}createEnemy(e,t=1){for(let i=0;i<t;i++){const n=g.getWindowSize(),o=Ou(e),l=Mo.State.moveSpeed,r=Mo.State.position,a=this.getDis(n)+this.getDis(o.size)+l,c=a+50,u=Math.random()*(c-a)+a,d=Math.random()*2*Math.PI,y=r.x+u*Math.cos(d),x=r.y+u*Math.sin(d);o.id=`${e}_${this.count}`,o.count=this.count,o.position.x=y,o.position.y=x,this.count++,Po.addEnemy(o),this.enemyList.value[e]||(this.enemyList.value[e]={}),this.enemyList.value[e][o.id]=o,this.count===Ol&&(this.count=0)}}removeEnemy(e){const t=e.id.split("_")[0];this.enemyList.value[t]&&this.enemyList.value[t][e.id]&&(B.unschedule(e.scheduleId),Po.removeEnemy(e),delete this.enemyList.value[t][e.id])}checkDamage(e,t){const i=p.getCharacterInfoById(t);if(!i)return;const n=p.getCharacterInfoById("player"),o=e.isCritical?n.criticalDamage:1,l=Ve(e.attack,n.attack,o);i.hp=ji(i.hp,l),i.hp<=0&&(this.checkDrop(i),this.removeEnemy(i))}checkDrop(e){const{coin:t,coinChance:i,exp:n}=e;if(p.getCharacterInfoById("player")){const l=g.getCenterPosition(e.position,e.size);if(Math.random()<i){const a=t[Math.floor(Math.random()*t.length)];it.createDrop("coin",a,l)}const r=n[Math.floor(Math.random()*n.length)];it.createDrop("exp",r,l),Math.random()<.01&&it.createDrop("guabao",1,l),Math.random()<.01&&it.createDrop("magnet",1,l)}}tracePlayer(e){return B.schedule(t=>{const i=p.getCharacterInfoById("player"),n=p.getCharacterInfoById(e.id),o={x:i.position.x+i.size.width/2-n.size.width/2,y:i.position.y+i.size.height/2-n.size.height/2};if(!i||!n)return;const l=J.subtract(o,n.position),r=J.len(l),a=n.position,c={x:t*n.moveSpeed*l.x/r,y:t*n.moveSpeed*l.y/r};a.x+=c.x,a.y+=c.y,g.setPosition(e,a)})}setRandomMove(e){const t=p.getCharacterInfoById(e.id),i=g.getSzie(e),n=[-1,1];let o=Math.floor(Math.random()*2),l=Math.floor(Math.random()*2),r=0;B.schedule(a=>{const c=t.position;o===0?c.y+=n[l]*t.moveSpeed*a*2:c.x+=n[l]*t.moveSpeed*a*2;const{width:u,height:d}=g.getWindowSize(),y=-u/2,x=u/2-i.width,M=-d/2,I=d/2-i.height;c.x>x?c.x=x:c.x<y&&(c.x=y),c.y>I?c.y=I:c.y<M&&(c.y=M),g.setPosition(e,c),r+=a,r>1&&(r=0,o=Math.floor(Math.random()*2),l=Math.floor(Math.random()*2))})}getNearestEnemy(){const e=p.getCharacterInfoById("player");let t=1/0,i;for(const n of Object.keys(this.enemyList.value))for(const o of Object.keys(this.enemyList.value[n])){const l=this.enemyList.value[n][o],r=J.distance(e.position,l.position);r<t&&(t=r,i=l)}return i}getDis(e){const{width:t,height:i}=e;return Math.sqrt((t/2)**2+(i/2)**2)}};h(qs,"instance",null);let Xi=qs;const We=Xi.getInstance(),Tu=k("div",{class:"collider",style:{width:"65px",height:"40px"}},null,-1),Au=[Tu],Du=re({__name:"smallEric",emits:["removeEnemy"],setup(s,{expose:e,emit:t}){const i=_();let n,o=new Me;e({collider:o,toggleDamageAnimation:l}),le(()=>{n=i.value,g.initElement(n);const r=p.getCharacterInfoById(n.id),{width:a,height:c}=g.getSzie(n);g.setSize(n,{width:a,height:c});const u={selfId:n.id,obstacles:["weapon"],cd:1,onColStartCb:d=>{We.checkDamage(d,n.id),Q.checkBulletPenetration(d),l(!0)}};o.init(u),o.setColliderDiffPos(-4,0),o.startDetect(),Math.random()<.1&&(r.moveSpeed+=20),Math.random()<.05&&(r.hp*=1.5),r.scheduleId=We.tracePlayer(n)});function l(r){r?(n.classList.contains("smallEric-damage")||n.classList.add("smallEric-damage"),B.scheduleOnce(()=>{n.classList.contains("smallEric-damage")&&n.classList.remove("smallEric-damage")},.3)):n.classList.contains("smallEric-damage")&&n.classList.remove("smallEric-damage")}return(r,a)=>(D(),H("i",{ref_key:"enemyRef",ref:i,class:"smallEric enemy"},Au,512))}}),Xs=class Xs{constructor(){h(this,"scheduleIdx",0);h(this,"timeCount",0);h(this,"onTimeUpdateCb",[])}static getInstance(){return this.instance===null&&(this.instance=new Xs),this.instance}startTimer(){this.stopTimer(),this.scheduleIdx=B.schedule(()=>{this.timeCount++,this.onTimeUpdate()},1)}stopTimer(){B.unschedule(this.scheduleIdx)}getTimeCount(){return this.timeCount}reset(){this.timeCount=0}registerTimeUpdate(e){this.onTimeUpdateCb.push(e)}onTimeUpdate(){for(let e=0;e<this.onTimeUpdateCb.length;e++)this.onTimeUpdateCb[e]&&this.onTimeUpdateCb[e](this.timeCount)}};h(Xs,"instance",null);let Yi=Xs;const ct=Yi.getInstance(),$u=k("div",{class:"collider",style:{width:"110px",height:"70px"}},null,-1),Wu=[$u],Uu=re({__name:"eric",emits:["removeEnemy"],setup(s,{expose:e,emit:t}){const i=_();let n,o=new Me;e({collider:o,toggleDamageAnimation:l}),le(()=>{n=i.value,g.initElement(n);const r=p.getCharacterInfoById(n.id),{width:a,height:c}=g.getSzie(n);g.setSize(n,{width:a,height:c});const u={selfId:n.id,obstacles:["weapon"],cd:1,onColStartCb:y=>{We.checkDamage(y,n.id),Q.checkBulletPenetration(y),l(!0)}};o.init(u),o.setColliderDiffPos(-10,-8),o.startDetect(),r.scheduleId=We.tracePlayer(n);const d=ct.getTimeCount();d>=360?r.hp*=2:d>=240&&(r.hp*=1.5)});function l(r){r?(n.classList.contains("eric-damage")||n.classList.add("eric-damage"),B.scheduleOnce(()=>{n.classList.contains("eric-damage")&&n.classList.remove("eric-damage")},.3)):n.classList.contains("eric-damage")&&n.classList.remove("eric-damage")}return(r,a)=>(D(),H("i",{ref_key:"enemyRef",ref:i,class:"eric enemy"},Wu,512))}}),Vu=k("div",{class:"collider",style:{width:"200px",height:"140px"}},null,-1),zu=[Vu],ju=re({__name:"bigEric",emits:["removeEnemy"],setup(s,{expose:e,emit:t}){const i=_();let n,o=new Me;e({collider:o,toggleDamageAnimation:l}),le(()=>{n=i.value,g.initElement(n);const r=p.getCharacterInfoById(n.id),{width:a,height:c}=g.getSzie(n);g.setSize(n,{width:a,height:c});const u={selfId:n.id,obstacles:["weapon"],cd:1,onColStartCb:y=>{We.checkDamage(y,n.id),Q.checkBulletPenetration(y),l(!0)}};o.init(u),o.setColliderDiffPos(-10,0),o.startDetect(),r.scheduleId=We.tracePlayer(n);const d=ct.getTimeCount();d>=360?r.hp*=2:d>=240&&(r.hp*=1.5)});function l(r){r?(n.classList.contains("bigEric-damage")||n.classList.add("bigEric-damage"),B.scheduleOnce(()=>{n.classList.contains("bigEric-damage")&&n.classList.remove("bigEric-damage")},.3)):n.classList.contains("bigEric-damage")&&n.classList.remove("bigEric-damage")}return(r,a)=>(D(),H("i",{ref_key:"enemyRef",ref:i,class:"bigEric enemy"},zu,512))}}),Hu={class:"enemyView"},Nu=re({__name:"enemy",setup(s,{expose:e}){const t=_({}),i=_({});e({removeEnemyAllAnimation:l,removeAllEnemy:o}),le(()=>{We.setEnemyList(i)});function n(r){const a=r.split("_")[0];i.value[a]&&i.value[a][r]&&We.removeEnemy(i.value[a][r])}function o(){for(const r of Object.keys(i.value))for(const a of Object.keys(i.value[r]))n(a)}function l(){var r;for(const a of Object.keys(t.value)){if(!t.value[a]){delete t.value[a];continue}(r=t.value[a])==null||r.toggleDamageAnimation()}}return(r,a)=>(D(),H("div",Hu,[(D(!0),H(te,null,ge(i.value.smallEric,(c,u)=>(D(),Be(Du,{key:u,id:c.id,style:de({left:c.position.x+"px",top:c.position.y+"px"}),ref_for:!0,ref:d=>t.value[c.id]=d,onRemoveEnemy:n},null,8,["id","style"]))),128)),(D(!0),H(te,null,ge(i.value.eric,(c,u)=>(D(),Be(Uu,{key:u,id:c.id,style:de({left:c.position.x+"px",top:c.position.y+"px"}),ref_for:!0,ref:d=>t.value[c.id]=d,onRemoveEnemy:n},null,8,["id","style"]))),128)),(D(!0),H(te,null,ge(i.value.bigEric,(c,u)=>(D(),Be(ju,{key:u,id:c.id,style:de({left:c.position.x+"px",top:c.position.y+"px"}),ref_for:!0,ref:d=>t.value[c.id]=d,onRemoveEnemy:n},null,8,["id","style"]))),128))]))}}),Fu=k("div",{class:"joystick-bg"},null,-1),Gu=k("div",{class:"joystick-stick"},null,-1),Ku=[Gu],qu=re({__name:"joystick",setup(s,{expose:e}){const t=_(),i=_(),n=_();return e({touchPanel:t,joystick:i,stick:n}),le(()=>{}),(o,l)=>(D(),H("div",{class:"touch-panel",ref_key:"touchPanel",ref:t},[k("div",{class:"joystick",ref_key:"joystick",ref:i},[Fu,k("div",{class:"joystick-stick-frame",ref_key:"stick",ref:n},Ku,512)],512)],512))}}),Xu=["id"],Yu=re({__name:"block",setup(s,{expose:e}){const t=_([]),i=_();n(),e({blocks:i}),le(async()=>{});function n(){let l=-2560,r=-2560;for(let a=0;a<4;a++){for(let c=0;c<4;c++)t.value.push({id:String(a*4+c),x:l,y:r}),l+=1280;l=-2560,r+=1280}}function o(){}return(l,r)=>(D(),H("div",{id:"blocks",ref_key:"blocks",ref:i},[(D(!0),H(te,null,ge(t.value,(a,c)=>(D(),H("i",{class:"block",key:c,id:a.id,style:de({left:a.x+"px",top:a.y+"px"}),onVnodeMounted:o},null,12,Xu))),128))],512))}}),Qu=re({__name:"dot",props:["radians"],setup(s,{expose:e}){const t=s,i=_();let n=new Me;const o=_();let l,r,a;return e({dot:i}),le(()=>{l=i.value;const c=Q.getWeaponById(l.id);let u=c.position;g.initElement(l);const{width:d,height:y}=g.getSzie(l);n.pureInit(l.id);const x=p.ItemModel.getWeaponScale(c.scale);l.style.transform=`scale(${x})`;const M=p.PlayerModel.State.position,I=p.PlayerModel.State.size;u.x=M.x+I.width/2-d/2,u.y=M.y+I.height/2-y/2;const N=t.radians;r=B.schedule($=>{try{U($)}catch{E()}});const O=c.liveTime*p.PlayerModel.State.weaponDuration;a=B.scheduleOnce(()=>{E()},O);function U($){const V={x:Math.cos(N),y:Math.sin(N)},T={x:$*c.flySpeed*V.x,y:$*c.flySpeed*V.y};u.x+=T.x,u.y+=T.y,g.setPosition(l,u)}function E(){B.unschedule(r),B.unschedule(a),Q.dot.removeBullet(l.id)}U(.04)}),nt(()=>{B.unschedule(r),B.unschedule(a),Q.dot.removeBullet(l.id)}),(c,u)=>(D(),H("i",{ref_key:"dotRef",ref:i,class:"weapon dot"},[k("div",{class:"collider",ref_key:"colliderRef",ref:o,style:{width:"60px",height:"60px"}},null,512)],512))}}),Ju=re({__name:"syuriken",props:["radians"],setup(s,{expose:e}){const t=s,i=_();let n=new Me;const o=_();let l,r,a;return e({syuriken:i}),le(()=>{l=i.value;const c=Q.getWeaponById(l.id);let u=c.position;g.initElement(l);const{width:d,height:y}=g.getSzie(l);n.pureInit(l.id);const x=p.ItemModel.getWeaponScale(c.scale);let M=0;l.style.transform=`rotate(${M}deg) scale(${x})`;const I=p.PlayerModel.State.position,N=p.PlayerModel.State.size;u.x=I.x+N.width/2-d/2,u.y=I.y+N.height/2-y/2;const O=t.radians;r=B.schedule(V=>{try{E(V)}catch{$()}});const U=c.liveTime*p.PlayerModel.State.weaponDuration;a=B.scheduleOnce(()=>{$()},U);function E(V){const T={x:Math.cos(O),y:Math.sin(O)},K={x:V*c.flySpeed*T.x,y:V*c.flySpeed*T.y};u.x+=K.x,u.y+=K.y,g.setPosition(l,u);const S=360/.5*V;M+=S,l.style.transform=`rotate(${M}deg) scale(${x})`}function $(){B.unschedule(r),B.unschedule(a),Q.syuriken.removeBullet(l.id)}E(.04)}),nt(()=>{B.unschedule(r),B.unschedule(a),Q.syuriken.removeBullet(l.id)}),(c,u)=>(D(),H("i",{ref_key:"syurikenRef",ref:i,class:"weapon syuriken"},[k("div",{class:"collider circle",ref_key:"colliderRef",ref:o,style:{width:"60px",height:"60px"}},null,512)],512))}}),Zu=re({__name:"pasta",props:["radians"],setup(s,{expose:e}){const t=s,i=_();let n=new Me;const o=_();let l,r,a;return e({}),le(()=>{l=i.value;const c=Q.getWeaponById(l.id);let u=c.position;g.initElement(l);const{width:d,height:y}=g.getSzie(l);n.pureInit(l.id);const x=p.ItemModel.getWeaponScale(c.scale);l.style.transform=`scale(${x})`,r=B.schedule($=>{try{U($)}catch{E()}});const M=c.liveTime*p.PlayerModel.State.weaponDuration;a=B.scheduleOnce(()=>{E()},M);const I=80,N=c.flySpeed*.01;let O=t.radians;function U($){const V=p.PlayerModel.State.position,T=p.PlayerModel.State.size;u.x=V.x+T.width/2,u.y=V.y+T.height/2,u.x=u.x+I*Math.cos(O)-d/2,u.y=u.y+I*Math.sin(O)-y/2,g.setPosition(l,u),O+=N*$}function E(){B.unschedule(r),B.unschedule(a),Q.pasta.removeBullet(l.id)}U(.04)}),nt(()=>{B.unschedule(r),B.unschedule(a),Q.pasta.removeBullet(l.id)}),(c,u)=>(D(),H("i",{ref_key:"pastaRef",ref:i,class:"weapon pasta"},[k("div",{class:"collider circle",ref_key:"colliderRef",ref:o,style:{width:"60px",height:"60px"}},null,512)],512))}}),eh=re({__name:"dango",props:["radians"],setup(s,{expose:e}){const t=_();let i=new Me;const n=_();let o,l,r;return e({}),le(()=>{o=t.value;const a=Q.getWeaponById(o.id);let c=a.position;g.initElement(o);const{width:u,height:d}=g.getSzie(o);i.pureInit(o.id),i.setColliderDiffPos(0,-15);const y=p.ItemModel.getWeaponScale(a.scale);l=B.schedule($=>{try{U($)}catch{E()}});const x=a.liveTime;r=B.scheduleOnce(()=>{E()},a.liveTime);const M=30;let I=0,N=0;const O=120;function U($){const V=g.angleToRadian(p.PlayerModel.State.rotate),T=g.angleToCosine(V,!0);T>0?I=g.angleToRadian(0):T<0&&(I=g.angleToRadian(180));const K=p.PlayerModel.State.position,S=p.PlayerModel.State.size;c.x=K.x+S.width/2,c.y=K.y+S.height/2,c.x=c.x+M*Math.cos(I)-u/2,c.y=c.y+M*Math.sin(I)-d/2-50,g.setPosition(o,c);const j=O/(x/$);N-=j,o.style.transform=`scale(${y}) rotateY(var(--player-hp-rotate)) rotateZ(${N}deg)`}function E(){B.unschedule(l),B.unschedule(r),Q.dango.removeBullet(o.id)}U(.04)}),nt(()=>{B.unschedule(l),B.unschedule(r),Q.dango.removeBullet(o.id)}),(a,c)=>(D(),H("i",{ref_key:"dangoRef",ref:t,class:"weapon dango"},[k("div",{class:"collider",ref_key:"colliderRef",ref:n,style:{width:"25px",height:"64px"}},null,512)],512))}}),th=k("i",{class:"flashlight"},null,-1),sh=re({__name:"flashlight",props:["radians"],setup(s,{expose:e}){const t=_(),i=_();let n=new Me;const o=_();let l,r,a,c;return e({}),le(()=>{r=t.value,a=i.value,l=o.value;const u=Q.getWeaponById(r.id);let d=u.position;g.initElement(r),g.initElement(a);const y=g.getSzie(r),x=g.getSzie(a),M={x:0,y:0};M.x=10,M.y=-(x.height-y.height)/2+1,g.setPosition(a,M);let I=p.ItemModel.getWeaponScale(u.scale);const N=1400/u.flySpeed,O=x.height*I/N/2;n.pureInit(r.id),n.setColliderDiffPos(-15,-O),a.style.transform=`scaleY(${I})`,x.width=u.flySpeed,g.setSize(a,x),l.style.borderTop=`${O}px solid transparent`,l.style.borderBottom=`${O}px solid transparent`,l.style.borderRight=`${u.flySpeed+25}px solid transparent`,l.style.width=`${u.flySpeed+25}px`,l.style.height=`${O*2}px`,c=B.schedule(V=>{try{E(V)}catch{$()}});const U=20;function E(V){const T=p.PlayerModel.State.rotate,K=g.angleToRadian(T),S=p.PlayerModel.State.position,j=p.PlayerModel.State.size;d.x=S.x+j.width/2,d.y=S.y+j.height/2,d.x=d.x+U*Math.cos(K)-y.width/2,d.y=d.y+U*Math.sin(K)-y.height/2,g.setPosition(r,d),r.style.transform=`rotateZ(${T}deg) scale(1)`}function $(){B.unschedule(c),Q.flashlight.removeBullet(r.id)}E()}),nt(()=>{B.unschedule(c),Q.flashlight.removeBullet(r.id)}),(u,d)=>(D(),H("i",{ref_key:"flashlightRef",ref:t,class:"weapon fl"},[k("div",{class:"collider triangle",ref_key:"colliderRef",ref:o},null,512),k("i",{ref_key:"flashlightBeamRef",ref:i,class:"flashlightBeam"},null,512),th],512))}}),ih=re({__name:"minesExplode",props:["radians"],setup(s,{expose:e}){const t=_();let i=new Me;const n=_();let o,l,r;return e({}),le(()=>{o=t.value;const a=Q.getWeaponById(o.id);let c=a.position;g.initElement(o);const{width:u,height:d}=g.getSzie(o);i.pureInit(o.id);const y=p.ItemModel.getWeaponScale(a.scale);o.style.transform=`scale(${y})`;const x=p.PlayerModel.State.position,M=p.PlayerModel.State.size;c.x=x.x+M.width/2-u/2,c.y=x.y+M.height/2-d/2;const I=a.liveTime;l=B.scheduleOnce(()=>{N()},I);function N(){o.style.opacity="0.8",o.style.display="block",n.value.style.display="block",r=B.scheduleOnce(()=>{o.style.opacity="0.4",O()},.099)}function O(){B.unschedule(r),Q.mines.removeBullet(o.id)}g.setPosition(o,c)}),nt(()=>{B.unschedule(l),B.unschedule(r),Q.mines.removeBullet(o.id)}),(a,c)=>(D(),H("i",{ref_key:"explodeRef",ref:t,class:"weapon explode"},[k("div",{class:"collider circle",ref_key:"colliderRef",ref:n,style:{width:"200px",height:"200px"}},null,512)],512))}}),nh=re({__name:"swordfish",props:["radians"],setup(s,{expose:e}){const t=s,i=_();let n=new Me;const o=_();let l,r,a;return e({swordfish:i}),le(()=>{l=i.value;const c=Q.getWeaponById(l.id);let u=c.position;g.initElement(l);const{width:d,height:y}=g.getSzie(l),x=t.radians;let M=g.radianToAngle(x);n.pureInit(l.id),n.setColliderDiffPos(12,0);const I=p.ItemModel.getWeaponScale(c.scale),N=g.angleToCosine(x,!0);N>0?l.style.transform=`rotateX(0deg)rotateZ(${M}deg) scale(${I})`:N<0&&(l.style.transform=`rotateX(180deg) rotateZ(${-M}deg) scale(${I})`);const O=p.PlayerModel.State.position,U=p.PlayerModel.State.size;u.x=O.x+U.width/2-d/2,u.y=O.y+U.height/2-y/2,r=B.schedule(T=>{try{$(T)}catch{V()}});const E=c.liveTime*p.PlayerModel.State.weaponDuration;a=B.scheduleOnce(()=>{V()},E);function $(T){const K={x:Math.cos(x),y:Math.sin(x)},S={x:T*c.flySpeed*K.x,y:T*c.flySpeed*K.y};u.x+=S.x,u.y+=S.y,g.setPosition(l,u)}function V(){B.unschedule(r),B.unschedule(a),Q.swordfish.removeBullet(l.id)}$(.04)}),nt(()=>{B.unschedule(r),B.unschedule(a),Q.swordfish.removeBullet(l.id)}),(c,u)=>(D(),H("i",{ref_key:"swordfishRef",ref:i,class:"weapon swordfish"},[k("div",{class:"collider",ref_key:"colliderRef",ref:o,style:{width:"275px",height:"20px"}},null,512)],512))}}),oh={class:"bulletView"},lh=re({__name:"bulletView",setup(s,{expose:e}){const t=_({}),i=_({}),n=_({}),o=_({}),l=_({}),r=_({}),a=_({});return e({}),le(()=>{Q.setVueBulletList("dot",t),Q.setVueBulletList("syuriken",i),Q.setVueBulletList("pasta",n),Q.setVueBulletList("dango",o),Q.setVueBulletList("flashlight",l),Q.setVueBulletList("mines",r),Q.setVueBulletList("swordfish",a)}),(c,u)=>(D(),H("div",oh,[(D(!0),H(te,null,ge(t.value,(d,y)=>(D(),Be(Qu,{key:y,id:d.id,style:de({left:d.position.x+"px",top:d.position.y+"px"}),radians:d.radians},null,8,["id","style","radians"]))),128)),(D(!0),H(te,null,ge(i.value,(d,y)=>(D(),Be(Ju,{key:y,id:d.id,style:de({left:d.position.x+"px",top:d.position.y+"px"}),radians:d.radians},null,8,["id","style","radians"]))),128)),(D(!0),H(te,null,ge(n.value,(d,y)=>(D(),Be(Zu,{key:y,id:d.id,style:de({left:d.position.x+"px",top:d.position.y+"px"}),radians:d.radians},null,8,["id","style","radians"]))),128)),(D(!0),H(te,null,ge(o.value,(d,y)=>(D(),Be(eh,{key:y,id:d.id,style:de({left:d.position.x+"px",top:d.position.y+"px"}),radians:d.radians},null,8,["id","style","radians"]))),128)),(D(!0),H(te,null,ge(l.value,(d,y)=>(D(),Be(sh,{key:y,id:d.id,style:de({left:d.position.x+"px",top:d.position.y+"px"}),radians:d.radians},null,8,["id","style","radians"]))),128)),(D(!0),H(te,null,ge(r.value,(d,y)=>(D(),Be(ih,{key:y,id:d.id,style:de({left:d.position.x+"px",top:d.position.y+"px"}),radians:d.radians},null,8,["id","style","radians"]))),128)),(D(!0),H(te,null,ge(a.value,(d,y)=>(D(),Be(nh,{key:y,id:d.id,style:de({left:d.position.x+"px",top:d.position.y+"px"}),radians:d.radians},null,8,["id","style","radians"]))),128))]))}});var Tt=(s=>(s[s.MENU=0]="MENU",s[s.UPGRADE=1]="UPGRADE",s[s.LEVEL_UP=2]="LEVEL_UP",s[s.GAME_OVER=3]="GAME_OVER",s[s.SETTING=4]="SETTING",s[s.MESSAGE=5]="MESSAGE",s))(Tt||{});const Ys=class Ys{constructor(){h(this,"maskList",{});h(this,"maskQueue",[]);ie.subscribe(this.handleResize.bind(this))}static getInstance(){return this.instance===null&&(this.instance=new Ys),this.instance}addMask(e,t){this.maskList[e]=t}show(e){this.maskQueue.includes(e)||(this.maskQueue.push(e),this.maskQueue.sort((t,i)=>i-t)),this.checkMaskOrder()}hide(e){this.maskQueue.includes(e)&&(this.maskList[e].style.display="none",this.maskQueue.splice(this.maskQueue.indexOf(e),1)),this.checkMaskOrder()}checkMaskOrder(){if(this.maskQueue.length>0){const e=this.maskQueue[0];if(this.maskList[e].style.display="block",this.maskQueue.length>1)for(let t=1;t<this.maskQueue.length;t++){const i=this.maskQueue[t];this.maskList[i].style.display="none"}this.handleResize()}}handleResize(){if(this.maskQueue.length>0){const e=this.maskList[this.maskQueue[0]];if(e){const t=ie.getRevertGameRatio(),i=ie.getCanvasSize(),n={x:0,y:0},o=g.getPosition(p.App);let l=g.getScaleDiffPosition(e,t,{pos:n,size:i});l=J.subtract(l,o),g.setPosition(e,l),e.style.transform=`scale(${t})`}}}};h(Ys,"instance",null);let Qi=Ys;const Ii=Qi.getInstance(),qt=re({__name:"mask",props:["maskType"],emits:["onClickMask"],setup(s,{expose:e,emit:t}){const i=s,n=t;e({show:r,hide:a});const o=_();let l;le(()=>{l=o.value,Ii.addMask(i.maskType,l),l.addEventListener("click",c)});function r(){Ii.show(i.maskType)}function a(){Ii.hide(i.maskType)}function c(){n("onClickMask")}return(u,d)=>(D(),H("div",{class:"view-mask",ref_key:"maskRef",ref:o},null,512))}}),rh=re({__name:"gameOverView",emits:["gameStart","returnMenu"],setup(s,{expose:e,emit:t}){const i=t,n=_(),o=_(),l=_(),r=_(),a=_(),c=_(),u=_();let d,y,x,M,I,N,O,U=_("");e({setTime:E,show:$,hide:V}),le(()=>{d=o.value,y=l.value,x=r.value,M=a.value,I=c.value,N=u.value,O=n.value,g.initElement(y),g.initElement(x),g.initElement(I),g.initElement(N),V(),ie.subscribe(S)});function E(){const j=ct.getTimeCount();U.value=g.secondsToTime(j)}function $(){O.show(),d.style.display="block"}function V(){O.hide(),d.style.display="none"}function T(){i("gameStart")}function K(){i("returnMenu")}function S(){const j=ie.center();let F=g.getSzie(y),R={x:F.width/2,y:F.height/2};R.x=j.x-R.x,R.y=j.y-R.y-200,g.setPosition(y,R),F=g.getSzie(x),R={x:F.width/2,y:F.height/2},R.x=j.x-R.x,R.y=j.y-R.y+25,g.setPosition(x,R),R={x:F.width/2,y:F.height/2-25},g.setPosition(M,R),F=g.getSzie(I),R={x:F.width/2,y:F.height/2},R.x=j.x-R.x-150,R.y=j.y-R.y+200,g.setPosition(I,R),F=g.getSzie(N),R={x:F.width/2,y:F.height/2},R.x=j.x-R.x+150,R.y=j.y-R.y+200,g.setPosition(N,R)}return(j,F)=>(D(),H(te,null,[ue(qt,{maskType:Ue(Tt).GAME_OVER,ref_key:"maskRef",ref:n},null,8,["maskType"]),k("div",{class:"gameOverView",ref_key:"gameOverViewRef",ref:o},[k("div",{class:"game-over-text",ref_key:"textRef",ref:l},null,512),k("div",{class:"game-over-board",ref_key:"boardRef",ref:r},[k("text",{class:"game-over-board-text",ref_key:"boardTextRef",ref:a},"TIME "+Ft(Ue(U)),513)],512),k("button",{class:"game-over-restart btn-click",ref_key:"restartRef",ref:c,onClick:T},null,512),k("button",{class:"game-over-exit btn-click",ref_key:"exitRef",ref:u,onClick:K},null,512)],512)],64))}}),ah=k("div",{class:"collider circle",style:{width:"30px",height:"30px"}},null,-1),ch=[ah],uh=re({__name:"coin",setup(s,{expose:e}){const t=_();let i=new Me;return e({element:t,collider:i}),le(()=>{let n=t.value;g.initElement(n),i.pureInit(t.value.id)}),(n,o)=>(D(),H("div",{class:"drop-coin coin",ref_key:"coinRef",ref:t},ch,512))}}),hh=k("div",{class:"collider",style:{width:"20px",height:"36px"}},null,-1),dh=[hh],fh=re({__name:"exp",setup(s,{expose:e}){const t=_();let i=new Me;return e({element:t,collider:i}),le(()=>{let n=t.value;g.initElement(n),i.pureInit(t.value.id)}),(n,o)=>(D(),H("div",{class:"drop-exp exp",ref_key:"expRef",ref:t},dh,512))}}),ph=k("div",{class:"collider circle",style:{width:"30px",height:"30px"}},null,-1),mh=[ph],gh=re({__name:"guabao",setup(s,{expose:e}){const t=_();let i=new Me;return e({element:t,collider:i}),le(()=>{let n=t.value;g.initElement(n),i.pureInit(t.value.id)}),(n,o)=>(D(),H("div",{class:"drop-guabao guabao",ref_key:"guabaoRef",ref:t},mh,512))}}),yh=k("div",{class:"collider circle",style:{width:"30px",height:"30px"}},null,-1),vh=[yh],_h=re({__name:"magnet",setup(s,{expose:e}){const t=_();let i=new Me;return e({element:t,collider:i}),le(()=>{let n=t.value;g.initElement(n),i.pureInit(t.value.id)}),(n,o)=>(D(),H("div",{class:"drop-magnet magnet",ref_key:"magnetRef",ref:t},vh,512))}}),xh={class:"dropList"},wh=re({__name:"drop",setup(s,{expose:e}){const t=_({}),i=_({});e({removeAllDrop:l}),le(()=>{it.setDropList(i),it.setDropRefs(t)});function n(r){return r<10?"coin-copper":r<100?"coin-sliver":"coin-gold"}function o(r){return r<10?"exp-white":r<50?"exp-blue":r<100?"exp-red":"exp-rainbow"}function l(){for(const r of Object.keys(i.value))for(const a of Object.keys(i.value[r]))it.removeDrop(i.value[r][a])}return(r,a)=>(D(),H("div",xh,[(D(!0),H(te,null,ge(i.value.coin,(c,u)=>(D(),Be(uh,{class:cs(n(c.value)),key:u,id:c.id,style:de({left:c.position.x+"px",top:c.position.y+"px"}),ref_for:!0,ref:d=>t.value[c.id]=d},null,8,["class","id","style"]))),128)),(D(!0),H(te,null,ge(i.value.exp,(c,u)=>(D(),Be(fh,{class:cs(o(c.value)),key:u,id:c.id,style:de({left:c.position.x+"px",top:c.position.y+"px"}),ref_for:!0,ref:d=>t.value[c.id]=d},null,8,["class","id","style"]))),128)),(D(!0),H(te,null,ge(i.value.guabao,(c,u)=>(D(),Be(gh,{key:u,id:c.id,style:de({left:c.position.x+"px",top:c.position.y+"px"}),ref_for:!0,ref:d=>t.value[c.id]=d},null,8,["id","style"]))),128)),(D(!0),H(te,null,ge(i.value.magnet,(c,u)=>(D(),Be(_h,{key:u,id:c.id,style:de({left:c.position.x+"px",top:c.position.y+"px"}),ref_for:!0,ref:d=>t.value[c.id]=d},null,8,["id","style"]))),128))]))}}),bh={weaplu_dot_1:"豆豆豆豆oh~ 我們是豆豆♪ ♫ 三八貪吃豆觀音豆頭好壯壯豆，攻擊力4",weaplu_dot_2:"攻擊力增加1",weaplu_dot_3:"子彈穿透力增加1",weaplu_dot_4:"攻擊力增加2",weaplu_dot_5:"攻擊速度增加20%，子彈飛行速度增加20%",weaplu_dot_6:"攻擊力增加3，子彈發射數量增加1",weaplu_dot_7:"攻擊力增加4",weaplu_dot_8:"攻擊力增加4，子彈飛行速度增加20%",weaplu_dot_9:"攻擊力增加7",weaplu_dot_10:"攻擊速度增加40%，子彈發射數量增加1，子彈穿透力增加1",weaplu_syuriken_1:"去xx忍者村買的手裡劍玩具，攻擊力2，無限制穿透",weaplu_syuriken_2:"攻擊力增加1",weaplu_syuriken_3:"攻擊速度增加20%，子彈發射數量增加2",weaplu_syuriken_4:"攻擊力增加1，子彈飛行速度增加20%",weaplu_syuriken_5:"攻擊速度增加20%",weaplu_syuriken_6:"子彈飛行速度增加20%",weaplu_syuriken_7:"攻擊速度增加20%",weaplu_syuriken_8:"攻擊力增加2",weaplu_syuriken_9:"攻擊速度增加20%",weaplu_syuriken_10:"攻擊力增加4，子彈飛行速度增加100%，子彈發射數量增加2",weaplu_pasta_1:"加入飛天義大利麵神教，召喚飛天義大利麵保護你，攻擊力3",weaplu_pasta_2:"攻擊力增加1，義大利麵飛行速度增加20%",weaplu_pasta_3:"攻擊力增加1，義大利麵數量增加1",weaplu_pasta_4:"攻擊力增加2，義大利麵飛行速度增加20%",weaplu_pasta_5:"攻擊力增加2，義大利麵數量增加1",weaplu_pasta_6:"攻擊力增加2，義大利麵飛行速度增加20%",weaplu_pasta_7:"攻擊力增加2，義大利麵數量增加1",weaplu_pasta_8:"攻擊力增加2，義大利麵飛行速度增加20%",weaplu_pasta_9:"攻擊力增加2，義大利麵飛行速度增加40%",weaplu_pasta_10:"攻擊力增加3，義大利麵數量增加1",weaplu_dango_1:"團子大家族，你把家族成員都串上了，攻擊力3，",weaplu_dango_2:"攻擊力增加1",weaplu_dango_3:"攻擊力增加2",weaplu_dango_4:"攻擊力增加2",weaplu_dango_5:"攻擊力增加3",weaplu_dango_6:"攻擊力增加3",weaplu_dango_7:"攻擊力增加4",weaplu_dango_8:"攻擊力增加4",weaplu_dango_9:"攻擊力增加4",weaplu_dango_10:"攻擊力增加4，增加一次打擊",weaplu_flashlight_1:"地上撿到的手電筒，用愛發電，攻擊力5",weaplu_flashlight_2:"照射距離增加50%",weaplu_flashlight_3:"照射距離增加50%",weaplu_flashlight_4:"照射距離增加50%",weaplu_flashlight_5:"攻擊力增加5，照射距離增加50%",weaplu_flashlight_6:"照射距離增加50%",weaplu_flashlight_7:"照射距離增加50%",weaplu_flashlight_8:"照射距離增加50%",weaplu_flashlight_9:"攻擊力增加5，照射距離增加50%",weaplu_flashlight_10:"照射距離增加200%",weaplu_mines_1:"瑕疵品地雷，時候到了自己會爆炸，攻擊力10",weaplu_mines_2:"爆炸範圍增加40%",weaplu_mines_3:"攻擊速度增加40%",weaplu_mines_4:"爆炸範圍增加40%",weaplu_mines_5:"攻擊力增加10，攻擊速度增加20%",weaplu_mines_6:"爆炸範圍增加40%",weaplu_mines_7:"攻擊速度增加40%",weaplu_mines_8:"爆炸範圍增加40%",weaplu_mines_9:"攻擊速度增加40%，爆炸範圍增加50%",weaplu_mines_10:"攻擊力增加10，攻擊速度增加20%",weaplu_swordfish_1:"劍魚，攻擊力1，額外增加飛行速度0.1%攻擊力",weaplu_swordfish_2:"攻擊速度增加20%，劍魚飛行速度增加40%",weaplu_swordfish_3:"攻擊速度增加20%，劍魚大小增加40%",weaplu_swordfish_4:"攻擊力增加2，劍魚飛行速度增加40%",weaplu_swordfish_5:"攻擊速度增加20%，劍魚大小增加40%",weaplu_swordfish_6:"攻擊力增加3，劍魚飛行速度增加40%",weaplu_swordfish_7:"攻擊速度增加20%，劍魚大小增加40%",weaplu_swordfish_8:"攻擊力增加4，劍魚飛行速度增加40%",weaplu_swordfish_9:"攻擊速度增加40%",weaplu_swordfish_10:"攻擊力增加5，劍魚飛行速度增加40%"},Ch={itemlu_book_0:"XX雜誌，增加武器大小，增加 {0}% 武器大小",itemlu_book_1:"下級增加 {0}% 武器大小",itemlu_perfume_0:"你媽用的Dior香水，增加 {0}% 撿取範圍",itemlu_perfume_1:"下級增加 {0}% 撿取範圍",itemlu_running_0:"你努力的每天早起慢跑，增加 {0} 生命值上限",itemlu_running_1:"下級增加 {0} 生命值上限",itemlu_shield_0:"路上撿到的盾牌，增加傷害減免，增加 {0}% 傷害減免",itemlu_shield_1:"下級增加 {0}% 傷害減免",itemlu_shoes_0:"你媽買給你的新鞋，增加移動速度，增加 {0}% 移動速度",itemlu_shoes_1:"下級增加 {0}% 移動速度",itemlu_beer_0:"處長找你去喝酒，增加 {0}% 攻擊力，減少 {1}% 移動速度",itemlu_beer_1:"下級增加 {0}% 攻擊力，減少 {1}% 移動速度",itemlu_energyDrink_0:"龍爪能量飲料，給你一對雞翅膀，增加 {0}% 攻擊速度，增加 {1}% 移動速度",itemlu_energyDrink_1:"下級增加 {0}% 攻擊速度，增加 {1}% 移動速度",itemlu_turtleBlood_0:"不彈跳甲魚血滋陰潛陽，增加 {0} 發子彈發射數量",itemlu_turtleBlood_1:"下級增加 {0} 發子彈發射數量"},kh={uptip_howto:"左鍵點擊屬性進行升級，右鍵點擊屬性進行降級",uptip_hp:"增加 n 生命值",uptip_healthRegen:"每10秒 n% 自然回復",uptip_defense:"增加 n% 傷害減免",uptip_moveSpeed:"增加 n% 移動速度",uptip_attack:"增加 n% 攻擊力",uptip_attackSpeed:"增加 n% 攻擊速度",uptip_criticalChance:"增加 n% 爆擊機率",uptip_criticalDamage:"增加 n% 爆擊傷害",uptip_pickUpRange:"增加 n 撿取範圍",uptip_coinFound:"增加 n% 獲取金幣",uptip_experience:"增加 n 獲取經驗值",uptip_refreshEquipment:"遊戲進行中玩家升級時，可重骰裝備列表 n 次",uptip_dropEquipment:"遊戲進行中玩家升級時，可刪除所選裝備 n 次 (遊戲中將不會再出現此裝備)",uptip_rest:"確定要重置所有等級嗎?"},Ih={...kh,...bh,...Ch};function Sh(s,e){let t=Ih[s];return t?(e&&(t=Ul(t,e)),t):(console.error(`can't find string with ${s}`),"undefined")}function Ul(s,e){if(Array.isArray(e))for(let t=0;t<e.length;t++)s=s.replace(`{${t}}`,e[t]);else for(const t of Object.keys(e))s=s.replace(`{${t}}`,e[t]);return s}const Ht={getString:Sh,setStringValue:Ul},Lh=""+new URL("dot-C9KTYmcq.png",import.meta.url).href,Rh=""+new URL("syuriken-vwR-9Muj.png",import.meta.url).href,Ph=""+new URL("pasta-DGmt0TwQ.png",import.meta.url).href,Mh=""+new URL("dango-XkXAgzVa.png",import.meta.url).href,Eh=""+new URL("flashlight-DWSk0Bj6.png",import.meta.url).href,Bh=""+new URL("flashlightBeam-CL58ePhg.png",import.meta.url).href,Oh=""+new URL("mines-Btgg2DsU.png",import.meta.url).href,Th=""+new URL("explode-BCvUBcdf.png",import.meta.url).href,Ah=""+new URL("swordfish-x3cAAcjV.png",import.meta.url).href,Dh=""+new URL("btn-C7Z7YDAD.png",import.meta.url).href,$h=""+new URL("book-_QuOgPBm.png",import.meta.url).href,Wh=""+new URL("perfume-Dv8wlFS1.png",import.meta.url).href,Uh=""+new URL("running-OA5yisZ-.png",import.meta.url).href,Vh=""+new URL("shield-CHnJg60B.png",import.meta.url).href,zh=""+new URL("shoes-B3rPp_lb.png",import.meta.url).href,jh=""+new URL("beer-gvuuz0WB.png",import.meta.url).href,Hh=""+new URL("energyDrink-Xe_HXWGZ.png",import.meta.url).href,Nh=""+new URL("turtleBlood-Dfua-nBN.png",import.meta.url).href,Fh=""+new URL("weapon-D7WBcBfg.png",import.meta.url).href,Gh=""+new URL("item-BrKk0o_F.png",import.meta.url).href,Kh=""+new URL("itemFrame-CELK0J7z.png",import.meta.url).href,Wt={default:`url("${Fh}")`,dot:`url("${Lh}")`,syuriken:`url("${Rh}")`,pasta:`url("${Ph}")`,dango:`url("${Mh}")`,flashlight:`url("${Eh}")`,flashlightBeam:`url("${Bh}")`,mines:`url("${Oh}")`,explode:`url("${Th}")`,swordfish:`url("${Ah}")`},as={default:`url("${Gh}")`,book:`url("${$h}")`,perfume:`url("${Wh}")`,running:`url("${Uh}")`,shield:`url("${Vh}")`,shoes:`url("${zh}")`,beer:`url("${jh}")`,energyDrink:`url("${Hh}")`,turtleBlood:`url("${Nh}")`},Re={...Wt,...as,itemFrameImg:Kh,btnImg:Dh},qh={fontSize:"28px",textAlign:"justify",alignItems:"start",justifyContent:"start",color:"whitesmoke"},Qs=class Qs{constructor(){h(this,"messageView");h(this,"frame");h(this,"title");h(this,"text");h(this,"mask");h(this,"okBtn");h(this,"cancelBtn")}static getInstance(){return this.instance===null&&(this.instance=new Qs),this.instance}init(e,t,i,n,o,l,r){this.messageView=e,this.frame=t,this.title=i,this.text=n,this.mask=o,this.okBtn=l,this.cancelBtn=r,ie.subscribe(this.handleResize.bind(this))}onOkBtnClick(e){this.okBtn.onclick=()=>{this.hide(),e.bind}}show(e,t=""){if(this.setStyle(this.text,qh),typeof e=="object"){let{isOk:i,isCancel:n,okCb:o,cancelCb:l,textStyle:r}=e;r&&this.setStyle(this.text,r),i??(i=!!o),n??(n=!!l),t=e.text,e=e.title,this.okBtn.style.display=i?"inline-block":"none",i&&(this.okBtn.onclick=o||this.defaultCallback.bind(this)),this.cancelBtn.style.display=n?"inline-block":"none",n&&(this.cancelBtn.onclick=l||this.defaultCallback.bind(this))}else this.okBtn.style.display="inline-block",this.cancelBtn.style.display="none",this.okBtn.onclick=this.defaultCallback.bind(this);this.mask.show(),this.messageView.style.display="block",this.title.innerHTML=e,this.text.innerHTML=t}hide(){this.mask.hide(),this.messageView.style.display="none"}defaultCallback(){this.hide()}handleResize(){const e=g.getSzie(this.frame),t={x:e.width/2,y:e.height/2};t.x=ie.centerX()-t.x,t.y=ie.centerY()-t.y+30,g.setPosition(this.messageView,t)}setStyle(e,t){for(let i in t)e.style[i]=t[i]}};h(Qs,"instance",null);let Ji=Qs;const Se=Ji.getInstance(),Eo=6;class Xh{constructor(){h(this,"levelUpView");h(this,"frame");h(this,"arrow");h(this,"removeBtnRef");h(this,"refreshBtnRef");h(this,"bgList");h(this,"itemImgList");h(this,"textList");h(this,"hoverList");h(this,"btnList",[]);h(this,"levelBoxList",{});h(this,"typeList",{});h(this,"removeMode",!1)}init(e,t,i,n,o,l,r,a,c){this.levelUpView=e,this.frame=t,this.arrow=i,this.removeBtnRef=n,this.refreshBtnRef=o,this.bgList=l,this.itemImgList=r,this.textList=a,this.hoverList=c,g.initElement(this.removeBtnRef),g.initElement(this.refreshBtnRef),this.setHoverEvent(),this.reset(),ie.subscribe(this.handleResize.bind(this)),window.addEventListener("keydown",u=>{u.key==="l"&&this.levelUpWeapon("mines")})}setRemoveMode(e){this.removeMode=e}onLevelUp(){this.showBgColor("btn1");const e=this.getRamdomEquipment(4);if(e.length<4)for(let t=0;t<4-e.length;t++)e.push("empty");for(let t=0;t<4;t++)this.setLevelBox(e[t],t);this.checkToolBtn()}onBtnClick(e,t){this.typeList[e]&&(this.removeMode?Se.show({title:"確認",text:"確定要刪除該裝備嗎?",isOk:!0,isCancel:!0,textStyle:{fontSize:"40px",alignItems:"center",justifyContent:"center",color:"red"},okCb:()=>{p.PlayerModel.DropCount--,Se.hide(),this.removeMode=!1,this.onRemoveBtnClick(e),t()}}):(Bs(this.typeList[e])?this.levelUpWeapon(this.typeList[e]):ki(this.typeList[e])&&this.levelUpItem(this.typeList[e]),t(this.typeList[e])))}onRefreshBtnClick(){p.PlayerModel.RefreshCount--,this.onLevelUp()}onRemoveBtnClick(e){Bs(this.typeList[e])?p.WeaponModel.addRemeveList(this.typeList[e]):ki(this.typeList[e])&&p.ItemModel.addRemeveList(this.typeList[e])}getType(e){return this.typeList[e]}reset(){const e=this.bgList.value;this.showBgColor(Object.values(e)[0].id)}handleResize(){const e=g.getSzie(this.frame),t={x:e.width/2,y:e.height/2};t.x=ie.centerX()-t.x,t.y=ie.centerY()-t.y+30,g.setPosition(this.levelUpView,t)}get RemoveMode(){return this.removeMode}setLevelBox(e,t){const i=`btn${t+1}`;if(Bs(e)){const n=p.WeaponModel.WeaponLevelInfo[e]+1;let o=Ht.getString(`weaplu_${e}_${n}`);this.itemImgList.value[i].style.backgroundImage=Wt[e],this.textList.value[i].innerHTML=o}else if(ki(e)){const n=p.ItemModel.ItemLevelInfo[e],o=n+1,l=Uc(e);let r=[];for(let u=0;u<l.length;u++)r.push(l[u][o]);let a=n>0?1:0,c=Ht.getString(`itemlu_${e}_${a}`);this.itemImgList.value[i].style.backgroundImage=as[e],this.textList.value[i].innerHTML=Ht.setStringValue(c,r)}else this.itemImgList.value[i].style.backgroundImage="",this.textList.value[i].innerHTML="";this.typeList[i]=e}levelUpWeapon(e){const t=ss[e].maxLevel,i=p.WeaponModel.WeaponLevelInfo;i[e]<t&&i[e]++,Q[e].onLevelUp()}levelUpItem(e){const t=gt[e].maxLevel,i=p.ItemModel.ItemLevelInfo;i[e]<t&&i[e]++,p.PlayerModel.updateStateByItem(e)}getRamdomEquipment(e=1){const t=[],i=[],n=p.ItemModel.getItemCount(),o=p.WeaponModel.getWeaponCount(),l=p.ItemModel.getCanLevelUpItem(n>=Eo),r=p.WeaponModel.getCanLevelUpWeapon(o>=Eo);i.push(...l,...r);for(let a=0;a<e;a++){const c=Math.floor(Math.random()*i.length);t.push(i[c]),i.splice(c,1)}return t}showBgColor(e){const t=this.bgList.value;for(const i in t){const n=t[i];i===e?this.removeMode?(n.classList.add("levelUp-remove-bg-light"),n.classList.remove("levelUp-bg-light")):(n.classList.add("levelUp-bg-light"),n.classList.remove("levelUp-remove-bg-light")):(n.classList.remove("levelUp-bg-light"),n.classList.remove("levelUp-remove-bg-light"))}this.setArrowPos(t[e],{x:-115,y:-60})}hideAllBgColor(){const e=this.bgList.value;for(const t in e){const i=e[t];i.classList.remove("levelUp-bg-light"),i.classList.remove("levelUp-remove-bg-light")}}setArrowPos(e,t={x:0,y:0},i=.4){const n=g.getPosition(e);n.x+=t.x,n.y+=t.y,this.arrow.style.transform=`scale(${i})`,g.setPosition(this.arrow,n)}setHoverEvent(){const e=this.hoverList.value;for(const t in e)e[t].addEventListener("pointerover",n=>{const o=n.target;this.showBgColor(o.id)});this.removeBtnRef.addEventListener("pointerover",t=>{const i=t.target;this.hideAllBgColor(),this.setArrowPos(i,{x:-50,y:0},.25)}),this.refreshBtnRef.addEventListener("pointerover",t=>{if(this.removeMode)return;const i=t.target;this.hideAllBgColor(),this.setArrowPos(i,{x:-45,y:0},.25)})}checkToolBtn(){p.PlayerModel.RefreshCount>0?this.refreshBtnRef.style.filter="none":this.refreshBtnRef.style.filter="grayscale(100%)",p.PlayerModel.DropCount>0?this.removeBtnRef.style.filter="none":this.removeBtnRef.style.filter="grayscale(100%)"}}const Yh={btn1:{id:"btn1",img:`url("${Re.btnImg}")`,x:0,y:15},btn2:{id:"btn2",img:`url("${Re.btnImg}")`,x:0,y:105},btn3:{id:"btn3",img:`url("${Re.btnImg}")`,x:0,y:195},btn4:{id:"btn4",img:`url("${Re.btnImg}")`,x:0,y:285}},Qh={bg1:{id:"btn1",x:15,y:25},bg2:{id:"btn2",x:15,y:115},bg3:{id:"btn3",x:15,y:205},bg4:{id:"btn4",x:15,y:295}},Jh={label1:{id:"btn1",x:90,y:25},label2:{id:"btn2",x:90,y:115},label3:{id:"btn3",x:90,y:205},label4:{id:"btn4",x:90,y:295}},Zh=["id"],ed=["id"],td=["id","onClick"],sd=re({__name:"levelUpView",emits:["onEquipmentBtnClick"],setup(s,{expose:e,emit:t}){const i=t,n=_(),o=_(),l=_(),r=_(),a=_(),c=_(),u=_(Yh),d=_(Qh),y=_(Jh),x=_({}),M=_({}),I=_({}),N=_({});let O,U;const E=new Xh;e({show:$,hide:V}),le(()=>{U=o.value,O=n.value;const j=l.value;g.initElement(j),E.init(U,j,r.value,a.value,c.value,x,M,I,N)});function $(){E.onLevelUp(),O.show(),U.style.display="block"}function V(){O.hide(),U.style.display="none"}function T(j){E.onBtnClick(j,F=>{i("onEquipmentBtnClick",F)})}function K(){p.PlayerModel.RefreshCount<=0||E.RemoveMode||Se.show({title:"確認",text:"確定要重骰裝備列表嗎?",isOk:!0,isCancel:!0,textStyle:{fontSize:"40px",alignItems:"center",justifyContent:"center",color:"red"},okCb:()=>{Se.hide(),E.onRefreshBtnClick()}})}function S(){p.PlayerModel.DropCount<=0||E.setRemoveMode(!E.RemoveMode)}return(j,F)=>(D(),H(te,null,[ue(qt,{maskType:Ue(Tt).LEVEL_UP,ref_key:"maskRef",ref:n},null,8,["maskType"]),k("div",{class:"levelUpView",ref_key:"levelUpViewRef",ref:o},[k("div",{class:"levelUp-frame",ref_key:"frameRef",ref:l},null,512),k("div",{class:"levelUp-remove-btn btn-click",ref_key:"removeBtnRef",ref:a,onClick:rt(S,["stop"])},null,512),k("div",{class:"levelUp-refresh-btn btn-click",ref_key:"refreshBtnRef",ref:c,onClick:rt(K,["stop"])},null,512),(D(!0),H(te,null,ge(d.value,(R,xe)=>(D(),H("div",{class:"levelUp-btn-container",id:R.id,style:de({left:R.x+"px",top:R.y+"px"}),ref_for:!0,ref:fe=>x.value[R.id]=fe},null,12,Zh))),256)),(D(!0),H(te,null,ge(u.value,(R,xe)=>(D(),H("div",{class:"levelUp-btn",id:R.id,style:de({backgroundImage:R.img,left:R.x+"px",top:R.y+"px"})},[k("div",{class:"levelUp-item-img",ref_for:!0,ref:fe=>M.value[R.id]=fe},null,512)],12,ed))),256)),(D(!0),H(te,null,ge(y.value,(R,xe)=>(D(),H("div",{class:"levelUp-text",style:de({left:R.x+"px",top:R.y+"px"}),ref_for:!0,ref:fe=>I.value[R.id]=fe},null,4))),256)),(D(!0),H(te,null,ge(d.value,(R,xe)=>(D(),H("button",{class:"levelUp-btn-container",id:R.id,style:de({left:R.x+"px",top:R.y+"px"}),ref_for:!0,ref:fe=>N.value[R.id]=fe,onClick:rt(fe=>T(R.id),["stop"])},null,12,td))),256)),k("div",{class:"levelUp-bg-arrow",ref_key:"arrowRef",ref:r},null,512)],512)],64))}}),id={weapon1:{id:"weapon1",img:`url("${Re.itemFrameImg}")`,x:105,y:44},weapon2:{id:"weapon2",img:`url("${Re.itemFrameImg}")`,x:140,y:44},weapon3:{id:"weapon3",img:`url("${Re.itemFrameImg}")`,x:175,y:44},weapon4:{id:"weapon4",img:`url("${Re.itemFrameImg}")`,x:210,y:44},weapon5:{id:"weapon5",img:`url("${Re.itemFrameImg}")`,x:245,y:44},weapon6:{id:"weapon6",img:`url("${Re.itemFrameImg}")`,x:280,y:44}},Bo={item1:{id:"item1",img:`url("${Re.itemFrameImg}")`,x:105,y:79},item2:{id:"item2",img:`url("${Re.itemFrameImg}")`,x:140,y:79},item3:{id:"item3",img:`url("${Re.itemFrameImg}")`,x:175,y:79},item4:{id:"item4",img:`url("${Re.itemFrameImg}")`,x:210,y:79},item5:{id:"item5",img:`url("${Re.itemFrameImg}")`,x:245,y:79},item6:{id:"item6",img:`url("${Re.itemFrameImg}")`,x:280,y:79}},Oo=6;class nd{constructor(){h(this,"playerInfoView");h(this,"weaponList");h(this,"itemList");h(this,"list",[]);h(this,"curWeaponIdx",1);h(this,"curItemIdx",0)}init(e,t,i){this.playerInfoView=e,this.weaponList=t,this.itemList=i,ie.subscribe(this.handleResize.bind(this))}setDefaultImg(){this.list=[zi],this.curWeaponIdx=1,this.curItemIdx=0;for(const e of Object.keys(this.weaponList.value))e==="weapon1"?this.setWeaponImage(e,Wt[zi]):this.setWeaponImage(e,Wt.default);for(const e of Object.keys(this.itemList.value))this.setItemImage(e,as.default)}setWeaponImage(e,t){const n=this.weaponList.value[e].getElementsByClassName("playerInfo-weapon")[0];n.style.backgroundImage=t,n.style.opacity=t===Wt.default?"0.7":"1"}setItemImage(e,t){const n=this.itemList.value[e].getElementsByClassName("playerInfo-item")[0];n.style.backgroundImage=t,n.style.opacity=t===as.default?"0.7":"1"}addWeapon(e){if(this.list.includes(e)||this.curWeaponIdx+1>Oo)return;this.list.push(e),this.curWeaponIdx++;const t=`weapon${this.curWeaponIdx}`;this.setWeaponImage(t,Wt[e])}addItem(e){if(this.list.includes(e)||this.curItemIdx+1>Oo)return;this.list.push(e),this.curItemIdx++;const t=`item${this.curItemIdx}`;this.setItemImage(t,as[e])}handleResize(){const e={x:ie.left(),y:ie.top()};g.setPosition(this.playerInfoView,e)}}const od=k("div",{class:"playerInfo-head"},null,-1),ld=k("div",{class:"playerInfo-head-frame"},null,-1),rd={class:"playerInfo-hp"},ad=k("div",{class:"playerInfo-item-frame",style:{left:"105px",top:"44px"}},null,-1),cd=k("div",{class:"playerInfo-item-frame",style:{left:"105px",top:"79px"}},null,-1),ud=["id"],hd=k("div",{class:"playerInfo-weapon"},null,-1),dd=[hd],fd=["id"],pd=k("div",{class:"playerInfo-item"},null,-1),md=[pd],gd={class:"experience-bar"},yd={class:"gameView-coin",ref:"coinRef"},vd={class:"gameView-coin-label"},_d=k("div",{class:"gameView-timer-label"},"Time",-1),xd={class:"gameView-timer-time"},wd=re({__name:"playerInfoView",emits:["onLevelUp"],setup(s,{expose:e,emit:t}){const i=t,n=_(),o=_(),l=_(),r=_(),a=_(p.PlayerModel.GameCoin),c=_(id);_(Bo);const u=_({}),d=_({});let y,x,M=_(g.secondsToTime(0));const I=new nd;e({updateCoin:O,show:U,hide:E,reset:$,addEquipment:V,hpBar:r}),le(()=>{y=n.value,x=o.value,r.value,I.init(y,u,d),Wl.init(x,i.bind(null,"onLevelUp")),ct.registerTimeUpdate(N)});function N(T){M.value=g.secondsToTime(T)}function O(T){a.value=T}function U(){y.style.display="block"}function E(){y.style.display="none"}function $(){I.setDefaultImg(),a.value=0,x.style.width="100%",M.value=g.secondsToTime(0)}function V(T){Bs(T)?I.addWeapon(T):I.addItem(T)}return(T,K)=>(D(),H("div",{class:"playerInfoView",ref_key:"playerInfoViewRef",ref:n},[od,ld,k("div",rd,[k("div",{class:"playerInfo-hp-bar",ref_key:"hpBarRef",ref:r},null,512)]),ad,cd,(D(!0),H(te,null,ge(c.value,(S,j)=>(D(),H("div",{class:"playerInfo-item-frame",id:S.id,style:de({backgroundImage:S.img,left:S.x+"px",top:S.y+"px"}),ref_for:!0,ref:F=>u.value[S.id]=F},dd,12,ud))),256)),(D(!0),H(te,null,ge(Ue(Bo),(S,j)=>(D(),H("div",{class:"playerInfo-item-frame",id:S.id,style:de({backgroundImage:S.img,left:S.x+"px",top:S.y+"px"}),ref_for:!0,ref:F=>d.value[S.id]=F},md,12,fd))),256)),k("div",gd,[k("div",{class:"experience-mask",ref_key:"experienceRef",ref:o},null,512)]),k("div",{class:"gameView-coin-container",ref_key:"coinContainerRef",ref:l},[k("div",yd,null,512),k("div",vd,Ft(a.value),1)],512),_d,k("div",xd,Ft(Ue(M)),1)],512))}}),bd=re({__name:"mines",setup(s,{expose:e}){const t=_();let i,n;return e({}),le(()=>{i=t.value;const o=i.id.split("b")[0],l=Q.mines.getMinesInfo(o);let r=l.position;g.initElement(i);const{width:a,height:c}=g.getSzie(i),u=p.PlayerModel.State.position,d=p.PlayerModel.State.size;r.x=u.x+d.width/2-a/2,r.y=u.y+d.height/2-c/2;const y=l.liveTime;n=B.scheduleOnce(()=>{x()},y);function x(){B.unschedule(n),i.style.display="none"}g.setPosition(i,r)}),nt(()=>{B.unschedule(n),Q.mines.removeBullet(i.id)}),(o,l)=>(D(),H("i",{ref_key:"minesRef",ref:t,class:"mines"},null,512))}}),Cd={class:"bulletBottomView"},kd=re({__name:"bulletBottomView",setup(s,{expose:e}){const t=_({});return e({}),le(()=>{Q.mines.setVueMinesList(t)}),(i,n)=>(D(),H("div",Cd,[(D(!0),H(te,null,ge(t.value,(o,l)=>(D(),Be(bd,{key:l,id:o.id+"b",style:de({left:o.position.x+"px",top:o.position.y+"px"})},null,8,["id","style"]))),128))]))}});function Id(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ci={exports:{}};ci.exports=In;ci.exports.isMobile=In;ci.exports.default=In;const Sd=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,Ld=/CrOS/,Rd=/android|ipad|playbook|silk/i;function In(s){s||(s={});let e=s.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;let t=Sd.test(e)&&!Ld.test(e)||!!s.tablet&&Rd.test(e);return!t&&s.tablet&&s.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(t=!0),t}var Pd=ci.exports;const Md=Id(Pd),ee={None:-1,ArrowUp:0,ArrowDown:1,ArrowLeft:2,ArrowRight:3,KeyW:4,KeyS:5,KeyA:6,KeyD:7};class Ed{constructor(e,t){h(this,"player");h(this,"arrow");h(this,"playerWidth");h(this,"playerHeight");h(this,"playerDirection",1);h(this,"direction");h(this,"isMove",!1);h(this,"keysPressed",{});this.player=e,this.arrow=t;const{width:i,height:n}=g.getSzie(this.player);this.playerWidth=i??0,this.playerHeight=n??0,this.direction=ee.None,this.registerClickEvent(),B.schedule(this.onUpdate.bind(this))}reset(){this.checkMove(0)}registerClickEvent(){window.addEventListener("keydown",e=>{if(p.IsPause){this.onCheckPause();return}this.checkConflict(e.code),isNaN(Number(e.code))&&e.code in ee?(this.direction=this.checkDirection(e.code),this.keysPressed[this.direction]||(this.keysPressed[this.direction]=!0,this.toggleAnimation(!0))):this.direction=ee.None}),window.addEventListener("keyup",e=>{if(p.IsPause){this.onCheckPause();return}this.direction=this.checkDirection(e.code),this.direction!==ee.None&&(delete this.keysPressed[this.direction],Object.keys(this.keysPressed).length===0&&this.toggleAnimation(!1))}),window.addEventListener("mousemove",e=>{if(p.IsPause){this.onCheckPause();return}let t=p.PlayerModel.State.position;t=J.add(t,{x:this.playerWidth/2,y:this.playerHeight/2});let i=p.getMapPosition();i=J.add(i,{x:this.playerWidth/2,y:this.playerHeight/2});let n={x:e.clientX,y:e.clientY};n=J.subtract(n,i),n=J.add(n,{x:this.playerWidth/2,y:this.playerHeight/2});const o=J.subtract(n,t);this.playerDirection=o.x>0?-1:1;const l=Math.atan2(o.y,o.x);let r=g.radianToAngle(l);p.PlayerModel.State.rotate=r,r*=this.playerDirection;const a=J.normalize(o);let c=J.multiplyScalar(a,100);c.x!=0&&c.y!=0&&(c.x*=this.playerDirection,c.y-=15,g.setPosition(this.arrow,c),o.x>0?(document.documentElement.style.setProperty("--player-hp-rotate","180deg"),this.arrow.style.transform=`rotateZ(${r}deg) rotateY(180deg)`,this.player.style.transform="rotateY(180deg)"):o.x<0?(document.documentElement.style.setProperty("--player-hp-rotate","0deg"),this.arrow.style.transform=`rotateZ(${r}deg) rotateY(0deg)`,this.player.style.transform="rotateY(0deg)"):this.arrow.style.transform=`rotateZ(${r}deg)`)})}onCheckPause(){this.keysPressed={},this.direction=ee.None}checkDirection(e){let t=-1,i;switch(typeof e=="number"?i=e:i=ee[e],i){case ee.ArrowUp:case ee.KeyW:t=ee.ArrowUp;break;case ee.ArrowDown:case ee.KeyS:t=ee.ArrowDown;break;case ee.ArrowLeft:case ee.KeyA:t=ee.ArrowLeft;break;case ee.ArrowRight:case ee.KeyD:t=ee.ArrowRight;break}return t}checkConflict(e){let t=ee[e],i=!1;switch(t){case ee.ArrowUp:case ee.KeyW:this.keysPressed[ee.ArrowDown]&&(delete this.keysPressed[ee.ArrowDown],this.triggerKeyEvent("ArrowDown","keyup"),i=!0);break;case ee.ArrowDown:case ee.KeyS:this.keysPressed[ee.ArrowUp]&&(delete this.keysPressed[ee.ArrowUp],this.triggerKeyEvent("ArrowUp","keyup"),i=!0);break;case ee.ArrowLeft:case ee.KeyA:this.keysPressed[ee.ArrowRight]&&(delete this.keysPressed[ee.ArrowRight],this.triggerKeyEvent("ArrowRight","keyup"),i=!0);break;case ee.ArrowRight:case ee.KeyD:this.keysPressed[ee.ArrowLeft]&&(delete this.keysPressed[ee.ArrowLeft],this.triggerKeyEvent("ArrowLeft","keyup"),i=!0);break}return i}toggleAnimation(e){e?this.player.classList.contains("cat-animate")||this.player.classList.add("cat-animate"):this.player.classList.contains("cat-animate")&&this.player.classList.remove("cat-animate"),this.isMove=e}triggerKeyEvent(e,t){const i=new KeyboardEvent(t,{key:e});window.dispatchEvent(i)}onUpdate(e){this.isMove&&this.checkMove(e)}checkMove(e){const t=p.PlayerModel.State.position,i=p.getMapPosition();this.keysPressed[ee.ArrowUp]&&(t.y-=this.moveSpeed*e),this.keysPressed[ee.ArrowDown]&&(t.y+=this.moveSpeed*e),this.keysPressed[ee.ArrowLeft]&&(t.x-=this.moveSpeed*e),this.keysPressed[ee.ArrowRight]&&(t.x+=this.moveSpeed*e);const{width:n,height:o}=g.getWindowSize(),l=n-this.playerWidth,r=o-this.playerHeight;i.x=-t.x+(l+this.playerWidth)/2,i.y=-t.y+(r+this.playerHeight)/2,p.setMapPosition(i),g.setPosition(this.player,t),document.documentElement.style.setProperty("--player-left",`${t.x}px`),document.documentElement.style.setProperty("--player-top",`${t.y}px`)}get moveSpeed(){let t=p.PlayerModel.State.baseMoveSpeed*p.PlayerModel.State.moveSpeed;return Object.keys(this.keysPressed).length>1&&(t*=Math.sqrt(.5)),t<0&&(t=10),t}}class Bd{constructor(e,t,i,n,o){h(this,"player");h(this,"arrow");h(this,"playerWidth");h(this,"playerHeight");h(this,"playerDirection",1);h(this,"touchPanel");h(this,"joystick");h(this,"stick");h(this,"radius",70);h(this,"isDymatic",!0);h(this,"touchPos",{x:0,y:0});h(this,"movePos",{x:0,y:0});h(this,"isPrssed",!1);h(this,"isToggle",!1);h(this,"scheduleId");this.player=e,this.arrow=o;const{width:l,height:r}=g.getSzie(this.player);this.playerWidth=l??0,this.playerHeight=r??0,this.touchPanel=t,this.joystick=i,this.stick=n,this.onUpdate=this.onUpdate.bind(this),this.setTouchEvent(),this.touchPanel.style.display="block"}reset(){this.touchPos={x:0,y:0},this.movePos={x:-1,y:0},this.checkMove(0)}setBg(e,t){if(this.joystick.style.display=e?"inline-block":"none",e&&t){const i=ie.getRevertGameRatio();t=J.convertToGameViewPos(t,i),g.setPosition(this.joystick,t)}}setStickPos(e){const t=ie.getRevertGameRatio(),i=J.convertToGameViewPos(e,t),n=g.getPosition(this.joystick),o=J.subtract(i,n),l=J.distance(n,i);let r;if(l<this.radius)g.setPosition(this.stick,o);else if(this.isDymatic&&l>this.radius+5){const a=J.vector(o,g.getPosition(this.stick)),c=J.subtract(n,a);return g.setPosition(this.joystick,c),r=c,r}else{const a=J.normalize(o),c=J.multiplyScalar(a,this.radius);g.setPosition(this.stick,c)}}toggleAnimation(e){e?this.player.classList.contains("cat-animate")||this.player.classList.add("cat-animate"):this.player.classList.contains("cat-animate")&&this.player.classList.remove("cat-animate")}setTouchEvent(){this.touchPanel.addEventListener("touchstart",e=>{if(p.IsPause)return;e.preventDefault();const t=ie.getRevertGameRatio(),i={x:e.touches[0].clientX,y:e.touches[0].clientY};this.isPrssed=!0,this.setBg(!0,i),this.setStickPos(i);const n=J.convertToGameViewPos(i,t);this.touchPos=n,this.movePos=n}),this.touchPanel.addEventListener("touchmove",e=>{if(!p.IsPause&&(e.preventDefault(),this.isPrssed)){const t=ie.getRevertGameRatio(),i={x:e.touches[0].clientX,y:e.touches[0].clientY};this.movePos=J.convertToGameViewPos(i,t);const n=this.setStickPos(i);this.touchPos=n??this.touchPos,this.isToggle||(this.toggleAnimation(!0),this.isToggle=!0),this.scheduleId&&B.unschedule(this.scheduleId),this.scheduleId=B.schedule(this.onUpdate)}}),this.touchPanel.addEventListener("touchend",e=>{p.IsPause||(e.preventDefault(),this.isPrssed&&(this.isPrssed=!1,this.isToggle=!1,this.setBg(!1),this.toggleAnimation(!1),B.unschedule(this.scheduleId)))})}onUpdate(e){this.checkMove(e)}checkMove(e){const t=p.PlayerModel.State.position,i=p.getMapPosition(),n=J.subtract(this.movePos,this.touchPos),o=J.len(n),l={x:e*this.moveSpeed*n.x/o||0,y:e*this.moveSpeed*n.y/o||0};this.playerDirection=n.x>0?-1:1;const r=Math.atan2(n.y,n.x);let a=g.radianToAngle(r);p.PlayerModel.State.rotate=a,a*=this.playerDirection;const c=J.normalize(n);let u=J.multiplyScalar(c,100);u.x*=this.playerDirection,u.y-=15,g.setPosition(this.arrow,u),l.x>0?(this.arrow.style.transform=`rotateZ(${a}deg) rotateY(180deg)`,this.player.style.transform="rotateY(180deg)"):l.x<0?(this.arrow.style.transform=`rotateZ(${a}deg) rotateY(0deg)`,this.player.style.transform="rotateY(0deg)"):(this.arrow.style.transform=`rotateZ(${a}deg)`,this.player.style.transform="rotateY(0deg)"),t.x+=l.x,t.y+=l.y;const{width:d,height:y}=g.getWindowSize(),x=d-this.playerWidth,M=y-this.playerHeight;i.x=-t.x+(x+this.playerWidth)/2,i.y=-t.y+(M+this.playerHeight)/2,p.setMapPosition(i),g.setPosition(this.player,t)}get moveSpeed(){let t=p.PlayerModel.State.baseMoveSpeed*p.PlayerModel.State.moveSpeed;return t<0&&(t=10),t}}const je=1280;class Od{constructor(e,t){h(this,"player");h(this,"map");h(this,"blocks");h(this,"rowBlocks",[]);h(this,"colBlocks",[[],[],[],[]]);h(this,"checkPos",{x:0,y:0});h(this,"scheduleId");h(this,"defalutPos",[]);this.player=e,this.map=t}setBlocks(e){this.blocks=Array.from(e.children);for(let t=0;t<this.blocks.length;t++)this.defalutPos.push(g.getPosition(this.blocks[t]))}reset(){this.checkPos={x:0,y:0},this.rowBlocks=[],this.colBlocks=[[],[],[],[]];let e=[];for(let t=0;t<this.blocks.length;t++)g.setPosition(this.blocks[t],this.defalutPos[t]),e.push(this.blocks[t]),t%4===3&&t!==0&&(this.rowBlocks.push(e),e=[]),this.colBlocks[t%4].push(this.blocks[t]);this.scheduleId||(this.scheduleId=B.schedule(this.mapCheck.bind(this)))}mapCheck(){const e=p.PlayerModel.State.position;e.x>this.checkPos.x+je?(this.moveBlock2Right(),this.checkPos.x+=je):e.x<this.checkPos.x-je&&(this.moveBlock2Left(),this.checkPos.x-=je),e.y>this.checkPos.y+je?(this.moveBlock2Down(),this.checkPos.y+=je):e.y<this.checkPos.y-je&&(this.moveBlock2Up(),this.checkPos.y-=je)}moveBlock2Up(){const e=this.rowBlocks.pop();for(let t=0;t<e.length;t++)g.addPosition(e[t],{x:0,y:-je*4});this.rowBlocks.unshift(e)}moveBlock2Down(){const e=this.rowBlocks.shift();for(let t=0;t<e.length;t++)g.addPosition(e[t],{x:0,y:je*4});this.rowBlocks.push(e)}moveBlock2Left(){const e=this.colBlocks.pop();for(let t=0;t<e.length;t++)g.addPosition(e[t],{x:-je*4,y:0});this.colBlocks.unshift(e)}moveBlock2Right(){const e=this.colBlocks.shift();for(let t=0;t<e.length;t++)g.addPosition(e[t],{x:je*4,y:0});this.colBlocks.push(e)}}class Sn{constructor(e,t){h(this,"countdownTimer");h(this,"state");h(this,"remainTime");h(this,"gameController");this.gameController=e,this.state=t}getState(){return this.state}setCountdownTime(e,t){this.clearTimer(),this.remainTime=-1,this.countdownTimer=B.scheduleOnce(i=>{let n=Math.floor(e-i);this.remainTime!==n&&(this.remainTime=n,t&&t(this.remainTime))},e)}clearTimer(){this.countdownTimer&&(B.unschedule(this.countdownTimer),this.countdownTimer=0)}}class Td extends Sn{enterState(e){p.IsInGame=!1,this.gameController.showPlayer(!1),this.gameController.pause(),this.gameController.stopCreateEnemy(),Q.stopCreateBullet(),ct.stopTimer()}leaveState(){}}class Ad extends Sn{enterState(e){p.reset(),p.IsInGame=!0,this.gameController.resume(!0),this.gameController.resetMap(),this.gameController.resetPlayerPosition(),this.gameController.showPlayer(!0),this.gameController.createEnemy(),Q.setFirstWeapon(zi),ct.reset(),ct.startTimer()}leaveState(){}}class Dd extends Sn{enterState(e){p.IsInGame=!1,this.gameController.showPlayer(!1),this.gameController.pause(),this.gameController.stopCreateEnemy(),Q.stopCreateBullet(),ct.stopTimer();const t=p.PlayerModel;t.Coin+=t.GameCoin}leaveState(){}}class $d{constructor(){h(this,"stateMap");h(this,"currentState")}initState(e){this.stateMap=new Map,this.stateMap.set(Ne.IDLE,new Td(e,Ne.IDLE)),this.stateMap.set(Ne.GAME,new Ad(e,Ne.GAME)),this.stateMap.set(Ne.GAME_END,new Dd(e,Ne.GAME_END))}enterState(e,t,i=!1){let n=this.stateMap.get(e);if(!n){console.error("Wrong State: state not found",e);return}if(n===this.currentState&&!i){console.error("Wrong State1: ",e,!n);return}this.currentState&&this.currentState.leaveState(),this.currentState=n,this.currentState.enterState(t)}getCurrentState(){var e;return(e=this.currentState)==null?void 0:e.getState()}getCurrentStateName(){var e;return Ne[(e=this.currentState)==null?void 0:e.getState()]}destroy(){this.stateMap!==void 0&&(this.stateMap.forEach(e=>{e.clearTimer()}),this.stateMap.clear()),Object.keys(this).forEach(e=>this[e]=null)}}const To=Md();class Wd{constructor(){h(this,"player");h(this,"gameView");h(this,"map");h(this,"moveController");h(this,"joystickController");h(this,"mapController");h(this,"state",new $d);h(this,"pauesEvents",{});h(this,"resumeEvents",{});h(this,"scheduleIdx",0);h(this,"pauseCount",0);h(this,"randomEnemyMax",2);h(this,"randomEnemyMin",0)}init(e,t,i){this.player=e,this.gameView=t,this.map=i,g.setPosition(i,{x:0,y:0}),p.MapElement=i,this.state.initState(this),this.state.enterState(Ne.IDLE),ie.subscribe(this.handleResize.bind(this)),this.setTimerEvent()}createEnemy(){We.createEnemy("smallEric",10)}stopCreateEnemy(){}createMoveController(e){To||(this.moveController=new Ed(this.player,e))}createJoystickController(e,t,i,n){To&&(this.joystickController=new Bd(this.player,e,t,i,n))}createMapController(){this.mapController=new Od(this.player,this.map)}setMapBlocks(e){this.mapController.setBlocks(e)}startGame(){this.state.enterState(Ne.GAME,null,!0)}endGame(){this.state.enterState(Ne.GAME_END)}exitGame(){this.state.enterState(Ne.IDLE)}showPlayer(e){this.player.style.display=e?"block":"none"}resetPlayerPosition(){this.moveController?this.moveController.reset():this.joystickController.reset()}resetMap(){this.mapController.reset()}pause(){if(this.pauseCount===0){B.pause(),p.IsPause=!0;for(const e of Object.keys(this.pauesEvents)){const t=this.pauesEvents[e];t?t():delete this.pauesEvents[e]}}this.pauseCount++}resume(e=!1){if(this.pauseCount=Math.max(0,this.pauseCount-1),e&&(this.pauseCount=0),this.pauseCount===0){B.resume(),p.IsPause=!1;for(const t of Object.keys(this.pauesEvents)){const i=this.resumeEvents[t];i?i():delete this.resumeEvents[t]}}}registerPauseEvent(e,t){if(this.pauesEvents.has(e)){console.error("event has been registered");return}this.pauesEvents.set(e,t)}registerResumeEvent(e,t){if(this.resumeEvents.has(e)){console.error("event has been registered");return}this.resumeEvents.set(e,t)}handleResize(){const e=p.PlayerModel.State.position,t=p.getMapPosition(),i=g.getSzie(this.player),n=g.getWindowSize(),o=n.width-i.width,l=n.height-i.height;t.x=-e.x+(o+i.width)/2,t.y=-e.y+(l+i.height)/2,p.setMapPosition(t)}setTimerEvent(){ct.registerTimeUpdate(e=>{We.createRandomEnemies("smallEric",this.randomEnemyMin,this.randomEnemyMax),e%60===0&&(He.smallEric.hp=Math.floor(He.smallEric.hp*1.1),He.smallEric.attack=Math.floor(He.smallEric.attack*1.1),We.createRandomEnemies("smallEric",1,20)),e%120===0&&(We.createRandomEnemies("eric",1,3),He.eric.hp=Math.floor(He.eric.hp*1.2),He.eric.attack=Math.floor(He.eric.attack*1.2),this.randomEnemyMax++),e%180===0&&this.randomEnemyMin++,e%300===0&&(We.createRandomEnemies("bigEric",1),He.bigEric.hp=Math.floor(He.eric.hp*1.2))})}}const Ud=re({__name:"gameView",emits:["enterMenuView"],setup(s,{expose:e,emit:t}){const i=t,n=_(),o=_(),l=_(),r=_(),a=_(),c=_(),u=_(),d=_(),y=_(),x=_(),M=_(),I=_(),N=_();let O=new Wd,U,E,$,V,T,K,S,j,F,R,xe,fe=0;e({gameController:O,gameView:n,gameStart:ke,returnMenu:Le}),le(()=>{U=n.value,E=o.value,$=l.value,V=r.value,T=c.value,K=a.value,d.value,S=u.value,j=x.value,F=M.value,R=I.value,xe=N.value,$.setPlayerInfoHpBar(F.hpBar),O.init($.player,U,V),O.createMoveController($.arrow),O.createJoystickController(T.touchPanel,T.joystick,T.stick,$.arrow),O.createMapController(),O.setMapBlocks(K.blocks),O.showPlayer(!1),ie.subscribe(ne)});function bt(){fe++,fe===1&&ve()}function At(){O.pause(),R.show()}function ve(){fe>0&&At()}function he(Ge){fe--,R.hide(),Ge&&F.addEquipment(Ge),O.resume(),ve()}function ne(){if(E){const Ge=ie.getRevertGameRatio(),ys=ie.getCanvasSize(),ui={x:0,y:0},Ke=g.getPosition(p.App);let ht=g.getScaleDiffPosition(E,Ge,{pos:ui,size:ys});ht=J.subtract(ht,Ke),g.setPosition(E,ht),E.style.transform=`scale(${Ge})`}}function ke(){F.reset(),F.show(),Q.removeAllWeapon(),j.removeAllEnemy(),xe.removeAllDrop(),$.removeAllAnimation(),O.startGame(),R.hide(),S.hide(),$.setHpBar(),$.updatePickUpRange(),$.startAutoHeal(),fe=0}function ot(){$.stopAutoHeal(),j.removeEnemyAllAnimation(),O.endGame(),S.setTime(),R.hide(),S.show()}function Le(){F.hide(),O.exitGame(),Q.removeAllWeapon(),j.removeAllEnemy(),$.removeAllAnimation(),R.hide(),S.hide(),i("enterMenuView")}function ze(Ge){F.updateCoin(Ge)}return(Ge,ys)=>(D(),H("div",{class:"gameView",ref_key:"gameViewRef",ref:n},[k("div",{class:"camera",ref_key:"cameraRef",ref:o},[k("div",{class:"map",ref_key:"mapRef",ref:r},[ue(Yu,{ref_key:"blockRef",ref:a},null,512),ue(wh,{ref_key:"dropRef",ref:N},null,512),ue(kd,{ref_key:"bulletBottomViewRef",ref:y},null,512),ue(Nu,{ref_key:"enemyRef",ref:x},null,512),ue(lh,{ref_key:"bulletViewRef",ref:d},null,512),ue(Eu,{ref_key:"playerRef",ref:l,id:"player",onGameOver:ot,onUpdateCoin:ze},null,512)],512)],512),ue(wd,{ref_key:"playerInfoViewRef",ref:M,onOnLevelUp:bt},null,512),ue(qu,{ref_key:"joystickRef",ref:c},null,512),ue(sd,{ref_key:"levelUpViewRef",ref:I,onOnEquipmentBtnClick:he},null,512),ue(rh,{ref_key:"gameOverViewRef",ref:u,onGameStart:ke,onReturnMenu:Le},null,512)],512))}});class Vd{constructor(){h(this,"menuView");h(this,"frame");h(this,"playBtn");h(this,"upgradeBtn");h(this,"rankBtn")}init(e,t,i,n,o){this.menuView=e,this.frame=t,this.playBtn=i,this.upgradeBtn=n,this.rankBtn=o,g.initElement(t),g.initElement(i),g.initElement(n),g.initElement(o),ie.subscribe(this.handleResize.bind(this))}setBtnPosition(){const e=[this.playBtn,this.upgradeBtn,this.rankBtn],t=g.getSzie(this.frame),i=180;let n=t.height/2-i;for(let o=0;o<e.length;o++){const l=g.getSzie(e[o]),r={x:l.width/2,y:l.height/2};r.x=-r.x+t.width/2,r.y=-r.y+n,g.setPosition(e[o],r),n+=i}}handleResize(){const e=g.getSzie(this.frame),t={x:e.width/2,y:e.height/2};t.x=-t.x+ie.centerX(),t.y=-t.y+ie.centerY(),g.setPosition(this.menuView,t),this.setBtnPosition()}}const zd=re({__name:"menuView",emits:["enterGameView","enterUpgradeView"],setup(s,{expose:e,emit:t}){const i=t,n=_(),o=_(),l=_(),r=_(),a=_(),c=_();let u=new Vd,d,y;e({menuController:u,menuView:o,show:I,hide:N}),le(()=>{d=o.value,y=n.value;const E=l.value,$=r.value,V=a.value,T=c.value;u.init(d,E,$,V,T)});function x(){i("enterGameView")}function M(){i("enterUpgradeView")}function I(){y.show(),d.style.display="block"}function N(){y.hide(),d.style.display="none"}function O(){let E;U("../target/wasm32-unknown-unknown/release/hls_wasm.wasm",{}).then(V=>{E=V}),new HlsPlayer(E).play(this.m3u8_url)}function U(E,$){return fetch(E).then(V=>V.arrayBuffer()).then(V=>WebAssembly.instantiate(V,$)).then(V=>V.instance)}return(E,$)=>(D(),H(te,null,[ue(qt,{maskType:Ue(Tt).MENU,ref_key:"maskRef",ref:n},null,8,["maskType"]),k("div",{class:"menuView",ref_key:"menuViewRef",ref:o},[k("div",{class:"menu-frame",ref_key:"frameRef",ref:l},null,512),k("button",{class:"menu-play-btn btn-click",ref_key:"playBtnRef",ref:r,onClick:x},null,512),k("button",{class:"menu-upgrade-btn btn-click",ref_key:"upgradeBtnRef",ref:a,onClick:M},null,512),k("button",{class:"menu-rank-btn btn-click",ref_key:"rankBtnRef",ref:c,onClick:O},null,512)],512)],64))}}),jd=""+new URL("soundOn-D0W5rxC8.png",import.meta.url).href,Hd=""+new URL("soundOff-C6nFMhIi.png",import.meta.url).href,Nd={class:"setting-version-label"},Fd={class:"slide-container"},Gd=k("div",{class:"label-bgm"},"bgm",-1),Kd=k("input",{type:"range",min:"0",max:"100",value:"100",step:"1",class:"slider",id:"slider-bgm"},null,-1),qd=k("div",{class:"label-se"},"se",-1),Xd=k("input",{type:"range",min:"0",max:"100",value:"100",step:"1",class:"slider",id:"slider-se"},null,-1),Yd=re({__name:"settingView",emits:["pauseGame","resumeGame","restartGame","exitGame"],setup(s,{expose:e,emit:t}){const i=t,n=_(),o=_(),l=_(),r=_(),a=_(),c=_(),u=_(),d=_(),y=_();let x,M,I,N,O,U,E,$,V;const T=[Hd,jd];let K=!0,S=!0,j=!1;e({}),le(()=>{x=n.value,M=o.value,I=l.value,N=r.value,O=a.value,U=c.value,E=u.value,$=d.value,V=y.value,g.initElement(I),g.initElement(x),ie.subscribe(fe),window.addEventListener("keydown",ne=>{ne.key==="Escape"&&F()})});function F(){j=!j,j?(i("pauseGame"),E.style.display=p.IsInGame?"block":"none",$.style.display=p.IsInGame?"block":"none",V.style.display=p.IsInGame?"none":"block",M.style.display="block",U.show()):(i("resumeGame"),M.style.display="none",U.hide())}function R(){K=!K,N.style.backgroundImage=`url(${T[Number(K)]})`}function xe(){S=!S,O.style.backgroundImage=`url(${T[Number(S)]})`}function fe(){const ne=g.getSzie(I),ke={x:ne.width/2,y:ne.height/2};ke.x=ie.centerX()-ke.x,ke.y=ie.centerY()-ke.y,g.setPosition(M,ke);const ot=g.getSzie(x),Le={x:ot.width/2,y:ot.height/2};Le.x=ie.right()-Le.x-50,Le.y=-Le.y+50,g.setPosition(x,Le)}function bt(){F()}function At(){Se.show({title:"警告",text:"確定要重新開始遊戲嗎?",isCancel:!0,textStyle:{fontSize:"40px",alignItems:"center",justifyContent:"center",color:"red"},okCb:()=>{Se.hide(),F(),i("restartGame")}})}function ve(){Se.show({title:"警告",text:"確定要離開遊戲嗎?",isCancel:!0,textStyle:{fontSize:"40px",alignItems:"center",justifyContent:"center",color:"red"},okCb:()=>{Se.hide(),F(),i("exitGame")}})}function he(){Se.show({title:"警告",text:"確定要清除所有遊戲資料嗎?",isCancel:!0,textStyle:{fontSize:"40px",alignItems:"center",justifyContent:"center",color:"red"},okCb:()=>{p.PlayerModel.resetSaveData(),Se.hide()}})}return(ne,ke)=>(D(),H(te,null,[ue(qt,{maskType:Ue(Tt).SETTING,onOnClickMask:bt,ref_key:"maskRef",ref:c},null,8,["maskType"]),k("div",{class:"settingView",ref_key:"settingViewRef",ref:o},[k("div",{class:"setting-frame",ref_key:"frameRef",ref:l},null,512),k("div",Nd,"Ver "+Ft(Ue(Bc))+" CoPaNÐa©️ 此遊戲為個人練習專案請勿拿去做任何商業用途",1),k("div",{class:"setting-trash",onClick:he,ref_key:"trashBtnRef",ref:y},null,512),k("div",Fd,[Gd,Kd,k("button",{class:"btn-bgm btn-click",onClick:R,ref_key:"bgmBtnRef",ref:r},null,512),qd,Xd,k("button",{class:"btn-se btn-click",onClick:xe,ref_key:"seBtnRef",ref:a},null,512)]),k("button",{class:"setting-restart btn-click",onClick:At,ref_key:"restartBtnRef",ref:u},null,512),k("button",{class:"setting-exit btn-click",onClick:ve,ref_key:"exittnRef",ref:d},null,512)],512),k("button",{class:"setting-btn btn-click",ref_key:"settingBtnRef",ref:n,onClick:F},null,512)],64))}});class Qd{constructor(){h(this,"upgradeView");h(this,"frame");h(this,"btnInfo");h(this,"btnList");h(this,"levelBoxList",{})}init(e,t,i){this.upgradeView=e,this.frame=t,this.btnInfo=i,ie.subscribe(this.handleResize.bind(this))}onRestBtnClick(){const e=Ht.getString("uptip_rest");Se.show({title:"警告",text:e,isOk:!0,isCancel:!0,textStyle:{fontSize:"40px",alignItems:"center",justifyContent:"center",color:"red"},okCb:()=>{this.resetAllLevel(),Se.hide()},cancelCb:()=>{Se.hide()}})}onQuestionBtnClick(e){if(e==="howto_q"){const r=Ht.getString("uptip_howto");Se.show({title:"說明",text:r,isOk:!0});return}const t=e.split("_")[0],i=p.PlayerModel.UpgradeLevelInfo[t],n=Ie[t].level.length-1;let o=Ht.getString(`uptip_${t}`);const l=o.includes("%");if(o+="<br>",i!==0){let r=Ie[t].level[i];l?(r=Ve(r,100),o+=`<br>目前等級增加 ${r}%`):o+=`<br>目前等級增加 ${r}`}if(i<n){let r=Ie[t].level[i+1];l?(r=Ve(r,100),o+=`<br>下一級增加 ${r}%`):o+=`<br>下一級增加 ${r}`}Se.show({title:"說明",text:o,isOk:!0})}onUpgradeBtnClick(e,t=!1){const i=p.PlayerModel.UpgradeLevelInfo,n=i[e];if(t){const o=Ie[e].price[n];n-1>=0&&(i[e]--,p.PlayerModel.Coin+=o,this.updateLevelBox(e),this.updateTip(e))}else{const o=n+1,l=Ie[e].price[o];l&&p.PlayerModel.Coin>=l&&(i[e]++,p.PlayerModel.Coin-=l,this.updateLevelBox(e),this.updateTip(e))}p.PlayerModel.saveSaveData()}resetAllLevel(){const e=p.PlayerModel.UpgradeLevelInfo;let t=0;for(const i of Object.keys(e)){const n=e[i];for(let o=0;o<=n;o++)t+=Ie[i].price[o];e[i]=0,this.updateLevelBox(i)}p.PlayerModel.Coin+=t,p.PlayerModel.saveSaveData()}updateAllLevelBox(){const e=p.PlayerModel.UpgradeLevelInfo;for(const t of Object.keys(e))this.updateLevelBox(t)}updateLevelBox(e){const i=p.PlayerModel.UpgradeLevelInfo[e];for(let n=0;n<this.levelBoxList[e].length;n++){const o=this.levelBoxList[e][n];n<i?o.style.backgroundColor="MediumSpringGreen":o.style.backgroundColor="whitesmoke"}}createLevelBox(e){this.btnList=e;for(const t of Object.values(this.btnList.value)){const i=t.id;let n=[];for(let o=0;o<Ie[i].level.length-1;o++){const l=document.createElement("div");l.className="upgrade-level-box",l.style.left=mo[o][0]+"px",l.style.top=mo[o][1]+"px",t.appendChild(l),n.push(l)}this.levelBoxList[i]=n}this.updateAllLevelBox(),this.updateAllTip()}handleResize(){const e=g.getSzie(this.frame),t={x:e.width/2,y:e.height/2};t.x=ie.centerX()-t.x,t.y=ie.centerY()-t.y+30,g.setPosition(this.upgradeView,t)}updateAllTip(){for(const e of Object.keys(this.btnList.value))this.updateTip(e)}updateTip(e){const t=this.btnList.value[e].getElementsByClassName("tooltiptext")[0],i=t.innerHTML.split("<br>")[0],o=p.PlayerModel.UpgradeLevelInfo[e],l=Ie[e].price.length-1;let r="";o<l&&(r="$"+String(Ie[e].price[o+1])),t.innerHTML=`${i}<br>${r}`}}const Jd={class:"upgrade-coin-frame"},Zd={class:"upgrade-coin-label"},ef={class:"upgrade-btn-container"},tf=["id"],sf=k("br",null,null,-1),nf=["id"],of=re({__name:"upgradeView",emits:["enterMenuView"],setup(s,{expose:e,emit:t}){const i=t,n=_(),o=_(),l=_(),r=_({}),a=_(Ec),c=_(p.PlayerModel.Coin);let u,d,y,x=new Qd;e({show:I,hide:N}),le(()=>{u=n.value,d=o.value,y=l.value,g.initElement(d),x.init(u,d,a),x.createLevelBox(r),p.PlayerModel.registerCoinUpdate(M)});function M(K){c.value=K}function I(){y.show(),u.style.display="block"}function N(){y.hide(),u.style.display="none"}function O(){N(),i("enterMenuView")}function U(K){const S=K.target;x.onUpgradeBtnClick(S.id)}function E(K){K.preventDefault();const S=K.target;x.onUpgradeBtnClick(S.id,!0)}function $(K){const S=K.target;x.onQuestionBtnClick(S.id)}let V=0;function T(){if(V++,V>=10){const K=p.PlayerModel,S=K.caculateUpgradeCoin();if(K.Coin<S){const j=S-K.Coin;K.Coin+=j,K.saveSaveData()}V=0,Se.show({title:"提示",text:"媽的死作弊狗",textStyle:{fontSize:"40px",alignItems:"center",justifyContent:"center"},isOk:!0})}B.scheduleOnce(()=>{V=0},10)}return(K,S)=>(D(),H(te,null,[ue(qt,{maskType:Ue(Tt).UPGRADE,onOnClickMask:O,ref_key:"maskRef",ref:l},null,8,["maskType"]),k("div",{class:"upgradeView",ref_key:"upgradeViewRef",ref:n},[k("div",Jd,[k("div",{class:"upgrade-coin",onClick:T}),k("div",Zd,Ft(c.value),1),k("button",{class:"upgrade-coin-reset btn-click",onClick:S[0]||(S[0]=(...j)=>Ue(x).onRestBtnClick&&Ue(x).onRestBtnClick(...j))}),k("button",{class:"upgrade-question-btn btn-click",id:"howto_q",onClick:$})]),k("div",{class:"upgrade-frame",ref_key:"frameRef",ref:o},[k("div",ef,[(D(!0),H(te,null,ge(a.value,(j,F)=>(D(),H("button",{class:"upgrade-btn tooltip",id:j.id,style:de({backgroundImage:j.img,left:j.x+"px",top:j.y+"px"}),onClick:rt(U,["stop"]),onContextmenu:rt(E,["stop"]),ref_for:!0,ref:R=>r.value[j.id]=R},[k("span",{class:"tooltiptext",onClick:S[1]||(S[1]=rt(R=>R.preventDefault(),["stop"])),onContextmenu:S[2]||(S[2]=rt(R=>R.preventDefault(),["stop"]))},[Di(Ft(j.tip),1),sf,Di("$0")],32),k("button",{class:"upgrade-question-btn btn-click",id:j.id+"_q",onClick:rt($,["stop"]),onContextmenu:S[3]||(S[3]=rt(R=>R.preventDefault(),["stop"]))},null,40,nf)],44,tf))),256))])],512)],512)],64))}}),lf={class:"message-bar",ref:"frameRefa"},rf={class:"message-check-container"},af=re({__name:"messageView",setup(s,{expose:e}){e({});const t=_(),i=_(),n=_(),o=_(),l=_(),r=_(),a=_();let c,u,d,y,x,M,I;le(()=>{c=t.value,u=i.value,d=n.value,y=o.value,x=l.value,M=r.value,I=a.value,g.initElement(u),Se.init(c,u,y,x,d,M,I)});function N(){}return(O,U)=>(D(),H(te,null,[ue(qt,{maskType:Ue(Tt).MESSAGE,onOnClickMask:N,ref_key:"maskRef",ref:n},null,8,["maskType"]),k("div",{class:"messageView",ref_key:"messageViewRef",ref:t},[k("div",{class:"message-frame",ref_key:"frameRef",ref:i},[k("div",{class:"message-title",ref_key:"titleRef",ref:o},null,512),k("div",lf,null,512),k("div",{class:"message-text",ref_key:"textRef",ref:l},null,512),k("div",rf,[k("div",{class:"message-cancel btn-click",ref_key:"cancelRef",ref:a},null,512),k("div",{class:"message-ok btn-click",ref_key:"okRef",ref:r},null,512)])],512)],512)],64))}}),cf=200;Pt.isIPAD();const Js=class Js{constructor(){h(this,"type");h(this,"app");h(this,"scaleContainer");h(this,"loopTimer");h(this,"resetTimes");h(this,"registerTimeoutHandler");h(this,"destroyed",!1);h(this,"lastInnerWidth",0);h(this,"lastInnerHeight",0);h(this,"lastOuterWidth",0);h(this,"lastOuterHeight",0);h(this,"resizeCheckTimeout");h(this,"_handleNumber",0);h(this,"handleDebounceResize")}static getInstance(){return this.instance===null&&(this.instance=new Js),this.instance}init(e,t){this.app=e,this.scaleContainer=t,this.handleLoad=this.handleLoad.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleVisibiltyChange=this.handleVisibiltyChange.bind(this),this.handleOrientationchange=this.handleOrientationchange.bind(this),this.handleVisibleOrientation=this.handleVisibleOrientation.bind(this),this.onResizeCheck=this.onResizeCheck.bind(this),this.handleLoad(),this.setSize(),this.listenResize()}listenResize(){this.lastInnerWidth=innerWidth,this.lastInnerHeight=innerHeight,this.lastOuterWidth=outerWidth,this.lastOuterHeight=outerHeight,window.addEventListener("load",this.onResizeCheck),window.addEventListener("orientationchange",this.onResizeCheck),window.addEventListener("resize",this.onResizeCheck),document.addEventListener("visibilitychange",this.onResizeCheck);let e=0;this._handleNumber=0;let t=i=>{if(e===0&&(e=i),i-e<300){cancelAnimationFrame(this._handleNumber),this._handleNumber=requestAnimationFrame(t);return}if(this.destroyed){window.removeEventListener("orientationchange",this.onResizeCheck),window.removeEventListener("resize",this.onResizeCheck),document.removeEventListener("visibilitychange",this.onResizeCheck),cancelAnimationFrame(this._handleNumber);return}e=i,cancelAnimationFrame(this._handleNumber),this._handleNumber=requestAnimationFrame(t)};this._handleNumber=requestAnimationFrame(t)}destroy(){window.removeEventListener("load",this.handleLoad),window.removeEventListener("focus",this.handleFocus),window.removeEventListener("blur",this.handleBlur),window.removeEventListener("orientationchange",this.handleOrientationchange),document.removeEventListener("visibilitychange",this.handleVisibiltyChange),this.destroyed=!0}onResizeCheck(){(innerWidth!==this.lastInnerWidth||innerHeight!==this.lastInnerHeight||outerWidth!==this.lastOuterWidth||outerHeight!==this.lastOuterHeight)&&(this.setSize(),this.lastInnerWidth=innerWidth,this.lastInnerHeight=innerHeight,this.lastOuterWidth=outerWidth,this.lastOuterHeight=outerHeight)}handleLoad(){window.addEventListener("focus",this.handleFocus),window.addEventListener("blur",this.handleBlur),window.addEventListener("orientationchange",this.handleOrientationchange),document.addEventListener("visibilitychange",this.handleVisibiltyChange)}handleFocus(){Pt.isIOS()||(this.handleOrientationchange(),this.handleVisibleOrientation())}handleBlur(){Pt.isIOS()||window.removeEventListener("orientationchange",this.handleOrientationchange)}handleVisibiltyChange(){if(document.visibilityState!="visible"){this.registerTimeoutHandler&&clearTimeout(this.registerTimeoutHandler),this.registerTimeoutHandler=null,window.removeEventListener("orientationchange",this.handleOrientationchange);return}this.registerTimeoutHandler||(this.registerTimeoutHandler=setTimeout(this.handleVisibleOrientation,cf))}handleVisibleOrientation(){this.handleOrientationchange(),window.addEventListener("orientationchange",this.handleOrientationchange)}handleOrientationchange(){this.fixIosChromeOrientation()}setSize(){if(mt.update(),this.app){if(!this.app)return;const e=mt.getViewSize(),t=mt.getWindowSize();document.documentElement.style.setProperty("--game-vw",`${e.width}px`),document.documentElement.style.setProperty("--game-vh",`${e.height}px`);const i={x:(t.width-e.width)/2,y:(t.height-e.height)/2};g.setPosition(this.app,i);const n=mt.getStageScale();this.scaleContainer.style.transform=`scale(${n})`,ie.update()}}fixIosChromeOrientation(){if(Pt.isIOSChrome()){const e=window.location.pathname+window.location.search;history.replaceState("","",e+new Date().getTime()),history.replaceState("","",e)}}};h(Js,"instance",null);let Zi=Js;const uf=Zi.getInstance(),hf=re({__name:"index",setup(s){const e=_(),t=_(),i=_(),n=_();let o,l,r,a;le(()=>{a=document.getElementById("app"),o=t.value,l=i.value,r=n.value,p.App=a,l.show(),uf.init(a,e.value)});function c(){l.hide(),o.gameStart()}function u(){l.show()}function d(){l.hide(),r.show()}function y(){o.gameController.pause()}function x(){o.gameController.resume()}function M(){o.gameStart()}function I(){o.returnMenu()}return(N,O)=>(D(),H("div",{class:"appContainer",ref_key:"appContainerRef",ref:e},[ue(Ud,{onEnterMenuView:u,ref_key:"gameViewRef",ref:t},null,512),ue(zd,{onEnterGameView:c,onEnterUpgradeView:d,ref_key:"menuViewRef",ref:i},null,512),ue(of,{onEnterMenuView:u,ref_key:"upgradeViewRef",ref:n},null,512),ue(Yd,{onPauseGame:y,onResumeGame:x,onRestartGame:M,onExitGame:I}),ue(af)],512))}});ac(hf).mount("#app");
